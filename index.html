<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ManoBooçš„æŠ€æœ¯å°çª</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ManoBooçš„æŠ€æœ¯åšå®¢ï¼Œä»¥åæ–‡ç« ä¼šå’Œç®€ä¹¦åŒæ­¥æ›´æ–°~">
<meta property="og:type" content="website">
<meta property="og:title" content="ManoBooçš„æŠ€æœ¯å°çª">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="ManoBooçš„æŠ€æœ¯å°çª">
<meta property="og:description" content="ManoBooçš„æŠ€æœ¯åšå®¢ï¼Œä»¥åæ–‡ç« ä¼šå’Œç®€ä¹¦åŒæ­¥æ›´æ–°~">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ManoBooçš„æŠ€æœ¯å°çª">
<meta name="twitter:description" content="ManoBooçš„æŠ€æœ¯åšå®¢ï¼Œä»¥åæ–‡ç« ä¼šå’Œç®€ä¹¦åŒæ­¥æ›´æ–°~">
  
    <link rel="alternative" href="/atom.xml" title="ManoBooçš„æŠ€æœ¯å°çª" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/avatar.png">
  
  
  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- åŠ è½½ç‰¹æ•ˆ -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/avatar.png" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/">ManoBoo</a></h1>
        </hgroup>

        
        <p class="header-subtitle">æ¬¢è¿æ¥ManoBooçš„å°çªåšå®¢</p>
        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>èœå•</li>
                        <li>æ ‡ç­¾</li>
                        
                        
                        <li>å…³äºæˆ‘</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">åšå®¢é¦–é¡µ</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl github" target="_blank" href="https://github.com/jiachenmu" title="github">github</a>
                            
                                <a class="fl Weibo" target="_blank" href="http://weibo.com/u/3484140182?is_all=1" title="Weibo">Weibo</a>
                            
                                <a class="fl NeteaseMusic" target="_blank" href="http://music.163.com/#/user/home?id=79418549" title="NeteaseMusic">NeteaseMusic</a>
                            
                                <a class="fl Jianshu" target="_blank" href="http://www.jianshu.com/users/232094594d02/latest_articles" title="Jianshu">Jianshu</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/CMModel-JSONè½¬Modelå·¥å…·/" style="font-size: 10px;">CMModel JSONè½¬Modelå·¥å…·</a> <a href="/tags/ReactiveCocoa/" style="font-size: 10px;">ReactiveCocoa</a> <a href="/tags/Swift2-0-é«˜ä»¿App-åŠå¡˜/" style="font-size: 10px;">Swift2.0 é«˜ä»¿App åŠå¡˜</a> <a href="/tags/iOS-æ¨¡ä»¿-App/" style="font-size: 10px;">iOS æ¨¡ä»¿ App</a> <a href="/tags/iOSå°é¡¹ç›®-App/" style="font-size: 20px;">iOSå°é¡¹ç›® App</a>
                    </div>
                </section>
                
                
                

                
                
                <section class="switch-part switch-part3">
                
                    <div id="js-aboutme">iOSå¼€å‘è€…ï¼Œå†™ä»£ç æ˜¯ä¸€ä»¶éå¸¸happyçš„äº‹æƒ…ğŸ˜„</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="å›åˆ°ä¸»é¡µ">ManoBoo</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/avatar.png" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="å›åˆ°ä¸»é¡µ">ManoBoo</a></h1>
            </hgroup>
            
            <p class="header-subtitle">æ¬¢è¿æ¥ManoBooçš„å°çªåšå®¢</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">åšå®¢é¦–é¡µ</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="github" target="_blank" href="https://github.com/jiachenmu" title="github">github</a>
                    
                        <a class="Weibo" target="_blank" href="http://weibo.com/u/3484140182?is_all=1" title="Weibo">Weibo</a>
                    
                        <a class="NeteaseMusic" target="_blank" href="http://music.163.com/#/user/home?id=79418549" title="NeteaseMusic">NeteaseMusic</a>
                    
                        <a class="Jianshu" target="_blank" href="http://www.jianshu.com/users/232094594d02/latest_articles" title="Jianshu">Jianshu</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-iOSåˆ©ç”¨Runtimeå†™ä¸€ä¸ªJsonè½¬Modelçš„å·¥å…·" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/19/iOSåˆ©ç”¨Runtimeå†™ä¸€ä¸ªJsonè½¬Modelçš„å·¥å…·/" class="article-date">
      <time datetime="2016-07-19T09:43:05.000Z" itemprop="datePublished">2016-07-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/19/iOSåˆ©ç”¨Runtimeå†™ä¸€ä¸ªJsonè½¬Modelçš„å·¥å…·/">iOSåˆ©ç”¨Runtimeå†™ä¸€ä¸ªJsonè½¬Modelçš„å·¥å…·</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <hr>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="#å‰è¨€"></a>#å‰è¨€</h2><h2 id="å¥½ä¹…æ²¡æœ‰å†™è¿‡æ–°æ–‡ç« äº†ï¼Œæœ€è¿‘ä¸€ç›´åœ¨å¿™å·¥ä½œçš„äº‹æƒ…ï¼Œæˆ‘çš„æ–°æµªå¾®åšå¼€æºé¡¹ç›®ä¹Ÿåœæ­¢äº†ä¸€å‘¨æ—¶é—´ï¼Œç›®å‰å®Œæˆäº†60-ï¼Œå°±å…ˆå†™ä¸€ç¯‡å…³äºJSONè½¬Modelçš„æ–‡ç« å’Œå¤§å®¶èŠèŠå¤©å§ï¼Œä¸ºä»€ä¹ˆä¼šå†™ä¸€ä¸ªè¿™ä¸ªå°å·¥å…·å‘¢ï¼Œè¯·çœ‹æ–‡æœ«ğŸ˜„"><a href="#å¥½ä¹…æ²¡æœ‰å†™è¿‡æ–°æ–‡ç« äº†ï¼Œæœ€è¿‘ä¸€ç›´åœ¨å¿™å·¥ä½œçš„äº‹æƒ…ï¼Œæˆ‘çš„æ–°æµªå¾®åšå¼€æºé¡¹ç›®ä¹Ÿåœæ­¢äº†ä¸€å‘¨æ—¶é—´ï¼Œç›®å‰å®Œæˆäº†60-ï¼Œå°±å…ˆå†™ä¸€ç¯‡å…³äºJSONè½¬Modelçš„æ–‡ç« å’Œå¤§å®¶èŠèŠå¤©å§ï¼Œä¸ºä»€ä¹ˆä¼šå†™ä¸€ä¸ªè¿™ä¸ªå°å·¥å…·å‘¢ï¼Œè¯·çœ‹æ–‡æœ«ğŸ˜„" class="headerlink" title="###å¥½ä¹…æ²¡æœ‰å†™è¿‡æ–°æ–‡ç« äº†ï¼Œæœ€è¿‘ä¸€ç›´åœ¨å¿™å·¥ä½œçš„äº‹æƒ…ï¼Œæˆ‘çš„æ–°æµªå¾®åšå¼€æºé¡¹ç›®ä¹Ÿåœæ­¢äº†ä¸€å‘¨æ—¶é—´ï¼Œç›®å‰å®Œæˆäº†60%ï¼Œå°±å…ˆå†™ä¸€ç¯‡å…³äºJSONè½¬Modelçš„æ–‡ç« å’Œå¤§å®¶èŠèŠå¤©å§ï¼Œä¸ºä»€ä¹ˆä¼šå†™ä¸€ä¸ªè¿™ä¸ªå°å·¥å…·å‘¢ï¼Œè¯·çœ‹æ–‡æœ«ğŸ˜„"></a>###å¥½ä¹…æ²¡æœ‰å†™è¿‡æ–°æ–‡ç« äº†ï¼Œæœ€è¿‘ä¸€ç›´åœ¨å¿™å·¥ä½œçš„äº‹æƒ…ï¼Œæˆ‘çš„æ–°æµªå¾®åšå¼€æºé¡¹ç›®ä¹Ÿåœæ­¢äº†ä¸€å‘¨æ—¶é—´ï¼Œç›®å‰å®Œæˆäº†60%ï¼Œå°±å…ˆå†™ä¸€ç¯‡å…³äºJSONè½¬Modelçš„æ–‡ç« å’Œå¤§å®¶èŠèŠå¤©å§ï¼Œä¸ºä»€ä¹ˆä¼šå†™ä¸€ä¸ªè¿™ä¸ªå°å·¥å…·å‘¢ï¼Œè¯·çœ‹æ–‡æœ«ğŸ˜„</h2><h2 id="æ ¸å¿ƒæ–¹æ³•Runtimeçš„ä»‹ç»"><a href="#æ ¸å¿ƒæ–¹æ³•Runtimeçš„ä»‹ç»" class="headerlink" title="#æ ¸å¿ƒæ–¹æ³•Runtimeçš„ä»‹ç»"></a>#æ ¸å¿ƒæ–¹æ³•Runtimeçš„ä»‹ç»</h2><p>##1. Runtimeæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>é¡¾åæ€ä¹‰ï¼šRuntimeå°±æ˜¯è¿è¡Œæ—¶çš„æ„æ€ï¼Œæ˜¯ç³»ç»Ÿåœ¨è¿è¡Œæ—¶çš„ä¸€äº›æœºåˆ¶ï¼Œå…¶ä¸­æœ€ä¸»è¦çš„å°±æ˜¯æ¶ˆæ¯æœºåˆ¶ï¼Œä¸¾ä¸ªå¸¸ç”¨çš„ä¾‹å­ï¼Œåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­è¨€ä¸­ï¼Œä¸‡ç‰©çš†å¯¹è±¡ï¼Œå¯¹è±¡å¦‚ä½•è°ƒç”¨æ–¹æ³•å‘¢ï¼Œ<br><code>[target excuteSEL]</code>,éœ€è¦ä¸€ä¸ªå¯¹è±¡ï¼Œéœ€è¦ä¸€ä¸ªæ–¹æ³•åï¼Œç³»ç»Ÿåœ¨è¿è¡Œæ—¶ä¼šè‡ªåŠ¨è½¬æ¢æˆä»¥ä¸‹çš„å½¢å¼ï¼š<br><code>objc_msgSend(target,@selector(excuteSEL:))</code></p>
<p>å…³äºRuntimeçš„è¯¦ç»†ä»‹ç»ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šï¼Œè¿™é‡Œå°±ä¸åšè¿‡å¤šæè¿°äº†ã€‚</p>
<hr>
<p>##2.Runtimeçš„å¸¸è§ç”¨æ³•<br>æ³¨:ä½¿ç”¨æ—¶éœ€è¦<code>#import &lt;objc/objc-runtime.h&gt;</code></p>
<h3 id="1-æ–¹æ³•æ›¿æ¢-é»‘é­”æ³•"><a href="#1-æ–¹æ³•æ›¿æ¢-é»‘é­”æ³•" class="headerlink" title="* 1 æ–¹æ³•æ›¿æ¢(é»‘é­”æ³•)"></a>* 1 æ–¹æ³•æ›¿æ¢(é»‘é­”æ³•)</h3><p>ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ï¼š<br>å°†è°ƒç”¨Aæ–¹æ³•æ›¿æ¢ä¸ºè°ƒç”¨Bæ–¹æ³•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">class_replaceMethod([self class], @selector(sendAMessage:), (IMP)changeAtoB, NULL);</div><div class="line"></div><div class="line">//MARK: æ–¹æ³•æ›¿æ¢_1</div><div class="line">- (void)sendAMessage:(NSString *)message &#123;</div><div class="line">    NSLog(@&quot;A_message: %@&quot;,message);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)sendBMessage:(NSString *)message &#123;</div><div class="line">    NSLog(@&quot;B_Message: %@&quot;,message);</div><div class="line">&#125;</div><div class="line"></div><div class="line">ViewController * changeAtoB(ViewController *SELF, SEL _cmd, NSString *message) &#123;</div><div class="line">   </div><div class="line">    if ([NSStringFromSelector(_cmd) isEqualToString:@&quot;sendAMessage:&quot;]) &#123;</div><div class="line">        //å°†æ–¹æ³•è¿›è¡Œæ›¿æ¢</div><div class="line">        [SELF sendBMessage:message];</div><div class="line">    &#125;</div><div class="line">    return SELF;</div><div class="line">&#125;</div><div class="line">//è¿™é‡ŒIMPå¯ä»¥ç†è§£ä¸ºé­”æ³•é€šé“ï¼Œå°†æºæ–¹æ³•é€šè¿‡IMPæŒ‡é’ˆè½¬æ¢ä¸ºç›®æ ‡æ–¹æ³•</div></pre></td></tr></table></figure></p>
<h3 id="2-è·å–å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•"><a href="#2-è·å–å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•" class="headerlink" title="* 2 è·å–å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•"></a>* 2 è·å–å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•</h3><p>æ³¨ï¼šè·å–å¯¹è±¡çš„å±æ€§ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨JSONè½¬Modelå¯ä»¥è¯´æ˜¯æ ¸å¿ƒæ–¹æ³•äº†<br>ä¸¾ä¾‹è¯´æ˜ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//class_copyPropertyList è¿™ä¸ªæ–¹æ³•ä¼šè·å–åˆ°ä¸€ä¸ªç±».hå’Œ.mæ–‡ä»¶ä¸­interfaceä¸­çš„æ‰€æœ‰å±æ€§</div><div class="line"></div><div class="line">//è·å–CMGCDç±»çš„å±æ€§åç§°</div><div class="line">    unsigned int count;</div><div class="line">    objc_property_t *propertyList = class_copyPropertyList([CMGCD class], &amp;count);</div><div class="line">    for (unsigned int i = 0; i &lt; count; i++) &#123;</div><div class="line">        const char *propertyName = property_getName(propertyList[i]);</div><div class="line">        NSLog(@&quot;property ---&gt; %@&quot;,[NSString stringWithUTF8String:propertyName]);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//</div><div class="line">unsigned int count;</div><div class="line">Method *methodList = class_copyMethodList([CMGCD class], &amp;count);</div><div class="line">    for (unsigned int i; i &lt; count; i++) &#123;</div><div class="line">        Method method = methodList[i];</div><div class="line">        NSLog(@&quot;Method ---&gt; %@&quot;,NSStringFromSelector(method_getName(method)));</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<hr>
<h3 id="2-è®¾ç½®å¯¹è±¡å…³è”"><a href="#2-è®¾ç½®å¯¹è±¡å…³è”" class="headerlink" title="* 2 è®¾ç½®å¯¹è±¡å…³è”"></a>* 2 è®¾ç½®å¯¹è±¡å…³è”</h3><p>å®šä¹‰ï¼šå…³è”æ˜¯æŒ‡æŠŠä¸¤ä¸ªå¯¹è±¡ç›¸äº’å…³è”èµ·æ¥ï¼Œä½¿å…¶ä¸­çš„ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå¦å¤–ä¸€ä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†<br>å†ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘åœ¨å¯¹è±¡ä¸­å®šä¹‰äº†ä¸€ä¸ªå±æ€§<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@property (strong, nonatomic) NSString *content;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//è®¾ç½®å¯¹è±¡å±æ€§å…³è”</div><div class="line">static char associatedKey;</div><div class="line">    objc_setAssociatedObject(self, &amp;associatedKey, @&quot;content_yeah&quot;, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</div><div class="line">    NSString *get_content = objc_getAssociatedObject(self, &amp;associatedKey);</div><div class="line">    NSLog(@&quot;content = %@&quot;,get_content);</div></pre></td></tr></table></figure>
<p><strong>Tips:</strong>è®¾ç½®å¯¹è±¡å…³è”éœ€è¦ä»¥ä¸‹å‡ ä¸ªè¦ç‚¹ï¼š<br><code>æºå¯¹è±¡</code>ã€<code>å…³é”®å­—</code>ã€<code>å…³è”çš„å¯¹è±¡</code> <code>å…³è”ç­–ç•¥</code><br><strong>è§£é‡Šä¸€ä¸‹ï¼š</strong>è¿™é‡Œæˆ‘å°†<code>@&quot;content_yeah&quot;</code>è¿™ä¸ªå¯¹è±¡ä¸<code>self</code>ä½¿ç”¨<code>OBJC_ASSOCIATION_RETAIN_NONATOMIC</code>ç­–ç•¥å…³è”åˆ°ä¸€èµ·ï¼Œæ„æ€å°±æ˜¯åœ¨<code>self</code>çš„ç”Ÿå‘½å‘¨æœŸä¹‹å†…å…³è”çš„å¯¹è±¡éƒ½ä¸ä¼šè¢«é‡Šæ”¾ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å®ç°åŠ¨æ€å‘ç±»é‡Œé¢æ·»åŠ å±æ€§<br>å¦å¤–è¿˜æœ‰ä¸€äº›å…³è”çš„æ–¹æ³•ï¼Œå¦‚</p>
<ul>
<li><p>æ–­å¼€å…³è”ï¼š è®¾ç½®å…³è”å¯¹è±¡ä¸º<code>nil</code>å³å¯<br><code>objc_setAssociatedObject(self, &amp;associatedKey, nil, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</code></p>
</li>
<li><p>æ–­å¼€è¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰å…³è”å…³ç³»</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//æ–­å¼€æ‰€æœ‰å…³è”</div><div class="line">    objc_removeAssociatedObjects(self);</div></pre></td></tr></table></figure>
<hr>
<p>#JSONè½¬Modelå·¥å…·çš„ä¸»è¦ä»‹ç»</p>
<hr>
<h2 id="1-ä¸ºä»€ä¹ˆä¼šå†™è¿™æ ·ä¸€ä¸ªå·¥å…·"><a href="#1-ä¸ºä»€ä¹ˆä¼šå†™è¿™æ ·ä¸€ä¸ªå·¥å…·" class="headerlink" title="1. ä¸ºä»€ä¹ˆä¼šå†™è¿™æ ·ä¸€ä¸ªå·¥å…·"></a>1. ä¸ºä»€ä¹ˆä¼šå†™è¿™æ ·ä¸€ä¸ªå·¥å…·</h2><p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸æ˜¯ç¼ºå°‘å®åŠ›ï¼Œè€Œä¸”æ˜¯ç¼ºå°‘ä¸€ç§<strong><code>å½¼å¯å–è€Œä»£ä¹‹</code></strong>çš„å‹‡æ°”ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰<code>MJExtension</code>ã€<code>YYModel</code>çš„äº§ç”Ÿ,æŸ¥çœ‹æºä»£ç çš„è¿‡ç¨‹ä¸­æˆ‘æœ‰ç§æƒ³æ­»çš„æ„Ÿè§‰ï¼Œä½†æ˜¯çŸ¥é“å®ç°çš„åŸç†åï¼Œä¸ºä»€ä¹ˆä¸èƒ½è‡ªå·±å»å®ç°ä¸€ä¸ªå‘¢ï¼Ÿè¿™ä¸ªå·¥å…·çš„æºä»£ç éå¸¸ç®€å•ï¼Œæˆ‘å†™è¿™ä¸ªå·¥å…·çš„ç›®çš„åªæ˜¯ä¸ºäº†å‘Šè¯‰æœ‹å‹ä»¬ï¼ŒçœŸçš„ä¸å¤æ‚ï¼Œä¸è¦å› ä¸ºçœ‹ç€å¤æ‚å°±æ”¾å¼ƒäº†è‡ªå·±åŠ¨æ‰‹çš„å†²åŠ¨</p>
<h2 id="2-å·¥å…·çš„æ•´ä½“æ­¥éª¤ç®€ä»‹"><a href="#2-å·¥å…·çš„æ•´ä½“æ­¥éª¤ç®€ä»‹" class="headerlink" title="2. å·¥å…·çš„æ•´ä½“æ­¥éª¤ç®€ä»‹"></a>2. å·¥å…·çš„æ•´ä½“æ­¥éª¤ç®€ä»‹</h2><p>ç€é‡ä»‹ç»ä¸€ä¸‹æˆ‘çš„æ€è€ƒè¿‡ç¨‹</p>
<ul>
<li>1 æ ¸å¿ƒæ–¹æ³•ï¼Ÿ<br> åˆ©ç”¨Runtimeå¯ä»¥éå†å‡ºå¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œç„¶ååˆ©ç”¨é€’å½’çš„æ€æƒ³é€å±‚è§£æJSON</li>
<li>2 æ€ä¹ˆå»åšï¼Ÿ<br> åŸºæœ¬æ‰€æœ‰çš„Modelç»§æ‰¿<code>NSObject</code>ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ª<code>NSObject</code>çš„<code>Category</code>ï¼Œç„¶ååœ¨å…¶ä¸­å†™ä¸€äº›è§£ææ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯¹ç…§JSONå­—ç¬¦ä¸²çš„è§£æè·¯å¾„å­—å…¸ï¼Œæ¯”å¦‚è¯´<code>JSON</code>çš„<code>ç‹—</code>çš„å±æ€§åç§°ä¸º<code>dog</code>,æˆ‘ä»¬çš„å¯¹è±¡å±æ€§åç§°æƒ³å®šä¹‰ä¸º<code>xiaogou</code>ï¼Œè¿™å°±éœ€è¦æ‰‹å†™ä¸€ä¸ªå­—å…¸å°†è§£æä¸­é‡åˆ°çš„<code>dog</code>éƒ½ç»™æ˜ å°„ä¸º<code>xiaogou</code></li>
<li>3 å¼€å§‹åŠ¨æ‰‹å§</li>
</ul>
<hr>
<h2 id="3-ä¸»è¦ä»£ç ä»‹ç»ï¼š"><a href="#3-ä¸»è¦ä»£ç ä»‹ç»ï¼š" class="headerlink" title="3. ä¸»è¦ä»£ç ä»‹ç»ï¼š"></a>3. ä¸»è¦ä»£ç ä»‹ç»ï¼š</h2><hr>
<h3 id="1-NSObject-CMModel-ä»‹ç»"><a href="#1-NSObject-CMModel-ä»‹ç»" class="headerlink" title="* 1 NSObject+CMModel ä»‹ç»"></a>* 1 <code>NSObject+CMModel</code> ä»‹ç»</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//NSObject+CMModel.h </div><div class="line">// å•ä¸ªå¯¹è±¡</div><div class="line">- (NSDictionary *)dict_CMModelWithClass;</div><div class="line"></div><div class="line">// å¯¹è±¡æ•°ç»„</div><div class="line">- (NSDictionary *)dict_CMModelWIthArrayClass;</div><div class="line"></div><div class="line">- (instancetype)cm_initWithJSONString:(NSString *)jsonString;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢ç€é‡è§£é‡Šä¸€ä¸‹.mæ–‡ä»¶ä¸­çš„å†…å®¹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">//NSObject+CMModel.m</div><div class="line">#import &lt;objc/runtime.h&gt;</div><div class="line">#import &quot;CMObject.h&quot;</div><div class="line">#import &quot;CMProperty.h&quot;</div><div class="line"></div><div class="line">//è¿”å›å•ä¸ªå¯¹è±¡çš„è§£æå­—å…¸ï¼Œé»˜è®¤ä¸ºnil</div><div class="line">- ( NSDictionary * _Nullable )dict_CMModelWithClass &#123;</div><div class="line">    return nil;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//è¿”å›å¯¹è±¡æ•°ç»„çš„è§£æå­—å…¸ï¼Œé»˜è®¤ä¸ºnil</div><div class="line">- (NSDictionary *)dict_CMModelWIthArrayClass &#123;</div><div class="line">    return nil;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//è°ƒç”¨æ–¹æ³•</div><div class="line">- (instancetype)cm_initWithJSONString:(NSString *)jsonString &#123;</div><div class="line">    if (self) &#123;</div><div class="line">        [self analysisWitnJsonString:jsonString];</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p> <strong>å–å¾—å¯¹è±¡çš„æ‰€æœ‰å±æ€§åŠå…¶å¯¹åº”çš„ç±»å‹</strong><br> Tips: è¿™é‡Œè‡ªå·±å†™äº†ä¸€ä¸ªç±»ï¼Œå°†å¯¹è±¡çš„å±æ€§åŠå…¶åç§°å°è£…åˆ°ä¸€ä¸ªç±»å‹ä¸º<code>CMProperty</code>çš„æ•°ç»„</p>
<ul>
<li>1 <strong>CMPropertyç±»ç®€ä»‹</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//å±æ€§åç§°</div><div class="line">@property (strong, nonatomic) NSString *propertyName;</div><div class="line"></div><div class="line">//å±æ€§çš„ç±»</div><div class="line">@property (strong, nonatomic) Class propertyClass;</div><div class="line"></div><div class="line">//æ˜¯å¦åŸºæœ¬ç±»å‹</div><div class="line">@property (assign, nonatomic) BOOL isBasicType;</div></pre></td></tr></table></figure>
<ul>
<li>2 <strong>è·å–å¯¹è±¡å±æ€§åŠå…¶ç±»å‹ï¼Œå¹¶ä¸”å°†å…¶å°è£…ä¸ºç±»å‹ä¸º<code>CMProperty</code>çš„æ•°ç»„</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"> //å°†è¯¥ç±»çš„å±æ€§å’Œå¯¹åº”çš„ç±»å‹è¿›è¡Œå°è£…</div><div class="line">- (NSArray &lt;CMProperty *&gt; *)propertyArray &#123;</div><div class="line">    NSMutableArray *propertyArray = [NSMutableArray array];</div><div class="line">    </div><div class="line">    unsigned int count;</div><div class="line">    objc_property_t *propertyList = class_copyPropertyList([self class], &amp;count);</div><div class="line">    for (unsigned int i = 0; i &lt; count; i++) &#123;</div><div class="line">        CMProperty *property = [[CMProperty alloc] init];</div><div class="line">        property.propertyName = [NSString stringWithUTF8String:property_getName(propertyList[i])];</div><div class="line">        </div><div class="line">        NSString *attrs = @(property_getAttributes(propertyList[i]));</div><div class="line"></div><div class="line">        NSUInteger dotLoc = [attrs rangeOfString:@&quot;,&quot;].location;</div><div class="line">        NSString *propertyType = nil;</div><div class="line">        NSUInteger loc = 1;</div><div class="line">        if (dotLoc == NSNotFound) &#123; // æ²¡æœ‰æ‰¾åˆ°</div><div class="line">            propertyType = [attrs substringFromIndex:loc];</div><div class="line">        &#125;else &#123;</div><div class="line">            propertyType = [attrs substringWithRange:NSMakeRange(loc, dotLoc - loc)];</div><div class="line">            if ([propertyType isEqualToString:@&quot;Q&quot;]) &#123;</div><div class="line">                //åŸºæœ¬ç±»å‹</div><div class="line">                property.isBasicType = true;</div><div class="line">            &#125;else &#123;</div><div class="line">                propertyType = [propertyType substringWithRange:NSMakeRange(2, propertyType.length - 3)];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        property.propertyClass = NSClassFromString(propertyType);</div><div class="line">    </div><div class="line">        [propertyArray addObject:property];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    free(propertyList);</div><div class="line">    </div><div class="line">    return propertyArray;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>å¼€å§‹è§£æ</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//è¿›è¡Œè§£æ</div><div class="line">- (void)analysisWitnJsonString:(NSString *)json &#123;</div><div class="line">    </div><div class="line">    //å­˜åœ¨è§£æå­—å…¸</div><div class="line">    if ([self dict_CMModelWithClass] != nil || [self dict_CMModelWIthArrayClass] != nil) &#123;</div><div class="line">        CMObject *analysisTools = [[CMObject alloc] initWithGoalObject:self CMPropertyArray:[self propertyArray]];</div><div class="line">        if ([self dict_CMModelWIthArrayClass]) &#123;</div><div class="line">            analysisTools.analysisObjectArrayDict = [self dict_CMModelWIthArrayClass];</div><div class="line">        &#125;</div><div class="line">        if ([self dict_CMModelWithClass]) &#123;</div><div class="line">            analysisTools.analysisDict = [self dict_CMModelWithClass];</div><div class="line">        &#125;</div><div class="line">        analysisTools.jsonString = json;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="2-CMObject-ä»‹ç»"><a href="#2-CMObject-ä»‹ç»" class="headerlink" title="* 2 CMObject ä»‹ç»"></a>* 2 <code>CMObject</code> ä»‹ç»</h3><p>è¿™ä¸ªç±»ä¸ºå®é™…è¿›è¡Œè§£æå·¥å…·çš„ç±»ï¼Œæˆ–è€…å¯ä»¥ç§°ä¹‹ä¸ºå·¥å…·,è¿™é‡Œæˆ‘ä»¬éœ€è¦ç‰¹æ®Šå¯¹å¾…<code>NSArray</code>ã€<code>NSDictionary</code>ã€<code>intã€floatç­‰åŸºæœ¬ç±»å‹</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">//CMObject.h</div><div class="line"></div><div class="line">//è¦è§£æçš„å¯¹è±¡</div><div class="line">@property (strong, nonatomic) id object;</div><div class="line"></div><div class="line">//è§£ækeyå¯¹åº”åˆ—è¡¨ å•ä¸ªå¯¹è±¡</div><div class="line">@property (strong, nonatomic) NSDictionary *analysisDict;</div><div class="line"></div><div class="line">//è§£ækeyå¯¹åº”åˆ—è¡¨ å¯¹è±¡æ•°ç»„</div><div class="line">@property (strong, nonatomic) NSDictionary *analysisObjectArrayDict;</div><div class="line"></div><div class="line">//å±æ€§åˆ—è¡¨</div><div class="line">@property (strong, nonatomic) NSArray &lt;CMProperty *&gt; *propertyArray;</div><div class="line"></div><div class="line">//initæ–¹æ³•</div><div class="line">- (instancetype)initWithGoalObject:(id)object CMPropertyArray:(NSArray &lt;CMProperty *&gt; *)propertyArray;</div><div class="line"></div><div class="line">//è§£æçš„æºJSON</div><div class="line">@property (strong, nonatomic) NSString *jsonString;</div><div class="line"></div><div class="line"></div><div class="line">BOOL Exist_(id obj,NSArray *existArray);</div></pre></td></tr></table></figure>
<p><strong>Tips:</strong> ä¸‹é¢ä»£ç å¯èƒ½çœ‹ç€ä¼šä¸èˆ’æœï¼Œæˆ‘è¯´ä¸€ä¸‹æ•´ä½“çš„æ€è·¯</p>
<h4 id="1-NSObject-CMModelä¸­å°†å°è£…çš„å±æ€§æ•°ç»„ä¼ é€’è¿‡æ¥ï¼Œæˆ‘ä»¬ä¸€ä¸ªæ¥ä¸€ä¸ªçš„å¯¹å±æ€§è¿›è¡Œéå†æ„é€ "><a href="#1-NSObject-CMModelä¸­å°†å°è£…çš„å±æ€§æ•°ç»„ä¼ é€’è¿‡æ¥ï¼Œæˆ‘ä»¬ä¸€ä¸ªæ¥ä¸€ä¸ªçš„å¯¹å±æ€§è¿›è¡Œéå†æ„é€ " class="headerlink" title="* 1 NSObject+CMModelä¸­å°†å°è£…çš„å±æ€§æ•°ç»„ä¼ é€’è¿‡æ¥ï¼Œæˆ‘ä»¬ä¸€ä¸ªæ¥ä¸€ä¸ªçš„å¯¹å±æ€§è¿›è¡Œéå†æ„é€ "></a>* 1 <code>NSObject+CMModel</code>ä¸­å°†å°è£…çš„å±æ€§æ•°ç»„ä¼ é€’è¿‡æ¥ï¼Œæˆ‘ä»¬ä¸€ä¸ªæ¥ä¸€ä¸ªçš„å¯¹å±æ€§è¿›è¡Œéå†æ„é€ </h4><h4 id="2-éå†è¯¦è§£ï¼šä¸¾ä¾‹ï¼Œç¢°åˆ°NSArrayçš„å±æ€§æ—¶ï¼Œæˆ‘ä»¬å»çœ‹è¦è§£æçš„ç±»ä¸­å®ç°çš„-NSDictionary-dict-CMModelWIthArrayClassè¿™ä¸ªæ–¹æ³•ï¼Œæ‰¾åˆ°ç›®çš„å¯¹è±¡çš„ç±»å‹OBJClassï¼Œç„¶åå°†JSONå­—å…¸æ‹†åˆ†ååˆ©ç”¨-instancetype-cm-initWithJSONString-NSString-jsonStringè¿™ä¸ªæ–¹æ³•åˆ›å»ºä¸€ä¸ªOBJClassç±»å‹çš„å¯¹è±¡ï¼Œå¹¶ä¸”æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼Œåˆ›å»ºå®Œåï¼Œä½¿ç”¨KVC-å°†æ•°ç»„èµ‹ç»™æºå¯¹è±¡ï¼Œå…·ä½“ä»£ç çœ‹ä¸‹é¢"><a href="#2-éå†è¯¦è§£ï¼šä¸¾ä¾‹ï¼Œç¢°åˆ°NSArrayçš„å±æ€§æ—¶ï¼Œæˆ‘ä»¬å»çœ‹è¦è§£æçš„ç±»ä¸­å®ç°çš„-NSDictionary-dict-CMModelWIthArrayClassè¿™ä¸ªæ–¹æ³•ï¼Œæ‰¾åˆ°ç›®çš„å¯¹è±¡çš„ç±»å‹OBJClassï¼Œç„¶åå°†JSONå­—å…¸æ‹†åˆ†ååˆ©ç”¨-instancetype-cm-initWithJSONString-NSString-jsonStringè¿™ä¸ªæ–¹æ³•åˆ›å»ºä¸€ä¸ªOBJClassç±»å‹çš„å¯¹è±¡ï¼Œå¹¶ä¸”æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼Œåˆ›å»ºå®Œåï¼Œä½¿ç”¨KVC-å°†æ•°ç»„èµ‹ç»™æºå¯¹è±¡ï¼Œå…·ä½“ä»£ç çœ‹ä¸‹é¢" class="headerlink" title=" 2 éå†è¯¦è§£ï¼šä¸¾ä¾‹ï¼Œç¢°åˆ°NSArrayçš„å±æ€§æ—¶ï¼Œæˆ‘ä»¬å»çœ‹è¦è§£æçš„ç±»ä¸­å®ç°çš„`- (NSDictionary )dict_CMModelWIthArrayClassè¿™ä¸ªæ–¹æ³•ï¼Œæ‰¾åˆ°ç›®çš„å¯¹è±¡çš„ç±»å‹OBJClassï¼Œç„¶åå°†JSONå­—å…¸æ‹†åˆ†ååˆ©ç”¨- (instancetype)cm_initWithJSONString:(NSString *)jsonStringè¿™ä¸ªæ–¹æ³•åˆ›å»ºä¸€ä¸ªOBJClassç±»å‹çš„å¯¹è±¡ï¼Œå¹¶ä¸”æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼Œåˆ›å»ºå®Œåï¼Œä½¿ç”¨KVC`å°†æ•°ç»„èµ‹ç»™æºå¯¹è±¡ï¼Œå…·ä½“ä»£ç çœ‹ä¸‹é¢"></a><em> 2 éå†è¯¦è§£ï¼šä¸¾ä¾‹ï¼Œç¢°åˆ°<code>NSArray</code>çš„å±æ€§æ—¶ï¼Œæˆ‘ä»¬å»çœ‹è¦è§£æçš„ç±»ä¸­å®ç°çš„`- (NSDictionary </em>)dict_CMModelWIthArrayClass<code>è¿™ä¸ªæ–¹æ³•ï¼Œæ‰¾åˆ°ç›®çš„å¯¹è±¡çš„ç±»å‹</code>OBJClass<code>ï¼Œç„¶åå°†</code>JSONå­—å…¸<code>æ‹†åˆ†ååˆ©ç”¨</code>- (instancetype)cm_initWithJSONString:(NSString *)jsonString<code>è¿™ä¸ªæ–¹æ³•åˆ›å»ºä¸€ä¸ª</code>OBJClass<code>ç±»å‹çš„å¯¹è±¡ï¼Œå¹¶ä¸”æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼Œåˆ›å»ºå®Œåï¼Œä½¿ç”¨</code>KVC`å°†æ•°ç»„èµ‹ç»™æºå¯¹è±¡ï¼Œå…·ä½“ä»£ç çœ‹ä¸‹é¢</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line">//CMObject.m</div><div class="line">//è¿™é‡Œè¯´ä¸€ä¸‹è§£ææ–¹æ³•, ä»£ç è¾ƒå¤š</div><div class="line">//å¼€å§‹è¿›è¡Œmodelè§£æ</div><div class="line">- (void)analysisModel &#123;</div><div class="line">    NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData:[_jsonString dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingAllowFragments error:nil];</div><div class="line"></div><div class="line">    //å°†`NSObject+CMModel`ä¸­è·å–çš„å±æ€§æ•°ç»„è¿›è¡Œéå†æ„é€ ï¼Œå¹¶èµ‹å€¼ç»™å¯¹åº”çš„å±æ€§</div><div class="line">    [_propertyArray enumerateObjectsUsingBlock:^(CMProperty * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;</div><div class="line">        //å•ç‹¬å¤„ç†æ•°ç»„ç±»å‹</div><div class="line">        if (obj.propertyClass == [NSArray class]) &#123;</div><div class="line">            //Â Â å¯¹è±¡ä¸ºæ•°ç»„ç±»å‹ï¼Œ</div><div class="line">            NSString *key = [_analysisObjectArrayDict objectForKey:obj.propertyName];</div><div class="line"></div><div class="line">            Class OBJClass = NSClassFromString(key);</div><div class="line">        </div><div class="line">            if (![jsonDict objectForKey:key]) &#123;</div><div class="line">                //åç§°ä¸jsonä¸­çš„åç§°å¹¶ä¸ç›¸ç¬¦</div><div class="line">                if ([_analysisDict objectForKey:obj.propertyName]) &#123;</div><div class="line">                    NSMutableArray *objectArray = [NSMutableArray array];</div><div class="line">                    </div><div class="line">                    NSArray *obj_json_array = [jsonDict objectForKey:[_analysisDict objectForKey:obj.propertyName]];</div><div class="line">                    [obj_json_array enumerateObjectsUsingBlock:^(NSDictionary   * _Nonnull obj_dict, NSUInteger idx, BOOL * _Nonnull stop) &#123;</div><div class="line">                        id objx = [[OBJClass alloc] cm_initWithJSONString:DataToJSONString(obj_dict)];</div><div class="line">                        //è§£æå¥½å¯¹è±¡ä¹‹åï¼Œå­˜åˆ°æ•°æ®ä¸­</div><div class="line">                        [objectArray addObject:objx];</div><div class="line">                        </div><div class="line">                    &#125;];</div><div class="line">                    [_object setValue:objectArray forKey:obj.propertyName];</div><div class="line">                &#125;else &#123;</div><div class="line">                    </div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;else if (Exist_(obj.propertyClass, @[[NSDictionary class],[NSMutableDictionary class]])) &#123;</div><div class="line">            NSDictionary *obj_dict = [jsonDict valueForKey:[_analysisDict objectForKey:obj.propertyName]];</div><div class="line">            if (!obj_dict) &#123;</div><div class="line">                [_object setValue:[NSNull null] forKey:obj.propertyName];</div><div class="line">            &#125;else &#123;</div><div class="line">                [_object setValue:obj_dict forKey:obj.propertyName];</div><div class="line">            &#125;</div><div class="line">        &#125;else if (obj.isBasicType)&#123;</div><div class="line">            //åŸºæœ¬ç±»å‹</div><div class="line">            id num = [jsonDict valueForKey:[_analysisDict objectForKey:obj.propertyName]];</div><div class="line">            if (!num || num == [NSNull null]) &#123;</div><div class="line">                //ä¸ºç©ºåˆ¤æ–­</div><div class="line">                //è¿™é‡Œæˆ‘ä»¬é»˜è®¤è®¾ç½®ä¸º 0.00å¤§å°çš„NSNumberå¯¹è±¡Â </div><div class="line">                [_object setValue:NULL_NUM forKey:obj.propertyName];</div><div class="line">            &#125;else &#123;</div><div class="line">                NSNumber *number = (NSNumber *)num;</div><div class="line">                [_object setValue:number forKey:obj.propertyName];</div><div class="line">            &#125;</div><div class="line">        &#125;else &#123;</div><div class="line">            Class OBJClass = obj.propertyClass;</div><div class="line">            if(!Exist_(OBJClass, foundationClasses_)) &#123;</div><div class="line">                //å¦‚æœç±»å‹ä¸ºè‡ªå®šä¹‰ç±»</div><div class="line">                id obj_dict = [jsonDict valueForKey:[_analysisDict objectForKey:obj.propertyName]];</div><div class="line">                //éç©ºåˆ¤æ–­</div><div class="line">                if (!obj_dict) &#123;</div><div class="line">                    id objx = [[OBJClass alloc] cm_initWithJSONString:DataToJSONString(obj_dict)];</div><div class="line">                    [_object setValue:objx forKey:obj.propertyName];</div><div class="line">                &#125;else &#123;</div><div class="line">                    //è¿™é‡Œå¯ä»¥èµ‹å€¼ä¸º[NSNull null] å¯ä»¥èµ‹å€¼ä¸ºä¸€ä¸ªæ–°å¯¹è±¡</div><div class="line">//                    [_object setValue:[NSNull null] forKey:obj.propertyName];</div><div class="line">                    [_object setValue:[[OBJClass alloc] init] forKey:obj.propertyName];</div><div class="line">                &#125;</div><div class="line">            &#125;else &#123;</div><div class="line">                [_object setValue:[jsonDict valueForKey:[_analysisDict objectForKey:obj.propertyName]] forKey:obj.propertyName];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h2 id="4-å¦‚ä½•ä½¿ç”¨"><a href="#4-å¦‚ä½•ä½¿ç”¨" class="headerlink" title="4. å¦‚ä½•ä½¿ç”¨"></a>4. å¦‚ä½•ä½¿ç”¨</h2><hr>
<p>ä¸¾ä¾‹è¯´æ˜ï¼š<br>è¿™é‡Œæœ‰ä¸‰ä¸ªç±»<br><strong>Animals(åŠ¨ç‰©)</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">@property (strong, nonatomic) NSArray &lt;Dog *&gt; *dogs;</div><div class="line">@property (strong, nonatomic) NSArray &lt;Pig *&gt; *pigs;</div></pre></td></tr></table></figure></p>
<p>â€”å®ç°æ–¹æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">- (NSDictionary *)dict_CMModelWithClass &#123;</div><div class="line">    return @&#123;</div><div class="line">             @&quot;dogs&quot; : @&quot;dog&quot;,</div><div class="line">             @&quot;pigs&quot; : @&quot;pig&quot;,</div><div class="line">             &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (NSDictionary *)dict_CMModelWIthArrayClass &#123;</div><div class="line">    return @&#123;</div><div class="line">             @&quot;dogs&quot; : @&quot;Dog&quot;,</div><div class="line">             @&quot;pigs&quot; : @&quot;Pig&quot;,</div><div class="line">             &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Dog(ç‹—)</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@property (strong, nonatomic) NSString *dog_name;</div><div class="line">@property (assign, nonatomic) NSUInteger dog_age;</div><div class="line"></div><div class="line">//ç‹—å…»çš„çŒª</div><div class="line">@property (strong, nonatomic) Pig *dog_pig;</div></pre></td></tr></table></figure></p>
<p>â€”å®ç°æ–¹æ³•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (NSDictionary *)dict_CMModelWithClass &#123;</div><div class="line">    return @&#123;</div><div class="line">             @&quot;dog_age&quot; : @&quot;age&quot;,</div><div class="line">             @&quot;dog_name&quot; : @&quot;name&quot;,</div><div class="line">             @&quot;dog_pig&quot; : @&quot;dog_pig&quot;</div><div class="line">             &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Pig(çŒª)</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">@property (strong, nonatomic) NSString *pig_name;</div><div class="line">@property (assign, nonatomic) NSUInteger pig_age;</div></pre></td></tr></table></figure></p>
<p>â€”å®ç°æ–¹æ³•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (NSDictionary *)dict_CMModelWithClass &#123;</div><div class="line">    return @&#123;</div><div class="line">             @&quot;pig_age&quot; : @&quot;age&quot;,</div><div class="line">             @&quot;pig_name&quot; : @&quot;name&quot;</div><div class="line">             &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>è°ƒç”¨æ–¹æ³•</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSString *testJSON = @&quot;&#123;\&quot;dog\&quot;:[&#123;\&quot;name\&quot;:\&quot;dog_1\&quot;,\&quot;age\&quot;:15,\&quot;dog_pig\&quot;:&#123;\&quot;name\&quot;:\&quot;dogAndPig1\&quot;,\&quot;age\&quot;:666&#125;&#125;,&#123;\&quot;name\&quot;:\&quot;dog_2\&quot;,\&quot;age\&quot;:null,\&quot;dog_pig\&quot;:null&#125;],\&quot;pig\&quot;:[&#123;\&quot;name\&quot;:\&quot;pig_1\&quot;,\&quot;age\&quot;:10&#125;,&#123;\&quot;name\&quot;:\&quot;pig_2\&quot;,\&quot;age\&quot;:12&#125;]&#125;&quot;;</div><div class="line"></div><div class="line">Animals *animals = [[Animals alloc] cm_initWithJSONString:testJSON];</div></pre></td></tr></table></figure></p>
<p>#å†™åœ¨åé¢çš„è¯<br>è¿™ä¸ªé¡¹ç›®å¹¶ä¸å®Œå–„ï¼Œæ¯”å¦‚è¯´å¯¹äºå…¶ä¸­æ—¥æœŸçš„æ ¼å¼åŒ–ï¼Œéç©ºçš„ä¸€äº›åˆ¤æ–­ç­‰ï¼Œå…¶ä¸­ä¹Ÿæœ‰ä¸€äº›bugï¼Œæœ¬æ–‡æƒå½“æ˜¯æŠ›ç –å¼•ç‰ï¼Œåˆ©ç”¨<code>Runtime</code>å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œæ¯”å¦‚ä½ å¯ä»¥å®ç°ï¼Œä¸€å¥è¯å®Œæˆå½’æ¡£ä¸è§£å½’æ¡£ï¼Œä¸ä¼šå†å‡ºç°Modelå±æ€§è¿‡å¤šæ—¶é‡å†™<code>initWithCoder</code>å’Œ<code>encodeWithCoder</code>çš„å°´å°¬äº†ï¼Œsoï¼Œæœ‰æ—¶å€™æˆ‘ä»¬æ›´ç¼ºçš„æ˜¯ä¸€ç§æ€è€ƒé—®é¢˜çš„æ–¹å¼ï¼Œå…±å‹‰ï¼</p>
<p>PSï¼šæ¬¢è¿æ¥æˆ‘çš„ç®€ä¹¦ã€Githubã€ä¸ªäººåšå®¢äº¤æµğŸ˜„</p>
<blockquote>
<p><a href="https://github.com/jiachenmu/JSONTOModel" target="_blank" rel="external">æ–‡ä¸­çš„Demoä¸‹è½½åœ°å€</a></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CMModel-JSONè½¬Modelå·¥å…·/">CMModel JSONè½¬Modelå·¥å…·</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-iOS-Reactive-Cocoaä½¿ç”¨æµ…æ" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/04/iOS-Reactive-Cocoaä½¿ç”¨æµ…æ/" class="article-date">
      <time datetime="2016-07-04T01:34:44.000Z" itemprop="datePublished">2016-07-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/04/iOS-Reactive-Cocoaä½¿ç”¨æµ…æ/">iOS Reactive Cocoaä½¿ç”¨æµ…æ</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="iOS-Reactive-Cocoaä½¿ç”¨æµ…æ"><a href="#iOS-Reactive-Cocoaä½¿ç”¨æµ…æ" class="headerlink" title="iOS Reactive Cocoaä½¿ç”¨æµ…æ"></a>iOS Reactive Cocoaä½¿ç”¨æµ…æ</h1><p>æ ‡ç­¾ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ï¼š ReactiveCocoaç®€å•ä½¿ç”¨</p>
<hr>
<p>##<strong>ç›®å½•ï¼š</strong></p>
<p>[TOC]</p>
<p>##Reactive Cocoaæµ…æ</p>
<blockquote>
<p>ReactiveCocoaæ˜¯å“åº”å¼ç¼–ç¨‹(FRP)åœ¨IOSä¸­çš„ä¸€ä¸ªå®ç°æ¡†æ¶,<a href="https://github.com/ReactiveCocoa/ReactiveCocoa" target="_blank" rel="external">Githubåœ°å€</a></p>
</blockquote>
<p>###1.ä»€ä¹ˆæ˜¯å“åº”å¼ç¼–ç¨‹<br>æ¨èä¸€ä¸ªç½‘å€<a href="http://www.tuicool.com/articles/BBNRRf" target="_blank" rel="external">å“åº”å¼ç¼–ç¨‹ï¼ˆReactive Programmingï¼‰ä»‹ç»</a>,å¦‚æœä¸å¤ªæ¸…æ¥šï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆæ¥äº†è§£ä¸€ä¸‹å…¶ä»–çš„ç¼–ç¨‹æ€æƒ³</p>
<p>####1.é¢å‘è¿‡ç¨‹ï¼š</p>
<blockquote>
<p>â€œé¢å‘è¿‡ç¨‹â€(Procedure Oriented)æ˜¯ä¸€ç§ä»¥è¿‡ç¨‹ä¸ºä¸­å¿ƒçš„ç¼–ç¨‹æ€æƒ³ã€‚â€œé¢å‘è¿‡ç¨‹â€ä¹Ÿå¯ç§°ä¹‹ä¸ºâ€œé¢å‘è®°å½•â€ç¼–ç¨‹æ€æƒ³ï¼Œä»–ä»¬ä¸æ”¯æŒä¸°å¯Œçš„â€œé¢å‘å¯¹è±¡â€ç‰¹æ€§ï¼ˆæ¯”å¦‚ç»§æ‰¿ã€å¤šæ€ï¼‰ï¼Œå¹¶ä¸”å®ƒä»¬ä¸å…è®¸æ··åˆæŒä¹…åŒ–çŠ¶æ€å’ŒåŸŸé€»è¾‘ã€‚</p>
</blockquote>
<p>Cè¯­è¨€å°±æ˜¯ä¸€é—¨é¢å‘è¿‡ç¨‹çš„è¯­è¨€ã€‚</p>
<p>####2.é¢å‘å¯¹è±¡</p>
<blockquote>
<p>é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆObject-Oriented Languageï¼‰æ˜¯ä¸€ç±»ä»¥å¯¹è±¡ä½œä¸ºåŸºæœ¬ç¨‹åºç»“æ„å•ä½çš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼ŒæŒ‡ç”¨äºæè¿°çš„è®¾è®¡æ˜¯ä»¥å¯¹è±¡ä¸ºæ ¸å¿ƒï¼Œè€Œå¯¹è±¡æ˜¯ç¨‹åºè¿è¡Œæ—¶åˆ»çš„åŸºæœ¬æˆåˆ†ã€‚è¯­è¨€ä¸­æä¾›äº†ç±»ã€ç»§æ‰¿ç­‰æˆåˆ†ã€‚</p>
<p>ä¸‡ç‰©çš†å¯¹è±¡</p>
</blockquote>
<p>å…¸å‹çš„é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€æœ‰C++,C#,Javaç­‰ </p>
<p>####3.é“¾å¼ç¼–ç¨‹</p>
<blockquote>
<p>æ˜¯å°†å¤šä¸ªæ“ä½œï¼ˆå¤šè¡Œä»£ç ï¼‰é€šè¿‡ç‚¹å·(.)é“¾æ¥åœ¨ä¸€èµ·æˆä¸ºä¸€å¥ä»£ç ,ä½¿ä»£ç å¯è¯»æ€§å¥½<br>åœ¨<code>Objective-C</code>ä¸­çš„å½¢å¼ç±»ä¼¼äºä¸‹é¢è¿™ç§å½¢å¼</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Person *per = [[Person allo] init];</div><div class="line">per.eat().drink().sleep();</div></pre></td></tr></table></figure>
<p><strong>ç”¨ä¸€ä¸ª<a href="https://github.com/jiachenmu/ReactiveCocoaDemo" target="_blank" rel="external">è®¡ç®—å™¨Demo</a>æ¥ç®€å•è¯´æ˜ä»€ä¹ˆæ˜¯é“¾å¼ç¼–ç¨‹</strong><br>è¿™æ˜¯æˆ‘å†™çš„ä¸€ä¸ªéå¸¸ç®€å•çš„è®¡ç®—å™¨<br><strong>Calculator.h</strong>æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line"></div><div class="line">@class Calculator;</div><div class="line">typedef Calculator *(^CalculatorBlock)(double num);</div><div class="line"></div><div class="line">@interface Calculator : NSObject</div><div class="line"></div><div class="line">+ (instancetype)opeartionNum:(double)num;</div><div class="line"></div><div class="line">@property (assign, nonatomic) double opeartionNum;</div><div class="line"></div><div class="line">//åŠ --å‡--ä¹˜--é™¤</div><div class="line"></div><div class="line">@property (copy, nonatomic) CalculatorBlock add;</div><div class="line">@property (copy, nonatomic) CalculatorBlock reduce;</div><div class="line">@property (copy, nonatomic) CalculatorBlock multiply;</div><div class="line">@property (copy, nonatomic) CalculatorBlock divide;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure></p>
<p><strong>Calculator.m</strong>æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">#import &quot;Calculator.h&quot;</div><div class="line"></div><div class="line">@implementation Calculator</div><div class="line"></div><div class="line">- (instancetype)init</div><div class="line">&#123;</div><div class="line">    self = [super init];</div><div class="line">    if (self) &#123;</div><div class="line">        [self buildBlock];</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (instancetype)opeartionNum:(double)num &#123;</div><div class="line">    Calculator *calu = [[Calculator alloc] init];</div><div class="line">    calu.opeartionNum = num;</div><div class="line">    </div><div class="line">    return calu;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)buildBlock &#123;</div><div class="line">    __weak typeof(self) weakSelf = self;</div><div class="line">    _add = ^Calculator *(double num)&#123;</div><div class="line">        weakSelf.opeartionNum += num;</div><div class="line">        return weakSelf;</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line">    _reduce = ^Calculator *(double num)&#123;</div><div class="line">        weakSelf.opeartionNum -= num;</div><div class="line">        return weakSelf;</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line">    _multiply = ^Calculator *(double num)&#123;</div><div class="line">        weakSelf.opeartionNum *= num;</div><div class="line">        return weakSelf;</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line">    _divide = ^Calculator *(double num)&#123;</div><div class="line">        //é™¤æ•°ä¸º0 ä¸ä½œå¤„ç†</div><div class="line">        weakSelf.opeartionNum = _opeartionNum / (num == 0 ? 1 : num);</div><div class="line">        return weakSelf;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªDemoéå¸¸ç®€å•ï¼Œè¯´çš„åªæ˜¯é“¾å¼ç¼–ç¨‹çš„ä¸€ä¸ªæ€æƒ³,ä»ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>åŠ </code> <code>å‡</code> <code>ä¹˜</code> <code>é™¤</code>å››ä¸ªBlockï¼Œè¿”å›çš„å‡æ˜¯å½“å‰å¯¹è±¡ï¼Œ<br>æˆ‘ä»¬æ€ä¹ˆä½¿ç”¨å‘¢<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//å¼€å§‹è®¡ç®—</div><div class="line">    Calculator *calu = [Calculator opeartionNum:10.00];</div><div class="line">    calu.add(2).reduce(2).multiply(2).divide(0);</div><div class="line">    //è¾“å‡ºç»“æœ</div><div class="line">    NSLog(@&quot;result : %f&quot;,calu.opeartionNum);</div></pre></td></tr></table></figure></p>
<p>####3.å“åº”å¼ç¼–ç¨‹<br>æˆ‘ä»¬å…ˆçœ‹çœ‹<strong>KVO</strong>(Key-Value Observing),ç›´è¯‘è¿‡æ¥ä¹Ÿå°±æ˜¯é”®å€¼è§‚å¯Ÿè€…æ¨¡å¼ï¼Œç›‘å¬æŸä¸ªå±æ€§çš„å˜åŒ–ï¼Œæ¯æ¬¡æŒ‡å®šçš„è¢«è§‚å¯Ÿçš„å¯¹è±¡çš„å±æ€§è¢«ä¿®æ”¹åï¼ŒKVOå°±ä¼šè‡ªåŠ¨é€šçŸ¥ç›¸åº”çš„è§‚å¯Ÿè€…äº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//æ³¨å†Œè§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿçš„å±æ€§è·¯å¾„</div><div class="line">[xiaoming addObserver:self forKeyPath:@&quot;age&quot; options: NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld context:nil];</div><div class="line"></div><div class="line">//æ¥å—å±æ€§å˜åŒ–çš„æ¶ˆæ¯</div><div class="line">- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context</div><div class="line"> &#123;</div><div class="line">     if ([keyPath isEqualToString:@&quot;age&quot;] &amp;&amp; object == xiaoming) &#123;</div><div class="line">        NSLog(@&quot;å°æ˜çš„å¹´é¾„å‘ç”Ÿå˜åŒ–&quot;);</div><div class="line">     &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>æ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸‹iOSä¸­ä¸€ä¸ªå“åº”å¼ç¼–ç¨‹æ¡†æ¶<strong>ReactiveCocoa</strong><br>å…³äºå“åº”å¼ç¼–ç¨‹çš„æ¦‚å¿µï¼Œæˆ‘æ¨èçœ‹çœ‹ä¸Šé¢æ¨èçš„é‚£ç¯‡å¸–å­<a href="http://www.tuicool.com/articles/BBNRRf" target="_blank" rel="external">å“åº”å¼ç¼–ç¨‹ï¼ˆReactive Programmingï¼‰ä»‹ç»</a>ï¼Œä¸¾çš„ä¾‹å­æ˜¯<code>RxJS</code>ï¼Œä¸è¿‡æ•´ä½“çš„æ¦‚å¿µä¸<code>ReactiveCocoa</code>æ— å¼‚ï¼Œå¸æ”¶æ€æƒ³å³å¯ã€‚</p>
<hr>
<h2 id="2-ReactiveCocoaå“åº”å¼ç¼–ç¨‹æ¡†æ¶"><a href="#2-ReactiveCocoaå“åº”å¼ç¼–ç¨‹æ¡†æ¶" class="headerlink" title="###2.ReactiveCocoaå“åº”å¼ç¼–ç¨‹æ¡†æ¶"></a>###2.ReactiveCocoaå“åº”å¼ç¼–ç¨‹æ¡†æ¶</h2><p><code>ReactiveCocoa</code>ä¸­å¸¸ç”¨åˆ°çš„æ˜¯<code>RACSignal</code>,<code>RACSignal</code>ç»§æ‰¿è‡ª<code>RACStream</code>,<code>Stream</code>è¿™ä¸ªæ¦‚å¿µï¼Œç›´è¯‘è¿‡æ¥ä¹Ÿå°±æ˜¯<code>äº‹ä»¶æµ</code>çš„æ„æ€ï¼Œé‚£ä½•ä¸º<code>æ•°æ®æµ</code>ï¼Œäº‹ä»¶æµå°±æ˜¯ä¸€ä¸ªæŒ‰æ—¶é—´æ’åºçš„Eventsåºåˆ—ï¼Œåœ¨è¿™é‡Œå¼•ç”¨<a href="http://www.tuicool.com/articles/BBNRRf" target="_blank" rel="external">å“åº”å¼ç¼–ç¨‹ï¼ˆReactive Programmingï¼‰ä»‹ç»</a>å…¶ä¸­çš„ä»‹ç»ï¼Œ<br><strong>å“åº”å¼ç¼–ç¨‹ä½¿ç”¨å¼‚æ­¥æ•°æ®æµè¿›è¡Œç¼–ç¨‹</strong><br>ä¸¾ä¸ªé€šä¿—çš„ä¾‹å­è¯´æ˜äº‹ä»¶æµï¼š<strong>å¦‚ä½•æŠŠå¤§è±¡å¡è¿›å†°ç®±ï¼Ÿ</strong></p>
<blockquote>
<ol>
<li>æ‰“å¼€å†°ç®±é—¨</li>
<li>æŠŠå¤§è±¡å¡è¿›å†°ç®±</li>
<li>å…³ä¸Šå†°ç®±é—¨</li>
</ol>
</blockquote>
<p>ä¸Šè¿°ä¸‰ä¸ªæ­¥éª¤ç»„åˆèµ·æ¥å°±æˆä¸ºä¸€ä¸ªæŒ‰æ—¶é—´æ’åºçš„æ—¶é—´åºåˆ—ï¼Œå³<code>äº‹ä»¶æµ</code></p>
<hr>
<p>####1.<code>ReactiveCocoa</code>çš„æ ¸å¿ƒæ–¹æ³•</p>
<hr>
<p>æ‰“å¼€<code>RACStream</code>å¯ä»¥çœ‹åˆ°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// Lazily binds a block to the values in the receiver.</div><div class="line">///</div><div class="line">/// This should only be used if you need to terminate the bind early, or close</div><div class="line">/// over some state. -flattenMap: is more appropriate for all other cases.</div><div class="line">///</div><div class="line">/// block - A block returning a RACStreamBindBlock. This block will be invoked</div><div class="line">///         each time the bound stream is re-evaluated. This block must not be</div><div class="line">///         nil or return nil.</div><div class="line">///</div><div class="line">/// Returns a new stream which represents the combined result of all lazy</div><div class="line">/// applications of `block`.</div><div class="line"></div><div class="line">- (instancetype)bind:(RACStreamBindBlock (^)(void))block;</div></pre></td></tr></table></figure></p>
<p>å…³äºå…¶ä¸­å„ä¸ªå±æ€§çš„æ„æ€ï¼Œå¯ä»¥çœ‹<a href="http://mobile.51cto.com/news-494321.htm" target="_blank" rel="external">RACStreamBindBlockä»‹ç»å’Œä½¿ç”¨</a>ï¼Œå…¶ä¸­å¯¹äºå„ä¸ªå±æ€§æœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œ<code>bind</code>è¿™ä¸ªæ€æƒ³ç†è§£å³å¯ï¼Œ<code>RAC</code>å·²ç»å°è£…äº†å¾ˆå¤šæ›´æ–¹ä¾¿çš„æ–¹æ³•ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚</p>
<hr>
<p>####2.<code>ReactiveCocoa</code>çš„æ•´ä½“ç»“æ„ä»‹ç»</p>
<hr>
<p><strong><code>ReactiveCocoa</code>æ•´ä½“å¯ä»¥åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†</strong></p>
<ol>
<li>ä¿¡å·æº(äº‹ä»¶æµ)    <code>RACStream</code>      </li>
<li>è®¢é˜…è€…    <code>RACSubscriber</code></li>
<li>è°ƒåº¦å™¨    <code>RACScheduler</code></li>
<li>æ¸…æ´å·¥    <code>RACDisposable</code></li>
</ol>
<hr>
<p>#####1.ä¿¡å·æº(äº‹ä»¶æµ)    <code>RACStream</code><br>ä¸¾ä¸ªä¾‹å­ï¼šåœ¨ä¸€ä¸ªå…·æœ‰å¤šé‡UIçŠ¶æ€çš„ç•Œé¢ä¸­ï¼Œæˆ‘ä»¬è¦å®ç°ä¸€ä¸‹å‡ ä¸ªåŠŸèƒ½</p>
<ul>
<li>1 ç”¨æˆ·åå’Œå¯†ç è¾“å…¥æ¡†å­—æ•°è¶…è¿‡é™åˆ¶æ—¶æ”¹å˜è¾“å…¥æ¡†èƒŒæ™¯é¢œè‰²</li>
<li>2 ç”¨æˆ·åå’Œå¯†ç æ— æ•ˆå’Œæœ‰æ•ˆæ—¶ç™»å½•æŒ‰é’®çš„èƒŒæ™¯é¢œè‰²è®¾ç½®</li>
</ul>
<hr>
<p><strong>æ‹¿ç¬¬ä¸€ä¸ªé—®é¢˜å½“åšä¾‹å­</strong><br>æˆ‘ä»¬å¹³æ—¶æ€ä¹ˆå®ç°çš„å‘¢ï¼Œæ— éå°±æ˜¯ç»§æ‰¿<code>UITextFieldDelegate</code>ï¼Œåœ¨ä»£ç†ä¸­åˆ¤æ–­è¾“å…¥æ¡†ä¸­çš„æ–‡å­—ä¸ªæ•°æ˜¯å¦è¶…è¿‡é™åˆ¶ï¼Œç„¶åæ”¹å˜èƒŒæ™¯é¢œè‰²ï¼Œäº¦æˆ–ç”¨KVOå®ç°ï¼Œè¿™æ ·åšæ— å¯åšéï¼Œä½†æ˜¯æ¨¡æ¿åŒ–è¿‡äºä¸¥é‡ï¼Œæˆ‘ä»¬æƒ³åšè¿™ä¸ªåŠŸèƒ½ï¼Œéœ€è¦å£°æ˜ä»£ç†ï¼Œå®ç°ä»£ç†æ–¹æ³•ï¼ŒåŒæ—¶ä»£ç†æ–¹æ³•ä¸­è¿˜éœ€è¦åˆ¤æ–­<code>delegate</code>ä¸­çš„<code>textfield</code>æ˜¯ç”¨æˆ·åè¾“å…¥æ¡†è¿˜æ˜¯å¯†ç è¾“å…¥æ¡†ï¼Œè¿™æ ·åšä¸ä»…ä»£ç ä¸ä»…å†—é•¿ï¼Œè€Œä¸”ä¼šé€ æˆä»£ç ä¸æ˜“æŸ¥çœ‹ã€‚<br><strong>é‚£ä¹ˆåœ¨RACä¸­æˆ‘ä»¬æ€ä¹ˆåšå‘¢ï¼Œçœ‹ä»£ç </strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> //å°†ViewModelä¸­çš„å±æ€§å’Œæ§ä»¶ä¸­çš„å±æ€§ç»‘å®šåˆ°ä¸€èµ·</div><div class="line">RAC(_userViewModel,userName) = [_userNameFeild rac_textSignal];</div><div class="line">RAC(_userNameFeild,backgroundColor) = [_userNameFeild.rac_textSignal  </div><div class="line">map:^id(NSString *password) &#123;</div><div class="line">        return weakSelf.userViewModel.isUserNameValid ? [UIColor whiteColor] : [UIColor redColor];</div><div class="line">    &#125;];</div></pre></td></tr></table></figure></p>
<hr>
<p>Tips_1: è¿™ä¸€éƒ¨åˆ†æˆ‘ä»¬å¯ä»¥é…åˆ<code>MVVM</code>è®¾è®¡æ¨¡å¼ä½¿ç”¨ï¼Œå°†ViewModelä¸æ§ä»¶ç»‘å®šåˆ°ä¸€èµ·ï¼Œå‡è½»<code>ViewController</code>çš„è´Ÿæ‹…ã€‚<br>å…·ä½“è¿™ä¸€éƒ¨åˆ†çš„Demoå¯ä»¥æŸ¥çœ‹æ–‡æœ«çš„Githubé“¾æ¥ï¼Œåªæ˜¯ä¸€ä¸ªç®€å•ä½¿ç”¨<br>Tips_2: ç”±ä¸Šå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŸä¸ªåŠŸèƒ½çš„ä»£ç å†™çš„æ›´åŠ é›†ä¸­ï¼Œæ›´åŠ æ–¹ä¾¿é˜…è¯»å’Œç»´æŠ¤</p>
<hr>
<p>#####2.è®¢é˜…è€… <code>RACSubscriber</code><br>åœ¨æ•´ä¸ª<code>RAC</code>ä¸­ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šéƒ½æ˜¯é‡‡ç”¨<code>ä¿¡å·æº-è®¢é˜…è€…</code>çš„è¿™ç§æ¨¡å¼æ¥ä½¿ç”¨<code>RAC</code>,ä¸ºäº†è·å–åˆ°ä¿¡å·æºä¸­çš„valueï¼Œæˆ‘ä»¬éœ€è¦è®¢é˜…è¿™ä¸ªä¿¡å·æºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[_userNameFeild.rac_textSignal subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;%@&quot;,x);</div><div class="line">    &#125;];</div></pre></td></tr></table></figure></p>
<p>Tips: æˆ‘ä»¬æŸ¥çœ‹æºä»£ç å¯ä»¥å‘ç°<code>_userNameFeild.rac_textSignal</code>å®ç°è¿‡ç¨‹å°±æ˜¯ç›‘å¬æ‰€æœ‰çš„<code>UIControlEventAllEditingEvents</code>äº‹ä»¶ï¼Œç„¶åå‘å‡ºä¿¡å·ï¼Œç„¶åæˆ‘ä»¬è®¢é˜…è¿™ä¸ªä¿¡å·æºï¼Œå¯ä»¥è·å–åˆ°å…¶ä¸­çš„å€¼<code>x</code>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">- (RACSignal *)rac_textSignal &#123;</div><div class="line">	@weakify(self);</div><div class="line">	return [[[[[RACSignal</div><div class="line">		defer:^&#123;</div><div class="line">			@strongify(self);</div><div class="line">			return [RACSignal return:self];</div><div class="line">		&#125;]</div><div class="line">		concat:[self rac_signalForControlEvents:UIControlEventAllEditingEvents]]</div><div class="line">		map:^(UITextField *x) &#123;</div><div class="line">			return x.text;</div><div class="line">		&#125;]</div><div class="line">		takeUntil:self.rac_willDeallocSignal]</div><div class="line">		setNameWithFormat:@&quot;%@ -rac_textSignal&quot;, RACDescription(self)];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å¥½äº†ï¼Œä¸Šé¢è®²äº†é‚£ä¹ˆå¤šç†è®ºçŸ¥è¯†ï¼Œå…·ä½“å¦‚ä½•ä½¿ç”¨è¯·çœ‹ä¸‹é¢</p>
<hr>
<p>#####3.è°ƒåº¦å™¨<code>RACSubscriber</code> å’Œ æ¸…æ´å·¥<code>RACDisposable</code></p>
<ul>
<li>1 è°ƒåº¦å™¨RACSubscriberï¼Œè¿™ä¸€éƒ¨åˆ†æ˜¯ä½¿ç”¨GCDçš„ä¸²è¡Œé˜Ÿåˆ—æ¥å®ç°çš„ï¼Œæ–‡æœ«Githubé“¾æ¥ä¸­æœ‰å¯¹å…¶çš„ç®€å•ä½¿ç”¨</li>
<li><p>2 æ¸…æ´å·¥RACDisposable</p>
<blockquote>
<p><code>RACDisposable</code> åœ¨ <code>ReactiveCocoa</code> ä¸­å°±å……å½“ç€æ¸…æ´å·¥çš„è§’è‰²ï¼Œå®ƒå°è£…äº†å–æ¶ˆå’Œæ¸…ç†ä¸€æ¬¡è®¢é˜…æ‰€å¿…éœ€çš„å·¥ä½œã€‚å®ƒæœ‰ä¸€ä¸ªæ ¸å¿ƒçš„æ–¹æ³• <code>-dispose</code> ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•å°±ä¼šæ‰§è¡Œç›¸åº”çš„æ¸…ç†å·¥ä½œï¼Œè¿™æœ‰ç‚¹ç±»ä¼¼äº <code>NSObject</code> çš„ <code>-dealloc</code> æ–¹æ³•ã€‚</p>
</blockquote>
<p>:æˆ‘ä»¬ä¸Šé¢ä½¿ç”¨<code>subscribeNext:^(id x) {}</code>è¿™ä¸ªæ–¹æ³•è®¢é˜…ä¿¡å·æºè¿›è¡Œå¤„ç†ä¹‹åä¼šç”Ÿæˆä¸€ä¸ªæ¸…æ´å·¥<code>RACDisposable</code>,æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨çš„è°ƒç”¨<code>dispose</code>æ–¹æ³•æ¥è¿›è¡Œæ¸…ç†å·¥ä½œã€‚</p>
</li>
</ul>
<hr>
<h2 id="Reactive-Cocoaä½¿ç”¨"><a href="#Reactive-Cocoaä½¿ç”¨" class="headerlink" title="##Reactive Cocoaä½¿ç”¨"></a>##Reactive Cocoaä½¿ç”¨</h2><p>###* 1 RACå‘é€æ¶ˆæ¯,å¹¶ä¸”ç»‘å®šåˆ°æ§ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (void)racSenderMessage &#123;</div><div class="line">    //å»¶è¿Ÿ2.0S å‘é€&quot;å‘µå‘µå“’~&quot;æ¶ˆæ¯</div><div class="line">    RACSignal *signal = [[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;å‘µå‘µå“’~&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        return nil;</div><div class="line">    &#125;] delay:2.0];</div><div class="line">    //å°†_userNameFeildçš„`text`å±æ€§ä¸æ˜ å°„åçš„ä¿¡å·é‡çš„å€¼ç»‘å®šåˆ°ä¸€èµ·</div><div class="line">    RAC(_userNameFeild,text) = [signal map:^id(NSString *value) &#123;</div><div class="line">        if ([value isEqualToString:@&quot;å‘µå‘µå“’~&quot;]) &#123;</div><div class="line">            return @&quot;ä¹ˆä¹ˆå“’~&quot;;</div><div class="line">        &#125;</div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 2 RACä»£ç†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (void)racProtocol &#123;</div><div class="line">    RACSignal *programmerSignal = [self rac_signalForSelector:@selector(whoAmI) fromProtocol:@protocol(Programmer)];</div><div class="line">    </div><div class="line">    [programmerSignal subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;RACé€šçŸ¥------I&apos;m a great programmer...&quot;);</div><div class="line">    &#125;];</div><div class="line">    @weakify(self);</div><div class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">        [self_weak_ whoAmI];</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)whoAmI &#123;</div><div class="line">    NSLog(@&quot;whoAmI------my name is %@&quot;,_user.userName);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 3 RACé€šçŸ¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (void)racNotification &#123;</div><div class="line">    //æ¥å—é€šçŸ¥å¹¶ä¸”å¤„ç†</div><div class="line">    [[[NSNotificationCenter defaultCenter] rac_addObserverForName:@&quot;RAC_Notifaciotn&quot; object:nil] subscribeNext:^(NSNotification *notify) &#123;</div><div class="line">        NSLog(@&quot;notify.content = %@&quot;,notify.userInfo[@&quot;content&quot;]);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //å‘å‡ºé€šçŸ¥</div><div class="line">    [[NSNotificationCenter defaultCenter] postNotificationName:@&quot;RAC_Notifaciotn&quot; object:nil userInfo:@&#123;@&quot;content&quot; : @&quot;i&apos;m a notification&quot;&#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 4 RACä¿¡å·æ‹¼æ¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">- (void)racSignalLink &#123;</div><div class="line">    RACSignal *signal1 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@(1)];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    RACSignal *signal2 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@(2)];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        </div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    [[signal1 concat:signal2] subscribeNext:^(NSNumber *value) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·æ‹¼æ¥------value = %@&quot;,value);</div><div class="line">    &#125;];;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">2016-07-02 14:34:16.148 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·æ‹¼æ¥------value = 1</div><div class="line">2016-07-02 14:34:16.148 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·æ‹¼æ¥------value = 2</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 5 RACä¿¡å·åˆå¹¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">- (void)racSignalMerge &#123;</div><div class="line">    RACSignal *signal1 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;æ¸…çº¯å¦¹å­&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    RACSignal *signal2 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;æ€§æ„Ÿå¦¹å­&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        </div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    [[signal1 merge:signal2] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·åˆå¹¶------æˆ‘å–œæ¬¢ï¼š %@&quot;,x);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">2016-07-02 14:34:16.149 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·åˆå¹¶------æˆ‘å–œæ¬¢ï¼š æ¸…çº¯å¦¹å­</div><div class="line">2016-07-02 14:34:16.149 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·åˆå¹¶------æˆ‘å–œæ¬¢ï¼š æ€§æ„Ÿå¦¹å­</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 6 RACä¿¡å·ç»„åˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">- (void)racSignalCombine &#123;</div><div class="line">    RACSignal *signal1 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;å¹´è½»&quot;];</div><div class="line">        [subscriber sendNext:@&quot;æ¸…çº¯&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    RACSignal *signal2 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;æ¸©æŸ”&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        </div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //combineLatest å°†æ•°ç»„ä¸­çš„ä¿¡å·é‡å‘å‡ºçš„æœ€åä¸€ä¸ªobject ç»„åˆåˆ°ä¸€èµ·</div><div class="line">    [[RACSignal combineLatest:@[signal1, signal2]] subscribeNext:^(RACTuple *x) &#123;</div><div class="line">        //å…ˆè¿›è¡Œè§£åŒ…</div><div class="line">        RACTupleUnpack(NSString *signal1_Str, NSString *signal2_Str) = x;</div><div class="line">        NSLog(@&quot;RACä¿¡å·ç»„åˆ------æˆ‘å–œæ¬¢ %@çš„ %@çš„ å¦¹å­&quot;,signal1_Str,signal2_Str);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //ä¼šæ³¨æ„æ”¶åˆ° ç»„åˆæ–¹æ³•åè¿˜å¯ä»¥è·Ÿä¸€ä¸ªBlock  /** + (RACSignal *)combineLatest:(id&lt;NSFastEnumeration&gt;)signals reduce:(id (^)())reduceBlock */</div><div class="line">    /*</div><div class="line">     reduceè¿™ä¸ªBlockå¯ä»¥å¯¹ç»„åˆåçš„ä¿¡å·é‡åšå¤„ç†</div><div class="line">     */</div><div class="line">    //æˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·ä½¿ç”¨</div><div class="line">    [[RACSignal combineLatest:@[signal1, signal2] reduce:^(NSString *signal1_Str, NSString *signal2_Str)&#123;</div><div class="line">        return [signal1_Str stringByAppendingString:signal2_Str];</div><div class="line">    &#125;] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·ç»„åˆ(Reduceå¤„ç†)------æˆ‘å–œæ¬¢ %@ çš„å¦¹å­&quot;,x);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">2016-07-02 14:34:16.149 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·åˆå¹¶------æˆ‘å–œæ¬¢ï¼š æ€§æ„Ÿå¦¹å­</div><div class="line">2016-07-02 14:34:16.150 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·ç»„åˆ------æˆ‘å–œæ¬¢ æ¸…çº¯çš„ æ¸©æŸ”çš„ å¦¹å­</div><div class="line">2016-07-02 14:34:16.150 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·ç»„åˆ(Reduceå¤„ç†)------æˆ‘å–œæ¬¢ æ¸…çº¯æ¸©æŸ” çš„å¦¹å­</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 7 RACä¿¡å·ç»„åˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">- (void)racSignalZIP &#123;</div><div class="line">    RACSignal *signal1 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;å¹´è½»&quot;];</div><div class="line">        [subscriber sendNext:@&quot;æ¸…çº¯&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    RACSignal *signal2 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;æ¸©æŸ”&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        </div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //zip é»˜è®¤ä¼šå–ä¿¡å·é‡çš„æœ€å¼€å§‹å‘é€çš„å¯¹è±¡ æ‰€ä»¥ç»“æœä¼šæ˜¯ å¹´è½» ã€æ¸©æŸ”</div><div class="line">    [[RACSignal zip:@[signal1,signal2]] subscribeNext:^(RACTuple *x) &#123;</div><div class="line">        RACTupleUnpack(NSString *signal1_Str1,NSString *signal2_Str) = x;</div><div class="line">        NSLog(@&quot;RACä¿¡å·å‹ç¼©------æˆ‘å–œæ¬¢ %@çš„ %@çš„ å¦¹å­&quot;,signal1_Str1, signal2_Str);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">2016-07-02 14:34:16.151 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·å‹ç¼©------æˆ‘å–œæ¬¢ å¹´è½»çš„ æ¸©æŸ”çš„ å¦¹å­</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 8 RACä¿¡å·è¿‡æ»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">- (void)racSignalFilter &#123;</div><div class="line">    //ä¿¡å·è¿‡æ»¤å¯ä»¥å‚è€ƒä¸Šé¢UIButtonå¼•ç”¨RACçš„å®ä¾‹</div><div class="line">    [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@(19)];</div><div class="line">        [subscriber sendNext:@(12)];</div><div class="line">        [subscriber sendNext:@(20)];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        </div><div class="line">        return nil;</div><div class="line">    &#125;] filter:^BOOL(NSNumber *value) &#123;</div><div class="line">        if (value.integerValue &lt; 18) &#123;</div><div class="line">            //18ç¦</div><div class="line">            NSLog(@&quot;RACä¿¡å·è¿‡æ»¤------FBI Warning~&quot;);</div><div class="line">        &#125;</div><div class="line">        return value.integerValue &gt; 18;</div><div class="line">    &#125;]</div><div class="line">      subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·è¿‡æ»¤------å¹´é¾„ï¼š%@&quot;,x);</div><div class="line">   &#125;];</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">2016-07-02 14:34:16.151 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·è¿‡æ»¤------å¹´é¾„ï¼š19</div><div class="line">2016-07-02 14:34:16.151 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·è¿‡æ»¤------FBI Warning~</div><div class="line">2016-07-02 14:34:16.152 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·è¿‡æ»¤------å¹´é¾„ï¼š20</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 9 RACä¿¡å·ä¼ é€’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">- (void)racSignalPass &#123;</div><div class="line">    [[[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;è€æ¿å‘æˆ‘æ‰”è¿‡æ¥ä¸€ä¸ªStar&quot;];</div><div class="line">        return nil;</div><div class="line">    &#125;] flattenMap:^RACStream *(NSString *value) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·ä¼ é€’------%@&quot;,value);</div><div class="line">        return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">            [subscriber sendNext:@&quot;æˆ‘å‘è€æ¿æ‰”å›ä¸€å—æ¿ç –&quot;];</div><div class="line">            return nil;</div><div class="line">        &#125;];</div><div class="line">    &#125;] flattenMap:^RACStream *(NSString *value) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·ä¼ é€’------%@&quot;,value);</div><div class="line">        return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">            [subscriber sendNext:@&quot;æˆ‘è·Ÿè€æ¿æ­£é¢åˆš~,ç»“æœå¯æƒ³è€ŒçŸ¥&quot;];</div><div class="line">            return nil;</div><div class="line">        &#125;];</div><div class="line">    &#125;] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·ä¼ é€’------%@&quot;,x);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">2016-07-02 14:34:16.152 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·ä¼ é€’------è€æ¿å‘æˆ‘æ‰”è¿‡æ¥ä¸€ä¸ªStar</div><div class="line">2016-07-02 14:34:16.152 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·ä¼ é€’------æˆ‘å‘è€æ¿æ‰”å›ä¸€å—æ¿ç –</div><div class="line">2016-07-02 14:34:16.152 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·ä¼ é€’------æˆ‘è·Ÿè€æ¿æ­£é¢åˆš~,ç»“æœå¯æƒ³è€ŒçŸ¥</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 10 RACä¿¡å·ä¸²<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//ç”¨é‚£ä¸ªè‘—åçš„è„‘ç­‹æ€¥è½¬å¼¯è¯´æ˜å§ï¼Œâ€œå¦‚ä½•æŠŠå¤§è±¡æ”¾è¿›å†°ç®±é‡Œâ€  ç¬¬ä¸€æ­¥ï¼Œæ‰“å¼€å†°ç®±ï¼›ç¬¬äºŒæ­¥ï¼ŒæŠŠå¤§è±¡æ”¾è¿›å†°ç®±ï¼›ç¬¬ä¸‰æ­¥ï¼Œå…³ä¸Šå†°ç®±é—¨ã€‚</div><div class="line">- (void)racSignalQueue &#123;</div><div class="line">    //ä¸ä¿¡å·ä¼ é€’ç±»ä¼¼ï¼Œä¸è¿‡ä½¿ç”¨ `then` è¡¨æ˜çš„æ˜¯ç§©åºï¼Œæ²¡æœ‰ä¼ é€’value</div><div class="line">    [[[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·ä¸²------æ‰“å¼€å†°ç®±&quot;);</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        return nil;</div><div class="line">    &#125;] then:^RACSignal *&#123;</div><div class="line">        return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">            NSLog(@&quot;RACä¿¡å·ä¸²------æŠŠå¤§è±¡æ”¾è¿›å†°ç®±&quot;);</div><div class="line">            [subscriber sendCompleted];</div><div class="line">            return nil;</div><div class="line">        &#125;];</div><div class="line">    &#125;] then:^RACSignal *&#123;</div><div class="line">        return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">            NSLog(@&quot;RACä¿¡å·ä¸²------å…³ä¸Šå†°ç®±é—¨&quot;);</div><div class="line">            [subscriber sendCompleted];</div><div class="line">            return nil;</div><div class="line">        &#125;];</div><div class="line">    &#125;] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·ä¸²------Over&quot;);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">2016-07-02 17:19:53.812 ReactiveCocoaMVVMDemo[1567:2887515] RACä¿¡å·ä¸²------æ‰“å¼€å†°ç®±</div><div class="line">2016-07-02 17:19:53.812 ReactiveCocoaMVVMDemo[1567:2887515] RACä¿¡å·ä¸²------æŠŠå¤§è±¡æ”¾è¿›å†°ç®±</div><div class="line">2016-07-02 17:19:53.812 ReactiveCocoaMVVMDemo[1567:2887515] RACä¿¡å·ä¸²------å…³ä¸Šå†°ç®±é—¨</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 11 RAC_Commandä»‹ç»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">- (void)racCommandDemo &#123;</div><div class="line">    RACCommand *command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) &#123;</div><div class="line">        return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">            NSLog(@&quot;racCommandDemo------äº²ï¼Œå¸®æˆ‘å¸¦ä»½é¥­~&quot;);</div><div class="line">            [subscriber sendCompleted];</div><div class="line">            return nil;</div><div class="line">        &#125;];</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //å‘½ä»¤æ‰§è¡Œ</div><div class="line">    [command execute:nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">2016-07-02 17:19:53.839 ReactiveCocoaMVVMDemo[1567:2887515] racCommandDemo------äº²ï¼Œå¸®æˆ‘å¸¦ä»½é¥­~</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 12 RACSignal çš„ä¸€äº›ä¿®é¥°ç¬¦<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div></pre></td><td class="code"><pre><div class="line">- (void)racSignalOther &#123;</div><div class="line">    </div><div class="line">    //å»¶è¿Ÿ</div><div class="line">    [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;RACä¿¡å·å»¶è¿Ÿ-----ç­‰ç­‰æˆ‘~ç­‰ç­‰æˆ‘2ç§’&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        return nil;</div><div class="line">    &#125;] delay:2.0] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·å»¶è¿Ÿ-----ç»ˆäºç­‰åˆ°ä½ ~&quot;);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //å®šæ—¶ä»»åŠ¡ï¼Œå¯ä»¥ä»£æ›¿NSTimer,å¯ä»¥çœ‹åˆ°`RACScheduler`ä½¿ç”¨GCDå®ç°çš„</div><div class="line">    [[RACSignal interval:60*60 onScheduler:[RACScheduler mainThreadScheduler]] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;æ¯å°æ—¶åƒä¸€æ¬¡è¯ï¼Œä¸è¦æ”¾å¼ƒæ²»ç–—&quot;);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //è®¾ç½®è¶…æ—¶æ—¶é—´</div><div class="line">    [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">            [subscriber sendNext:@&quot;hh&quot;];</div><div class="line">            [subscriber sendCompleted];</div><div class="line">            return nil;</div><div class="line">        &#125;] delay:4] subscribeNext:^(id x) &#123;</div><div class="line">            NSLog(@&quot;RACè®¾ç½®è¶…æ—¶æ—¶é—´------è¯·æ±‚åˆ°æ•°æ®:%@&quot;,x);</div><div class="line">            [subscriber sendNext:[@&quot;RACè®¾ç½®è¶…æ—¶æ—¶é—´------è¯·æ±‚åˆ°æ•°æ®:&quot; stringByAppendingString:x]];</div><div class="line">            [subscriber sendCompleted];</div><div class="line">        &#125;];</div><div class="line">        </div><div class="line">        return nil;</div><div class="line">    &#125;] timeout:3 onScheduler:[RACScheduler mainThreadScheduler]]</div><div class="line">        subscribeNext:^(id x) &#123;</div><div class="line">            //åœ¨timeoutè§„å®šæ—¶é—´ä¹‹å†…æ¥å—åˆ°ä¿¡å·ï¼Œæ‰ä¼šæ‰§è¡Œè®¢é˜…è€…çš„block</div><div class="line">            //è¿™è¿™é‡Œ3ç§’ä¹‹å†…æ²¡æœ‰æ¥å—åˆ°ä¿¡å·ï¼Œæ‰€æœ‰è¯¥æ¬¡è®¢é˜…å·²å¤±æ•ˆ</div><div class="line">            NSLog(@&quot;è¯·æ±‚åˆ°çš„æ•°æ®:%@&quot;,x);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //è®¾ç½®retryæ¬¡æ•°ï¼Œè¿™éƒ¨åˆ†å¯ä»¥å’Œç½‘ç»œè¯·æ±‚ä¸€èµ·ç”¨</div><div class="line">    __block int retry_idx = 0;</div><div class="line">    [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        if (retry_idx &lt; 3) &#123;</div><div class="line">            retry_idx++;</div><div class="line">            [subscriber sendError:nil];</div><div class="line">        &#125;else &#123;</div><div class="line">            [subscriber sendNext:@&quot;success!&quot;];</div><div class="line">            [subscriber sendCompleted];</div><div class="line">        &#125;</div><div class="line">        return nil;</div><div class="line">    &#125;] retry:3] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;è¯·æ±‚:%@&quot;,x);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //èŠ‚æµé˜€,throttleç§’å†…åªèƒ½é€šè¿‡1ä¸ªæ¶ˆæ¯</div><div class="line">    [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;6&quot;];</div><div class="line">        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">            [subscriber sendNext:@&quot;66&quot;];</div><div class="line">        &#125;);</div><div class="line">        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(3.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">            [subscriber sendNext:@&quot;666&quot;];</div><div class="line">            [subscriber sendCompleted];</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        return nil;</div><div class="line">    &#125;] throttle:2] subscribeNext:^(id x) &#123;</div><div class="line">        //throttle: N   Nç§’ä¹‹å†…åªèƒ½é€šè¿‡ä¸€ä¸ªæ¶ˆæ¯ï¼Œæ‰€ä»¥@&quot;66&quot;æ˜¯ä¸ä¼šè¢«å‘å‡ºçš„</div><div class="line">        NSLog(@&quot;RAC_throttle------result = %@&quot;,x);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //æ¡ä»¶æ§åˆ¶</div><div class="line">    /**</div><div class="line">     è§£é‡Šï¼š`takeUntil:(RACSignal *)signalTrigger` åªæœ‰å½“`signalTrigger`è¿™ä¸ªsignalå‘å‡ºæ¶ˆæ¯æ‰ä¼šåœæ­¢</div><div class="line">     */</div><div class="line">    [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [[RACSignal interval:1.0 onScheduler:[RACScheduler mainThreadScheduler]] subscribeNext:^(id x) &#123;</div><div class="line">            //æ¯ç§’å‘ä¸€ä¸ªæ¶ˆæ¯</div><div class="line">            [subscriber sendNext:@&quot;RAC_Condition------åƒé¥­ä¸­~&quot;];</div><div class="line">        &#125;];</div><div class="line">        return nil;</div><div class="line">    &#125;] takeUntil:[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        //å»¶è¿Ÿ3Så‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œæ‰ä¼šè®©å‰é¢çš„ä¿¡å·åœæ­¢</div><div class="line">        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(5.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">            NSLog(@&quot;RAC_Condition------åƒé¥±äº†~&quot;);</div><div class="line">            [subscriber sendNext:@&quot;åƒé¥±äº†&quot;];</div><div class="line">        &#125;);</div><div class="line">        return nil;</div><div class="line">    &#125;]] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;%@&quot;,x);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//å»¶è¿Ÿ</div><div class="line">2016-07-02 17:36:09.398 ReactiveCocoaMVVMDemo[2040:2898007] RACä¿¡å·å»¶è¿Ÿ-----ç»ˆäºç­‰åˆ°ä½ ~</div><div class="line">//å®šæ—¶ä»»åŠ¡</div><div class="line">2016-07-02 16:36:12.400 ReactiveCocoaMVVMDemo[2040:2898007] æ¯å°æ—¶åƒä¸€æ¬¡è¯ï¼Œä¸è¦æ”¾å¼ƒæ²»ç–—</div><div class="line">2016-07-02 17:36:12.400 ReactiveCocoaMVVMDemo[2040:2898007] æ¯å°æ—¶åƒä¸€æ¬¡è¯ï¼Œä¸è¦æ”¾å¼ƒæ²»ç–—</div><div class="line">//è®¾ç½®retryæ¬¡æ•°ï¼Œè¿™éƒ¨åˆ†å¯ä»¥å’Œç½‘ç»œè¯·æ±‚ä¸€èµ·ç”¨</div><div class="line">2016-07-02 17:36:07.427 ReactiveCocoaMVVMDemo[2040:2898007] è¯·æ±‚:success!</div><div class="line">//èŠ‚æµé˜€,throttleç§’å†…åªèƒ½é€šè¿‡1ä¸ªæ¶ˆæ¯</div><div class="line">2016-07-02 17:36:10.404 ReactiveCocoaMVVMDemo[2040:2898007] RAC_throttle------result = 66</div><div class="line">2016-07-02 17:36:10.404 ReactiveCocoaMVVMDemo[2040:2898007] RAC_throttle------result = 666</div><div class="line">//takeUntilæ¡ä»¶æ§åˆ¶</div><div class="line">2016-07-02 18:10:52.074 ReactiveCocoaMVVMDemo[3090:2920422] RAC_Condition------åƒé¥­ä¸­~</div><div class="line">2016-07-02 18:10:53.078 ReactiveCocoaMVVMDemo[3090:2920422] RAC_Condition------åƒé¥­ä¸­~</div><div class="line">2016-07-02 18:10:54.074 ReactiveCocoaMVVMDemo[3090:2920422] RAC_Condition------åƒé¥­ä¸­~</div><div class="line">2016-07-02 18:10:55.077 ReactiveCocoaMVVMDemo[3090:2920422] RAC_Condition------åƒé¥­ä¸­~</div><div class="line">2016-07-02 18:10:55.078 ReactiveCocoaMVVMDemo[3090:2920422] RAC_Condition------åƒé¥±äº†~</div></pre></td></tr></table></figure></p>
<hr>
<p>##æ–‡æœ«</p>
<p>æœ¬ç¯‡æ–‡ç« å¹¶æœªå¾ˆæ·±çš„æ¢è®¨<code>ReactiveCocoa</code>çš„åº•å±‚å®ç°æ–¹æ³•ï¼Œæƒå½“åšæŠ›ç –å¼•ç‰ï¼Œç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹<code>RAC</code>çš„æµ…æå’Œä½¿ç”¨</p>
<hr>
<p><strong>Githubé“¾æ¥å’Œæ–‡ä¸­æ‰€å¼•ç”¨çš„æ–‡ç« é“¾æ¥</strong></p>
<hr>
<p><strong>å¦‚æœè§‰å¾—æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œè¯·ç‚¹ä¸ªStarå•¦~</strong></p>
<ul>
<li>1 <a href="https://github.com/jiachenmu/ReactiveCocoaDemo" target="_blank" rel="external">æ–‡ç« ä¸­çš„é“¾å¼ç¼–ç¨‹å’ŒRACDemo</a></li>
<li>2 <a href="https://github.com/benjycui/introrx-chinese-edition?utm_source=tuicool&amp;utm_medium=referral#%E4%BB%80%E4%B9%88%E6%98%AFrp" target="_blank" rel="external">ä»€ä¹ˆæ˜¯å“åº”å¼ç¼–ç¨‹?</a></li>
<li>3 <a href="http://ios.jobbole.com/82356/" target="_blank" rel="external">è¿™æ ·å¥½ç”¨çš„ReactiveCocoaï¼Œæ ¹æœ¬åœä¸ä¸‹æ¥</a></li>
<li>4 <a href="http://mobile.51cto.com/news-494321.htm" target="_blank" rel="external">æœ€å¿«è®©ä½ ä¸Šæ‰‹ReactiveCocoaä¹‹è¿›é˜¶ç¯‡</a></li>
<li>5 <a href="http://www.cocoachina.com/ios/20160106/14880.html" target="_blank" rel="external">ReactiveCocoa v2.5 æºç è§£æä¹‹æ¶æ„æ€»è§ˆ</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ReactiveCocoa/">ReactiveCocoa</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—/" class="article-date">
      <time datetime="2016-06-30T01:29:40.000Z" itemprop="datePublished">2016-06-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—/">iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹- åˆ«è¸©ç™½å—</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>#iOS-OCé¡¹ç›® åˆ«è¸©ç™½å—(Donâ€™t Tap The White Tile)</p>
<hr>
<p>##å†™åœ¨å‰é¢çš„è¯</p>
<p>####â‘ åˆ«è¸©ç™½å—æ¸¸æˆç®€ä»‹ï¼š</p>
<blockquote>
<p>ã€Šåˆ«è¸©ç™½å—å„¿ Donâ€™t Tap The White Tileã€‹ï¼Œè¿™å°±æ˜¯è¿™ä¸ªæ¸¸æˆå”¯ä¸€çš„ä¸€ä¸ªè§„åˆ™ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸æ–­è¸©ç€é»‘è‰²æ–¹å—å‰è¿›å³å¯ï¼Œå¾ˆç®€å•å§ï¼Ÿè°éƒ½å¯ä»¥ä¼šç©ï¼Œä½†å¹¶ä¸æ˜¯è°éƒ½èƒ½ç©å¾—å¾ˆå¥½å™¢ï¼Œä½ å‘¢ï¼Ÿå¿«æ¥æŒ‘æˆ˜çœ‹çœ‹å§ï¼ç»å…¸æ¨¡å¼ï¼Œä»¥æœ€å¿«çš„é€Ÿåº¦åˆ°è¾¾ç»ˆç‚¹ã€‚è¡—æœºæ¨¡å¼ï¼Œä½ æœ‰èƒ½åŠ›å¾—å¤šå°‘åˆ†å°±å¾—å¤šå°‘åˆ†ï¼Œæ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œè¿™ä¹Ÿæ˜¯æœ€å…·æŒ‘æˆ˜æ€§çš„ä¸€ä¸ªæ¨¡å¼ã€‚é™æ—¶æ¨¡å¼ï¼Œåœ¨30ç§’å†…çœ‹ä½ èƒ½èµ°å‡ æ­¥ã€‚æé€Ÿæ¨¡å¼ï¼Œæ²¡æœ‰æœ€é«˜é€Ÿé™åˆ¶çš„è¡—æœºæ¨¡å¼, æŒ‘æˆ˜ä½ çš„æé™æ¥åŠ›æ¨¡å¼ï¼Œè§„å®šæ—¶é—´å†…å®Œæˆ50å—å„¿ï¼Œç„¶åä¼šæœ‰æ›´å¤šæ—¶é—´å»å®Œæˆå¦å¤–çš„50å—å„¿ã€‚ã€å¤åˆ¶äºç™¾åº¦ç™¾ç§‘ã€‘</p>
</blockquote>
<p>å¦‚æœä½ æ²¡ç©è¿‡ï¼Œæ²¡å…³ç³» ï¼Œä¸Šå›¾çœ‹çœ‹<br><img src="http://upload-images.jianshu.io/upload_images/1299512-1c86ccf35a745617.gif?imageMogr2/auto-orient/strip" alt="åˆ«è¸©ç™½å—å„¿.gif"><br>æ„æ€å°±æ˜¯ï¼šæ¯è¡Œæœ‰å››ä¸ªæŒ‰é’®ï¼Œé»‘è‰²çš„æŒ‰é’®æ˜¯æ­£ç¡®çš„éœ€è¦ä½ ç‚¹å‡»çš„æŒ‰é’®ï¼Œç™½è‰²å—ç‚¹å‡»åæ¸¸æˆå¤±è´¥ï¼Œæ‰€ä»¥è¿™ä¸ªæ¸¸æˆå°±å«â€åˆ«è¸©ç™½å—å„¿â€ğŸ˜‚ï¼Œåˆ«é—®æˆ‘æˆ‘ä¸ºä»€ä¹ˆè¿™ä¹ˆæœºæ™ºã€‚</p>
<p>####â‘¡å†™è¿™ä¸ªå°æ¸¸æˆçš„ç›®çš„</p>
<p>#####<strong>æœ€é‡è¦ :  <strong>çº¯å±å¥½ç©</strong></strong><br>æˆ‘è§‰å¾—åšä¸€ä»¶äº‹æƒ…æœ€å¤§çš„æ¨åŠ¨åŠ›å°±æ˜¯ <strong>å…´è¶£</strong> <strong>å…´è¶£</strong> <strong>å…´è¶£</strong>ã€‚<br>çœ‹åˆ°å¥½å¤šæ¸¸æˆéƒ½æ˜¯æ‹¿Unity3Dã€Cocos2Då¼€å‘çš„ï¼Œæˆ‘å°±æƒ³ æˆ‘ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ä¸€äº›ä¸œæµ·ä¹Ÿå¯ä»¥å®ç°ä¸€äº›ç®€å•çš„å¹³é¢2DåŠ¨ç”»å‘€ï¼Œæ‰€ä»¥æˆ‘è¯•äº†è¯•ï¼Œæ‰€ä»¥å°±æœ‰äº†è¿™ç¯‡ç®€ä¹¦ã€‚</p>
<p>#####<strong>ç”µå•†ä¹‹ç±»çš„appä¸ç¾è§‚</strong><br>å‰é¢ä»¿å†™è¿‡<a href="http://www.jianshu.com/p/7b57eb0c4abe" target="_blank" rel="external">åŠç³–app</a>ï¼Œå…¬å¸ä¹Ÿæ˜¯ç”µå•†çš„appï¼Œæ‰€ä»¥å¯¹äºç”µå•†appæ— çˆ±äº†ï¼Œ,,Ô¾â€¸Ô¾,,ï¼Œéƒ½æ˜¯ é¦–é¡µã€åˆ†ç±»ã€è´­ç‰©è½¦ã€ä¸ªäººä¸­å¿ƒçš„å¥—è·¯ï¼Œä½ æ‡‚çš„ã€‚ç›¸åæˆ‘å€’æ˜¯æ›´å–œæ¬¢ä¸€äº›ç”µå•†å…¥å£çš„APPï¼Œå°±æ¯”å¦‚åŠç³–ã€ç¾ä¸½è¯´ã€å°çº¢ä¹¦ä¹‹ç±»çš„appï¼ŒUIå¾ˆç¾è§‚ï¼Œè¿™æ˜¯å¸å¼•æˆ‘çš„åœ°æ–¹ã€‚</p>
<hr>
<p>##é¡¹ç›®æ•´ä½“çš„æ¦‚æ‹¬</p>
<p>####â‘ å¼€å‘å‘¨æœŸï¼š<br>å·¥ä½œé—²æš‡ä¹‹ä½™ç´¯è®¡æœ‰10å¤©å·¦å³ï¼Œæœ€è¿‘ä¸€ä¸ªåŠæœˆåœ¨å¿™å…¬å¸çš„é¡¹ç›®ï¼Œåªå¥½æŠ½æ—¶é—´å†™å•¦</p>
<p>####â‘¡å¼€å‘å·¥å…·å’Œè¯­è¨€ï¼š<br> å¼€å‘å·¥å…·ä¸ºXcode7.3   è¯­è¨€ä¸ºObjective-C<br>å› ä¸ºå‰é¢ä»¿å†™åŠç³–appçš„æ—¶å€™ï¼Œå¥½å¤šæœ‹å‹ç»™æˆ‘è¯´ä¸å¤ªæ‡‚swiftï¼Œé‚£æˆ‘å°±å†™ä¸ªOCçš„å°é¡¹ç›®</p>
<p>####â‘¢å¼€å‘è¦ç‚¹ï¼š<br><strong>æ¸¸æˆæˆåŠŸã€å¤±è´¥çš„é€»è¾‘ä»£ç åŸºäº <code>ReactiveCocoa</code> ,ä»£ç æœ‰è¯¦ç»†çš„è§£é‡Šã€‚</strong><br>éŸ³é¢‘ç®¡ç†ã€æ•´ä½“çš„UIæ­å»ºä¸éš¾ï¼Œéš¾çš„æ˜¯æ•´ä½“æ¸¸æˆé€»è¾‘çš„è®¾è®¡ã€‚</p>
<hr>
<p>##é¡¹ç›®è¯¦ç»†å®ç°è¿‡ç¨‹</p>
<p>####â‘ é¦–é¡µï¼Œé¡µé¢è¾ƒä¸ºç®€å•ï¼Œä¸»è¦ä»‹ç»ä¸€ä¸‹ UIButtonä¸ <code>ReactiveCocoa</code>çš„ç»“åˆä½¿ç”¨</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-81e0e7253713d485.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp58f5a0f6.png"></p>
<p>â€“ä¸»è¦ä»£ç å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//å¼€å§‹æ¸¸æˆæŒ‰é’®</div><div class="line">    _startButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, SCREEN_WIDTH/2, SCREEN_HEIGHT)];</div><div class="line">    _startButton.backgroundColor = [UIColor blackColor];</div><div class="line">    [_startButton setTitle:@&quot;å¼€å§‹æ¸¸æˆ&quot; forState:UIControlStateNormal];</div><div class="line">    [_startButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];</div><div class="line">    WeakSelf;</div><div class="line">    [[_startButton rac_signalForControlEvents:UIControlEventTouchUpInside] subscribeNext:^(id x) &#123;</div><div class="line">        [weakSelf buttonHideAnimation];</div><div class="line">        [weakSelf  presentViewController:[[GameSceneViewController alloc] init] animated:false completion:^&#123;</div><div class="line">            //å¼¹å‡ºæ¸¸æˆçª—ä½“å æš‚åœBGM</div><div class="line">            [SoundPlayer pauseBGM];</div><div class="line">        &#125;];</div><div class="line">        NSLog(@&quot; start game :)&quot;);</div><div class="line">    &#125;];</div><div class="line">    [self.view addSubview:_startButton];</div></pre></td></tr></table></figure></p>
<p>è§£é‡Šï¼š<code>[_startButton rac_signalForControlEvents:UIControlEventTouchUpInside]</code>è¿”å›ä¸€ä¸ª <code>RACSignal</code>,å¯ä»¥ç†è§£ä¸º ä¸€ä¸ªä¿¡å·ï¼Œåé¢ <code>subscribeNext:^(id x) {}</code> æ„æ€å°±æ˜¯ æ¥å—åˆ°è¿™ä¸ªä¿¡å·æ‰€åšçš„æ“ä½œã€‚ä»å­—é¢æ„æ€ä¸Šå¯ä»¥ç†è§£ä¸ºï¼Œå‰è€…å½“ä½ ç‚¹å‡»æŒ‰é’®ï¼Œè§¦å‘<code>UIControlEventTouchUpInside</code>äº‹ä»¶çš„æ—¶å€™ ï¼Œå‘å‡ºä¸€ä¸ªä¿¡å·ï¼Œåè€…æ˜¯æ¥å—åˆ°è¿™ä¸ªä¿¡å·ï¼Œä½ è¦å¹²ä»€ä¹ˆï¼Œç”±ä½ å†³å®šã€‚</p>
<p>####â‘¡æ¸¸æˆé¡µé¢viewï¼Œ</p>
<p> #####å€’è®¡æ—¶åŠ¨ç”»ä»‹ç»<br>ä¸Šå›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-76ac222f93784caa.gif?imageMogr2/auto-orient/strip" alt="å€’è®¡æ—¶åŠ¨ç”».gif"><br>â€”-æ„æˆï¼šviewèƒŒæ™¯ä¸ºé»‘è‰²ï¼Œä¸­é—´æ·»åŠ äº†ä¸€ä¸ªlabelï¼Œæ˜¾ç¤ºå½“å‰çš„æ•°å­—</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">*  å€’è®¡æ—¶ anim ......3 2 1 åŠ¨ç”»</div><div class="line">*</div><div class="line">*  @param anim          anim å˜åŒ–çš„æ•°å­—åˆå§‹å€¼</div><div class="line">*  @param completeBlock åŠ¨ç”»ç»“æŸåçš„æ“ä½œ</div><div class="line">*/</div><div class="line">- (void)showWithAnimNum:(NSInteger)anim CompleteBlock:(CompleteBlock)completeBlock;</div></pre></td></tr></table></figure>
<p>â€”-å®ç°æ€è·¯ï¼š è¦åšçš„ä»ç»™å®šçš„å‚æ•° <code>anim</code>  é€’å‡åˆ° 0  ä¹‹åç»“æŸåŠ¨ç”»ï¼Œç„¶åæ‰§è¡Œ<code>completeBlock</code><br>ï¼Œæˆ‘æ˜¯è¿™æ ·å†™ä¸€ä¸ªç±»ä¼¼äºé€’å½’çš„åŠ¨ç”»ï¼š<br>â‘ æ•´ä½“åŠ¨ç”»å¯ä»¥åˆ†ä¸ºå¾ˆå¤šä¸ªï¼Œå•ä¸ªæ•°å­—ï¼Œåšç¼©æ”¾å’Œé€æ˜åº¦æ”¹å˜çš„åŠ¨ç”»ç»„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">//è¿”å›ä¸€ä¸ª åŠ¨ç”»group</div><div class="line">- (CAAnimationGroup *)animationGroup &#123;</div><div class="line">    //ç¼©æ”¾</div><div class="line">    CABasicAnimation *animation1 = [CABasicAnimation animation];</div><div class="line">    [animation1 setKeyPath:@&quot;transform.scale&quot;];</div><div class="line">    [animation1 setFromValue:@1.0];</div><div class="line">    [animation1 setToValue:@4.0];</div><div class="line">    [animation1 setDuration:1.0];</div><div class="line">    //æ”¹å˜é€æ˜åº¦</div><div class="line">    CABasicAnimation *animation2 = [CABasicAnimation animation];</div><div class="line">    [animation2 setKeyPath:@&quot;alpha&quot;];</div><div class="line">    [animation2 setFromValue:@1.0];</div><div class="line">    [animation2 setToValue:@0.3];</div><div class="line">    [animation2 setDuration:1.0];</div><div class="line">    </div><div class="line">    </div><div class="line">    CAAnimationGroup *animGroup = [[CAAnimationGroup alloc] init];</div><div class="line">    animGroup.animations = [NSArray arrayWithObjects:animation1,animation2, nil];</div><div class="line">    [animGroup setDuration:1.0];</div><div class="line">    [animGroup setDelegate:self];</div><div class="line">    return animGroup;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>@ç”¨ä¸€ä¸ªå‚æ•°æ§åˆ¶æ•´ä½“çš„åŠ¨ç”»çš„ç»§ç»­å’Œåœæ­¢ï¼Œå°±æ˜¯<code>_animIndex</code><br>æ¯ä¸€ä¸ªåŠ¨ç”»groupæ‰§è¡Œå®Œæ¯•åï¼Œåœ¨ <code>- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag</code> ä¸­è¿›è¡Œ<code>_animIndex--</code>ï¼Œå¹¶ä¸”æ·»åŠ ä¸‹ä¸€ç»„åŠ¨ç”»ï¼Œçœ‹ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">// - MARK: Animation Delegate</div><div class="line">- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag &#123;</div><div class="line">    if (flag &amp;&amp; _animIndex &gt; 0) &#123;</div><div class="line">        _animIndex--;</div><div class="line">        _animLabel.text = [NSString stringWithFormat:@&quot;%ld&quot;,(long)_animIndex];</div><div class="line">        [_animLabel.layer addAnimation:[self animationGroup] forKey:nil];</div><div class="line">    &#125;</div><div class="line">    //åŠ¨ç”»æ‰§è¡Œå®Œæ¯•å æ‰§è¡Œçš„æ“ä½œ</div><div class="line">    if (_animIndex == 0) &#123;</div><div class="line">        if (_completeBlock != nil) &#123;</div><div class="line">            //å»¶è¿Ÿ0.4sä¹‹å å†å¼€å§‹æ¸¸æˆ é˜²æ­¢æ¸¸æˆå¼€å§‹å¤ªå¿« useræ¥å—ä¸äº†</div><div class="line">            self.hidden = true;</div><div class="line">            WeakSelf;</div><div class="line">            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.4 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                _completeBlock();</div><div class="line">                [weakSelf.animLabel.layer removeAllAnimations];</div><div class="line">                weakSelf.hidden = false;</div><div class="line">                [weakSelf removeFromSuperview];</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p> #####æ¸¸æˆç•Œé¢å¦‚ä½•æ­å»º<br>â‘ é¦–é¡µæ•´ä½“ç•Œé¢æ­å»º<br><img src="http://upload-images.jianshu.io/upload_images/1299512-23020b7609d725bd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="B7A2A5EB-B936-4ABD-BF2A-F6135389EC0C.png"><br>ç•Œé¢ä¸­æ¯ä¸€ä¸ªè¢«æˆ‘æ¡†èµ·æ¥çš„éƒ½æ˜¯æˆ‘å°è£…çš„ <code>GameSceneView</code>,å½“ç„¶æˆ‘ä»¬ä¸èƒ½åœ¨æ¯ä¸€ä¸ª<code>GameSceneView</code>é‚£å¦‚ä½•å®ç°â€™â€™é‡ç”¨â€™å‘¢â€™<br><strong>å®ç°æ€è·¯ï¼š</strong><br>â‘ è®¡ç®—ä½ çš„å±å¹•ä¸­éœ€è¦å¤šå°‘ä¸ª<code>gameScene</code>ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// - 1: å…ˆè®¡ç®—å‡º å±å¹•ä¸­éœ€è¦å¤šå°‘ä¸ª scene</div><div class="line">    _sceneCount = ceil(SCREEN_HEIGHT / WhiteBlockHeight) + 1;</div></pre></td></tr></table></figure></p>
<p>â‘¡åˆ›å»ºä¸ä¹‹ç­‰åŒæ•°é‡çš„scene<br><code>_frameArray</code>å­˜å‚¨çš„æ˜¯ sceneåˆ›å»ºæ—¶çš„åˆå§‹frame,ä¾¿äºç‚¹å‡»é”™è¯¯æ—¶ï¼Œç›´æ¥æ¢å¤åˆ°åˆå§‹çš„frame<br><code>_operateArray</code>å°†åˆ›å»ºå¥½çš„sceneé›†ä¸­åˆ°ä¸€èµ·ï¼Œä¾¿äºç®¡ç†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[_frameArray addObject:[NSValue valueWithCGRect:scene.frame]];</div><div class="line">[_operateArray addObject:scene];</div></pre></td></tr></table></figure></p>
<p>å±å¹•ä¸Šæ‰€æœ‰çš„ <code>scene</code>éƒ½æ˜¯å‘ä¸‹æ»šåŠ¨çš„ï¼Œæ¯æ¬¡æ»šåŠ¨åˆ¤æ–­æ˜¯å¦è¶…å‡ºå±å¹•ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æ­£ç¡®ã€sceneæ¼‚ç§»åˆ°å±å¹•å¤–çš„æ—¶å€™ï¼Œå†æ›´æ–°<code>scene</code>çš„<code>frame</code>ï¼Œè¿™ä¸ªsceneå°†è¢«å®‰æ’åˆ°æœ€åä¸€ä¸ª<code>scene</code>çš„åé¢ï¼Œä¸Šä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (void)viewWillAppear:(BOOL)animated &#123;</div><div class="line">    [super viewWillAppear:animated];</div><div class="line">    </div><div class="line">    //ç”¨ CADisplayLink è¿›è¡Œåˆ·æ–° é¢‘ç‡æ›´å¿«ï¼ŒåŠ¨ç”»æ•ˆæœä¸ä¼šå¡é¡¿</div><div class="line">    disPlayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(startScroll)];</div><div class="line">    </div><div class="line">    //å…ˆæ‰§è¡Œ 3 2 1 è¿™æ ·çš„åŠ¨ç”»</div><div class="line">    [[StartAnimView shareInstance] showWithAnimNum:3 CompleteBlock:^&#123;</div><div class="line">        [disPlayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>disPlayLinkä¸€ç›´åœ¨è°ƒç”¨ <code>- (void)startScroll</code>è¿™ä¸ªæ–¹æ³•ï¼Œåˆ·æ–°ç•Œé¢<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">//å¼€å§‹æ»šåŠ¨</div><div class="line">- (void)startScroll &#123;</div><div class="line">    WeakSelf;</div><div class="line">    </div><div class="line">    [_operateArray enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;</div><div class="line">        //</div><div class="line">        dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line">            GameSceneView *scene = (GameSceneView *)obj;</div><div class="line">            CGRect frame = scene.frame;</div><div class="line">            frame.origin.y += _gameSpeed * 2.0;</div><div class="line">            if (!*stop) &#123;</div><div class="line">                scene.frame = frame;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            //  ç”¨æˆ·ç‚¹å‡»è¶…æ—¶æ²¡æœ‰ç‚¹å‡»</div><div class="line">            if ( scene.frame.origin.y &gt;= SCREEN_HEIGHT &amp;&amp; scene.completeType == CompleteTypeNotClick)</div><div class="line">            &#123;</div><div class="line">                //åœæ­¢åˆ·æ–°</div><div class="line">                [disPlayLink invalidate];</div><div class="line">                *stop = false;</div><div class="line">                </div><div class="line">                //å¼¹å‡ºå¤±è´¥é¡µé¢</div><div class="line">                [weakSelf resetGame];</div><div class="line">        </div><div class="line">            &#125;else if( scene.frame.origin.y &gt; SCREEN_HEIGHT &amp;&amp; scene.completeType == CompleteTypeVictory)&#123;</div><div class="line">                // ç”¨æˆ·ç‚¹å‡»æˆåŠŸ  è®¡ç®—æ–°çš„frame</div><div class="line">                scene.frame = [weakSelf calculateNewFrameWithTag:scene.tag];</div><div class="line">                [scene reSet];</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç‚¹å‡»æ­£ç¡®ä¹‹å è®¡ç®—è¯¥ <code>scene</code>æ–°çš„frame<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//ç‚¹å‡»æ­£ç¡®ä¹‹å å°†è¶…å‡ºå±å¹•çš„scene æ”¹å˜frame ï¼Œè®©ç©å®¶æ„Ÿè§‰ä¸€ç›´æœ‰æ–°sceneçš„å‡ºæ¥</div><div class="line">- (CGRect)calculateNewFrameWithTag: (NSInteger )tag &#123;</div><div class="line">    tag = tag == 0 ? _sceneCount - 1 : tag - 1;</div><div class="line">    </div><div class="line">    GameSceneView *scene = (GameSceneView *)[_operateArray objectAtIndex:tag];</div><div class="line">    CGRect frame = scene.frame;</div><div class="line">    frame.origin.y -= WhiteBlockHeight;</div><div class="line">    return frame;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸€éƒ¨åˆ†ç”¨å›¾å¾ˆå¥½è§£é‡Šï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-4e87160e38bfa764.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp13f239f2.png"><br>çº¢è‰²æ¡†ä¸ºå±å¹•èŒƒå›´ï¼Œ ç¬¬0ä¸ª<code>scene</code>è¶…å‡ºå±å¹•åï¼Œæ–°çš„ä½ç½®å³åœ¨ ç¬¬4ä¸ª<code>scene</code>çš„åé¢</p>
<h5 id="GameSceneView-çš„æ„å»º"><a href="#GameSceneView-çš„æ„å»º" class="headerlink" title="GameSceneView çš„æ„å»º"></a>GameSceneView çš„æ„å»º</h5><p>è¿™ä¸€éƒ¨åˆ†æœ‰ä¸€ä¸ªå°é—æ†¾ï¼Œåº”è¯¥å°†æ¯è¡Œçš„buttonæ•°é‡å†™æˆ å‚æ•°ï¼Œä¸åº”è¯¥å†™æˆ4ğŸ˜€<br>æ¯ä¸ªbuttoné€šè¿‡  button.layerçš„borderColor å’Œ borderWidthå±æ€§è®¾ç½®è¾¹æ¡†ï¼Œæ‰€ä»¥æ˜¾çš„æœ‰ç‚¹ç²—ç³™ã€‚<br>ä¸»è¦ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">// - MARK: private method</div><div class="line">//å¿«é€Ÿæ„å»ºbutton</div><div class="line">- (UIButton *)quickCreateButtonWithFrame:(CGRect)frame&#123;</div><div class="line">    UIButton *btn = [[UIButton alloc] initWithFrame:frame];</div><div class="line">    </div><div class="line">    btn.selected = false;</div><div class="line">    btn.layer.borderColor = [UIColor blackColor].CGColor;</div><div class="line">    btn.layer.borderWidth = 0.5;</div><div class="line">    btn.backgroundColor = [UIColor whiteColor];</div><div class="line"></div><div class="line">    WeakSelf;</div><div class="line">    [[[btn rac_signalForControlEvents:UIControlEventTouchUpInside]</div><div class="line">      map:^id(id value) &#123;</div><div class="line">          if(!weakSelf.isHasOtherSelected &amp;&amp; weakSelf.goalIndex == btn.tag)&#123;</div><div class="line">              // æ²¡äººç‚¹å‡» and ç‚¹å‡»æŒ‰é’®ä¸ºç›®æ ‡æŒ‰é’® -&gt; clickæ­£ç¡®</div><div class="line">              btn.selected = false;</div><div class="line">              weakSelf.isHasOtherSelected = true;</div><div class="line">              weakSelf.completeType = CompleteTypeVictory;</div><div class="line">//              [SoundPlayer playWithMusicName:_effect];</div><div class="line">              weakSelf.clickBlock(CompleteTypeVictory);</div><div class="line">              return [UIColor whiteColor];</div><div class="line">          &#125;else if(!weakSelf.isHasOtherSelected &amp;&amp; weakSelf.goalIndex != btn.tag) &#123;</div><div class="line">              //ç‚¹å‡»btn ä¸æ˜¯ ç›®æ ‡ -&gt; clické”™è¯¯</div><div class="line">              weakSelf.completeType = CompleteTypeFailure;</div><div class="line">              weakSelf.isHasOtherSelected = true;</div><div class="line">//              [SoundPlayer playWithMusicName:ErrorEffect];</div><div class="line">              //ç‚¹å‡»é”™è¯¯ä¹‹å å°†æ­£ç¡®çš„btn æ‰§è¡ŒåŠ¨ç”»</div><div class="line">              [weakSelf clickButtonFailureWithButton:btn];</div><div class="line">              return [UIColor orangeColor];</div><div class="line">          &#125;</div><div class="line">          return [UIColor whiteColor];</div><div class="line">          </div><div class="line">    &#125; ]subscribeNext:^(UIColor *color) &#123;</div><div class="line">        btn.backgroundColor = color;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    return btn;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è§£é‡Šä¸€ä¸‹ï¼š<br><strong>å¯¹äºå…¶ä¸­<code>ReactiveCocoa</code>çš„è§£é‡Š</strong><br><code>[btn rac_signalForControlEvents:UIControlEventTouchUpInside]</code>å°±æ˜¯å½“ä½ ç‚¹å‡»buttonçš„æ—¶å€™ ä¼šå‘å‡ºä¸€ä¸ªä¿¡å·ï¼Œ<code>map:^id(id value) { ........}</code>æ˜¯æ¥å—åˆ°è¯¥ä¿¡å·ä¹‹åï¼Œä½ åšçš„ä¸€äº›æ“ä½œï¼Œè¿”å›ä¸€ä¸ªvalueå¯¹è±¡ ï¼Œ<code>subscribeNext:^(id value) {.......}</code> å°±æ˜¯ å¯¹äºæ¥å—åˆ°çš„<code>value</code>åšçš„ä¸€äº›æ“ä½œ</p>
<p>ç”¨ä¸€ä¸ªæ¯”å–»æ¥è¯´ï¼Œ<code>[btn rac_signalForControlEvents:UIControlEventTouchUpInside]</code> å°±æ˜¯æ°´æºï¼Œ<code>map:^id(id value) { ........}</code>å°±æ˜¯å†œå¤«å±±æ³‰åŠ å·¥å‚ï¼Œ<code>subscribeNext:^(id value) {.......}</code>å°±æ˜¯æ°´é€åˆ°ä½ æ‰‹é‡Œäº†ï¼Œä½ è¦å¹²ä»€ä¹ˆï¼Œæ´—è„¸æ´—è„šå–æ‰éšä¾¿ä½ ã€‚ã€‚</p>
<p><strong>å¯¹äºæ¸¸æˆé€»è¾‘çš„è§£é‡Šï¼š</strong><br>â‘ <code>isHasOtherSelected</code>è¿™ä¸ªboolç±»å‹çš„å˜é‡ ï¼š<br>trueä»£è¡¨å·²ç»æœ‰ä¸€ä¸ªbuttonè¢«ç‚¹å‡»  falseä»£è¡¨æ²¡æœ‰buttonè¢«ç‚¹å‡»<br>â‘¡æ ¹æ®ç‚¹å‡»æˆåŠŸä¸å¦,è¿”å›å®ŒæˆçŠ¶æ€completeType<br>ç‚¹å‡»æˆåŠŸï¼š<code>weakSelf.clickBlock(CompleteTypeVictory);</code><br>ç‚¹å‡»å¤±è´¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//ç‚¹å‡»é”™è¯¯ä¹‹å  å°†å¤±è´¥çš„btn é—ªçƒä¸‹</div><div class="line">              [weakSelf clickButtonFailureWithButton:btn];</div></pre></td></tr></table></figure></p>
<p>buttoné—ªçƒåŠ¨ç”»å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">//ç‚¹å‡»é”™è¯¯ è®©ç‚¹é”™çš„button é—ªçƒ</div><div class="line">- (void)clickButtonFailureWithButton:(UIButton *)sender&#123;</div><div class="line">    </div><div class="line">    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@&quot;opacity&quot;];//å¿…é¡»å†™opacityæ‰è¡Œã€‚</div><div class="line">    animation.fromValue = [NSNumber numberWithFloat:1.0f];</div><div class="line">    animation.toValue = [NSNumber numberWithFloat:0.0f];//è¿™æ˜¯é€æ˜åº¦ã€‚</div><div class="line">    animation.autoreverses = YES;</div><div class="line">    animation.duration = 0.2;</div><div class="line">    animation.repeatCount = 4;</div><div class="line">    animation.removedOnCompletion = NO;</div><div class="line">    animation.fillMode = kCAFillModeForwards;</div><div class="line">    animation.timingFunction=[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];///æ¸è¿›åŠ¨ç”»</div><div class="line">    [animation setDelegate:self];</div><div class="line">    [sender.layer addAnimation:animation forKey:nil];</div><div class="line">&#125;</div><div class="line"></div><div class="line">//é—ªçƒå®Œæ¯•å è¿”å›å¤±è´¥çŠ¶æ€</div><div class="line">- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag &#123;</div><div class="line">    if (flag) &#123;</div><div class="line">        self.clickBlock(CompleteTypeFailure);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="éŸ³é¢‘å¤„ç†ã€"><a href="#éŸ³é¢‘å¤„ç†ã€" class="headerlink" title="éŸ³é¢‘å¤„ç†ã€"></a>éŸ³é¢‘å¤„ç†ã€</h5><p><code>SoundPlayer</code>è¿™ä¸ªç±»è´Ÿè´£æ’­æ”¾éŸ³é¢‘,è°ƒç”¨<code>AVAudioPlayer</code>æ¥æ’­æ”¾éŸ³é¢‘<br>æœ‰ä¸‰ä¸ªæ–¹æ³•:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//æŒ‰é’®ç‚¹å‡»æ—¶æ’­æ”¾çš„å£°éŸ³</div><div class="line">+ (void)playWithMusicName: (NSString *)fileName;</div><div class="line"></div><div class="line">//æ’­æ”¾èƒŒæ™¯éŸ³ä¹</div><div class="line">+ (void)playBackgroundMusicWithName: (NSString *)fileName;</div><div class="line"></div><div class="line">//æš‚åœèƒŒæ™¯éŸ³ä¹</div><div class="line">+ (void)pauseBGM;</div></pre></td></tr></table></figure></p>
<p><strong>å…³äºç‚¹å‡»éŸ³æ•ˆçš„å¤„ç†</strong><br>æˆ‘æœ‰ä¸¤ä¸ªæ–¹æ¡ˆï¼Œéƒ½åœ¨ä»£ç é‡Œé¢<br>â‘ ç‚¹å‡»æŒ‰é’®æ—¶ï¼ŒæŒ‰ç‚¹å‡»æ¬¡æ•°æ¥æ’­æ”¾å¯¹åº”çš„å£°éŸ³ï¼š<br>å…·ä½“å®ç°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">if (type == CompleteTypeVictory) &#123;</div><div class="line">        //ç‚¹å‡»æˆåŠŸ  æ’­æ”¾ç›¸åº”çš„ music</div><div class="line">        if (_clickIndex &gt; 213) &#123;</div><div class="line">            _clickIndex = (NSInteger)_clickIndex % 213;</div><div class="line">        &#125;</div><div class="line">        NSString *fileName = [NSString stringWithFormat:@&quot;C-%ld&quot;,_clickIndex];</div><div class="line">        if (_clickIndex &lt;= 9) &#123;</div><div class="line">            fileName = [NSString stringWithFormat:@&quot;C-0%ld&quot;,_clickIndex];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        [SoundPlayer playWithMusicName:fileName];</div><div class="line">        // æ›´æ–°å½“å‰åˆ†æ•°</div><div class="line">        _currentScore += 1.0;</div><div class="line">        // æ ¹æ®å½“å‰åˆ†æ•° è®¡ç®—ç™½å—ç§»åŠ¨é€Ÿåº¦</div><div class="line">        [self updateGameSpeed];</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p><strong>å…³äºéŸ³é¢‘çš„æ¥æº</strong>ï¼šæˆ‘å°† <em>é©¬å…‹è¥¿å§†</em> çš„<strong>å…‹ç½—åœ°äºšç‹‚æƒ³æ›²</strong>åˆ†æˆäº†æ¯ä¸ªéƒ¨åˆ†ä¸º1sçš„ç‰‡æ®µ,å¤§æ¦‚200å¤šä¸ªç‰‡æ®µ<br>è¿™ä¸€éƒ¨åˆ†æœ‰ä¸ª<strong>ç–‘é—®</strong>:å£°éŸ³æ–‡ä»¶ä¸€èˆ¬ä¸æ˜¯åˆ†ä¸ºå·¦å³å£°é“å—ï¼Œæˆ‘å°†å…¶ä¸­ä¸€ä¸ªå£°é“æŠ½ç¦»å‡ºæ¥å½“åšèƒŒæ™¯éŸ³ä¹ï¼Œå¦ä¸€ä¸ªå£°é“æ–‡ä»¶åˆ†æˆè‹¥å¹²åˆ†ï¼Œå½“æŒ‰é’®ç‚¹å‡»æ—¶æ’­æ”¾æ˜¯ä¸æ˜¯æ›´å¥½ï¼Ÿæ‡‚ç”µå­éŸ³é¢‘å¤„ç†çš„æœ‹å‹å‡ºæ¥å›ç­”ä¸‹å‘—ã€‚</p>
<p>##é¡¹ç›®æ„Ÿæƒ³<br>â‘ å…¶å®å¤æ‚åŠ¨ç”»ä¹Ÿæ˜¯ â€œç¼©æ”¾â€ â€œæ—‹è½¬â€ â€œæ”¹å˜é€æ˜åº¦â€ â€œç§»åŠ¨â€ç­‰ä¸€äº›åŸºç¡€åŠ¨ç”»çš„ç»„åˆï¼Œä¸‹æ¬¡é‡åˆ°åŠ¨ç”»çš„æ—¶å€™å¯ä»¥è¯•ç€å°†åŠ¨ç”»è¿›è¡Œåˆ†è§£ï¼Œè¿™æ ·å°±ä¼šå‡å°å®ç°çš„éš¾åº¦ï¼Œ<br>â‘¡å°½é‡å°†ä»£ç å†™çš„æ¸…æ™°æ˜“æ‡‚ï¼Œä¸å¿™çš„æ—¶å€™å¤šå›å»reviewä»£ç ï¼Œå°±å¯ä»¥å‘ç°å½“åˆä»£ç çš„ä¸€äº›ä¸åˆç†çš„é€»è¾‘ï¼Œè¿™æ ·æ‰ä¼šè¿›æ­¥ï¼Œè¿™äº›å¤©å›å»å°†æˆ‘çš„<a href="http://www.jianshu.com/p/7b57eb0c4abe" target="_blank" rel="external">é«˜ä»¿åŠç³–app</a> reviewä¸‹ï¼Œå¤äººè€è¯ï¼Œ<strong>æ¸©æ•…è€ŒçŸ¥æ–° å¯ä»¥ä¸ºå¸ˆçŸ£</strong><br>â‘¢å­¦ä¹ ä¹‹è·¯ï¼Œ<strong>ä»»é‡è€Œé“è¿œï¼Œè·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢</strong></p>
<p>##Githubé¡¹ç›®ä¸‹è½½åœ°å€<br><strong>æ¸©é¦¨æç¤ºï¼š</strong>appå¯åŠ¨å ä¼šæœ‰èƒŒæ™¯éŸ³ä¹å“èµ·ï¼Œsoï¼Œä½ æ‡‚çš„ï¼Œç‚¹å‡»æŒ‰é’®ä¹Ÿä¼šæ’­æ”¾ <strong>å…‹ç½—åœ°äºšç‹‚æƒ³æ›²</strong>çš„ç‰‡æ®µï¼Œè¿è¡Œæ—¶è¯·è¯·è°ƒä½éŸ³é‡</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-d22eeea07435f018.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="è¯·è¿è¡Œ.xcworkspace"><br><a href="https://github.com/jiachenmu/Don-tTapTheWhiteTile" target="_blank" rel="external">ç‚¹å‡»å»æˆ‘çš„Githubä¸‹è½½</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOSå°é¡¹ç›®-App/">iOSå°é¡¹ç›® App</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-iOSå°é¡¹ç›®ä¹‹ç¬¬ä¸€å¼¹-å£çº¸å¤©æ°”" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬ä¸€å¼¹-å£çº¸å¤©æ°”/" class="article-date">
      <time datetime="2016-06-30T01:28:55.000Z" itemprop="datePublished">2016-06-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬ä¸€å¼¹-å£çº¸å¤©æ°”/">iOSå°é¡¹ç›®ä¹‹ç¬¬ä¸€å¼¹- å£çº¸å¤©æ°”</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <hr>
<p>##å‰è¨€ ï¼š</p>
<hr>
<p><strong>1. æ•´ä½“é¡¹ç›®å›é¡¾</strong><br> è·ç¦»ä¸Šæ¬¡å‘è¡¨æ–‡ç« ä¹Ÿæœ‰å¤§æ¦‚ä¸¤ä¸ªæœˆçš„æ—¶é—´äº†å§ï¼Œè¿™æ®µæ—¶é—´ä¸€ç›´åœ¨å¿™ç€å…¬å¸çš„é¡¹ç›®ã€‚æ²¡æœ‰æ—¶é—´reviewä»£ç ï¼ˆå¯èƒ½æ˜¯æ¯”è¾ƒæ‡’å§ğŸ˜…ï¼Œä»¥åä¸€å®šæ”¹æ­£ï¼‰ï¼Œè¿™ä¸ªâ€å£çº¸å¤©æ°”â€å‰å‰ååå¤§æ¦‚èŠ±äº†10å¤©æ—¶é—´ï¼Œè®¾è®¡ã€å¼€å‘éƒ½æ˜¯æˆ‘ï¼ˆPSï¼šä¸å¥½çœ‹å°±å°†å°±ç€çœ‹ï¼Œæˆ‘åªæ˜¯ä¸€ä¸ªæœ‰æƒ…æ€€çš„ç¨‹åºçŒ¿ğŸ˜œï¼‰ï¼Œéƒ½æ˜¯ä¸‹ç­äº†å†™å†™ï¼Œä»£ç æ¯”è¾ƒç®€å•ï¼Œç»“æ„ä¹Ÿä¸æ˜¯å¾ˆå¤æ‚ã€‚</p>
<p><strong>3. åšè¿™ä¸ªappçš„åˆè¡·</strong><br>å‰é¢åšçš„é«˜ä»¿é¡¹ç›®éƒ½æ˜¯é«˜ä»¿appï¼Œæ•°æ®éƒ½æ˜¯æœ¬åœ°æ•°æ®ï¼Œè¿™æ¬¡æƒ³ç©ç©ç½‘ä¸Šçš„ï¼Œåˆšå¼€å§‹åªæ˜¯çœ‹åˆ°ç™¾åº¦ApiStoreä¸Šæœ‰å…è´¹çš„å¤©æ°”æ¥å£ï¼Œæˆ‘å°±è¯•ç€ç”¨äº†ä¸€ä¸‹ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œé‚£å°±å¹²è„†å†™ä¸ªå¤©æ°”appç©ç©å§ã€‚<del>æˆ‘å°±æƒ³è¦ä¸€ä¸ªç®€å•çš„appï¼Œå°±æ˜¾ç¤ºå¤©æ°”å°±å¥½ï¼Œå…¶ä½™è¿‡å¤šçš„åŠ¨ç”»æ•ˆæœä¸éœ€è¦ï¼Œæ•´ä½“çš„é¡µé¢æ— éå°±æ˜¯<code>UITableView</code>ã€<code>UICollectionView</code>å’Œä¸€äº› <code>UILabel</code>ã€<code>UIButton</code>çš„ç»„åˆï¼Œç†æ¸…æ¥šæ€è·¯å°±å¾ˆå¥½åšäº†ï¼Œå…¶å®UIæ­å»ºæœ¬èº«å°±æ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ï¼Œéš¾çš„åœ¨äºä¸šåŠ¡å’Œé€»è¾‘çš„å¤„ç†ä¸Šã€‚</del></p>
<p><strong>3.ä¸ºä»€ä¹ˆå«å£çº¸å¤©æ°”ï¼Ÿ</strong><br>ä¸ºäº†å¼¥è¡¥ç”»é¢çš„çªå…€æ„Ÿï¼Œä¸»è¦æ˜¯å¤§ç‰‡å¤§ç‰‡çš„ç™½ï¼Œæˆ‘ä¹Ÿä¸æ‡‚å¦‚ä½•é…è‰²ï¼Œæˆ‘éƒ½ç”¨ä¸€å¼ å›¾ç‰‡å½“åšèƒŒæ™¯ï¼ŒO(âˆ©_âˆ©)O~~ï¼Œæ‰€ä»¥æˆ‘å°±èµ·åå«åšâ€å£çº¸å¤©æ°”â€äº†ã€‚</p>
<hr>
<p>##é¡¹ç›®çš„æ•´ä½“ä»‹ç»ï¼š</p>
<hr>
<p>###<strong>1. åŠŸèƒ½ç®€ä»‹ï¼š</strong></p>
<p>####Tips:åŠŸèƒ½æ¯”è¾ƒå°‘ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p>
<p>#####â‘ .  æ˜¾ç¤ºå¤©æ°”ï¼šé¦–é¡µæ˜¾ç¤ºæ·»åŠ è¿‡çš„åŸå¸‚çš„å¤©æ°”</p>
<p>#####â‘¡.  æ·»åŠ åŸå¸‚: ä»…é™ä¸å›½å†…ã€‚</p>
<p>#####â‘¢.  ç®¡ç†å·²ç»æ·»åŠ çš„åŸå¸‚<br><code> </code></p>
<p>###<strong>2. åŠŸèƒ½å±•ç¤ºï¼š</strong></p>
<p>#####â‘ . å¤©æ°”å±•ç¤ºä¸»é¡µé¢ :ç±»ä¼¼äºé¦–é¡µ</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-abf220551fb21483.gif?imageMogr2/auto-orient/strip" alt="é¦–é¡µå±•ç¤º.gif"></p>
<p>######ç‚¹å‡»æ¯ä¸€ä¸ªåŸå¸‚ï¼Œå¼¹å‡ºå¤©æ°”è¯¦æƒ…Viewï¼Œä¼šæ˜¾ç¤ºè¯¥åŸå¸‚çš„å†å²å¤©æ°”å’Œé¢„æµ‹å¤©æ°”ï¼Œå…¶ä¸­ä»Šæ—¥å¤©æ°”è¿˜æœ‰è¯¸å¦‚æ„Ÿå†’æŒ‡æ•°ã€ç©¿è¡£æŒ‡æ•°ç­‰ä¸€äº›æç¤ºã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-f994d293274ee756.gif?imageMogr2/auto-orient/strip" alt="å¤©æ°”è¯¦æƒ….gif"></p>
<p>#####â‘¡. æ·»åŠ åŸå¸‚<br>è¾“å…¥åŸå¸‚ä¸­æ–‡åï¼Œç„¶åå±•ç¤ºæœç´¢ç»“æœï¼Œé€‰æ‹©è¦æ·»åŠ çš„åŸå¸‚å³å¯ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-60d3e8005c05d251.gif?imageMogr2/auto-orient/strip" alt="æ·»åŠ åŸå¸‚.gif"></p>
<p>#####â‘¢. ç®¡ç†å·²ç»æ·»åŠ çš„åŸå¸‚<br>ç‚¹å‡»Xåˆ é™¤é€‰æ‹©çš„åŸå¸‚ï¼Œ<br><img src="http://upload-images.jianshu.io/upload_images/1299512-af536d4faed69db2.gif?imageMogr2/auto-orient/strip" alt="ç®¡ç†åŸå¸‚.gif"></p>
<p>#####â‘¢. å…³äºä½œè€…(PS:è¿™ä¸€éƒ¨åˆ†å…¶å®ä¸ç®—åŠŸèƒ½äº†å§ğŸ˜)</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-9971c3e9aac4bbdf.gif?imageMogr2/auto-orient/strip" alt="å…³äºä½œè€….gif"></p>
<p><code> </code></p>
<p>###<strong>3. é¡¹ç›®çš„å®ç°æ–¹æ³•ï¼š</strong></p>
<p>#####â‘ . å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¤§å¤šæ•°é‡‡ç”¨xibï¼Œæˆ‘ä»çº¯ä»£ç çš„æµ·æ´‹é‡Œçˆ¬å‡ºæ¥ï¼Œçœ‹åˆ°äº†xibçš„æ–°å¤§é™†ğŸ˜„ï¼Œxibä½¿ç”¨è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œä»£ç é‡ä¹Ÿå°‘äº†å¾ˆå¤šï¼Œå¯æ˜¯æˆ‘ä¾ç„¶å–œæ¬¢çº¯ä»£ç ğŸ˜‚</p>
<p>#####â‘¡.  æ•°æ®çš„æ¥æºã€è¯·æ±‚ä¸å¤„ç†ï¼š<br>â€”â€“1.æ•°æ®æ¥æºäºç™¾åº¦ApiStoreä¸­çš„ä¸¤ä¸ªå…è´¹çš„å¤©æ°”æ¥å£,è¿”å›çš„æ•°æ®éƒ½æ˜¯JSONå­—ç¬¦ä¸²ï¼š</p>
<p><strong><a href="http://apistore.baidu.com/apiworks/servicedetail/112.html" target="_blank" rel="external">ç™¾åº¦æ¥å£é“¾æ¥</a></strong></p>
<blockquote>
<p>ç¬¬ä¸€ä¸ªï¼šæ ¹æ®åŸå¸‚ä¸­æ–‡åç§° æŸ¥è¯¢åŸå¸‚ID<br>ç¬¬äºŒä¸ªï¼š æ ¹æ®åŸå¸‚IDæŸ¥è¯¢è¿‘7å¤©çš„å¤©æ°”<br>å›¾ç‰‡å±•ç¤ºï¼š</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-c9730c120b233fe3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="A5873AE1-3A82-496D-AE04-A1FEC252BFFE.png"><br>â€”â€“2.æ•°æ®è¯·æ±‚ï¼š<br>ä½¿ç”¨<code>NSURLSession</code>å¯¹åº”ä¸¤ä¸ªæ¥å£ å°è£…äº†ä¸¤ä¸ªè¯·æ±‚ï¼Œæ²¡æœ‰ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ã€‚<br>â€”â€“3.æ•°æ®å¤„ç†ï¼š<br> â‘  æ ¹æ®JSONå­—ç¬¦ä¸²å†™äº†å¯¹åº”çš„æ¨¡å‹ï¼Œä½¿ç”¨<code>MJExtension</code>è§£æJSONï¼Œå¹¶è½¬æˆå¯¹åº”çš„<code>model</code><br> â‘¡æ•°æ®å­˜å‚¨é‡‡ç”¨<code>NSUserDefaults</code>ï¼Œå¯¹äºé¡¹ç›®çš„åŸå¸‚çš„å­˜å‚¨æ“ä½œå°è£…äº†ä¸€ä¸ªç±»<code>CityManager</code>ï¼Œç®¡ç†æ‰€æœ‰çš„å­˜å‚¨ã€è¯»å–æ“ä½œ(æ¯”å¦‚ è¿”å›çƒ­é—¨åŸå¸‚åˆ—è¡¨ã€è¿”å›å½“å‰å·²é€‰æ‹©çš„åŸå¸‚)<br>Tips:ç”±äº<code>NSUserDefaults</code>ä¸èƒ½å­˜å‚¨è‡ªå®šä¹‰å¯¹è±¡ï¼Œæ‰€ä»¥éœ€è¦å…ˆå½’æ¡£åå­˜å‚¨</p>
<hr>
<p>##é¡¹ç›®æ„Ÿæƒ³ï¼š</p>
<hr>
<p><code>`å¥½å§ï¼Œè¿˜æ²¡æœ‰æ€ä¹ˆå†™å°±åˆ°é¡¹ç›®æ„Ÿæƒ³äº†ï¼Œè¿™ä¸ªé¡¹ç›®ç»“æ„éå¸¸ç®€å•ï¼Œä¸œè¥¿ä¹Ÿæ¯”è¾ƒå°‘ï¼Œä½†æ˜¯éº»é›€è™½å°ã€äº”è„ä¿±å…¨ï¼Œæœ¬åœ°å­˜å‚¨ã€ç½‘ç»œè¯·æ±‚éƒ½æœ‰ï¼Œä¸»è¦æ˜¯è¿™ä¸ª</code>æ–¹æ­£å–µå‘œ`å­—ä½“çœŸçš„éå¸¸èŒå•Šï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰çš„æ–‡å­—éƒ½é‡‡ç”¨çš„è¿™ä¸ªå­—ä½“ã€‚ç”±äºç²¾åŠ›æœ‰é™ï¼Œå¯¹åº”å„ç§å¤©æ°”çš„å›¾ç‰‡å¹¶ä¸å…¨ï¼Œåªæœ‰å‡ ä¸ªå¤§åˆ†ç±»ï¼Œæ¯”å¦‚â€™â€™å°é›¨â€ã€â€ä¸­é›¨â€ã€â€å¤§é›¨â€æˆ‘éƒ½ç”¨çš„ä¸€ä¸ªå›¾ç‰‡ËœğŸ˜‚ï¼Œæ‰€ä»¥å¦‚æœè§‰å¾—ç²—ç³™ï¼Œè¯·è§è°…ï¼Œå“ˆå“ˆã€‚</p>
<p>æ­£å„¿å…«ç»çš„è¯´ï¼Œåšå®Œè¿™ä¸ªå°appï¼Œæœ€ä¸»è¦çš„ä¸€ä¸ªæ„Ÿæƒ³å°±æ˜¯ <em>â€œåšå¾ˆç®€å•ï¼Œåšå¥½å°±ä¸å®¹æ˜“äº†â€</em></p>
<p>å¥½å§ï¼Œç¬¬ä¸€å¼¹å°±åˆ°è¿™é‡Œäº†</p>
<p>####ä¸‹ä¸€å¼¹é¢„å‘Š ï¼š</p>
<h6 id="ä¸€ä¸ªé»‘ç™½ç›¸é—´çš„ã€è€ƒéªŒæ‰‹é€Ÿçš„å°æ¸¸æˆï¼Œ"><a href="#ä¸€ä¸ªé»‘ç™½ç›¸é—´çš„ã€è€ƒéªŒæ‰‹é€Ÿçš„å°æ¸¸æˆï¼Œ" class="headerlink" title="ä¸€ä¸ªé»‘ç™½ç›¸é—´çš„ã€è€ƒéªŒæ‰‹é€Ÿçš„å°æ¸¸æˆï¼Œ"></a>ä¸€ä¸ªé»‘ç™½ç›¸é—´çš„ã€è€ƒéªŒæ‰‹é€Ÿçš„å°æ¸¸æˆï¼Œ</h6><p>##Githubä¸‹è½½åœ°å€ï¼š</p>
<hr>
<p><a href="https://github.com/jiachenmu/WallpaperWeather" target="_blank" rel="external">ç‚¹å‡»å»æˆ‘çš„Githubè½¬è½¬ï¼Œè§‰å¾—ä¸é”™å°±èµä¸ªâ˜…</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOSå°é¡¹ç›®-App/">iOSå°é¡¹ç›® App</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Swift2-0-é«˜ä»¿åŠå¡˜App" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/30/Swift2-0-é«˜ä»¿åŠå¡˜App/" class="article-date">
      <time datetime="2016-06-30T01:27:39.000Z" itemprop="datePublished">2016-06-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/30/Swift2-0-é«˜ä»¿åŠå¡˜App/">Swift2.0 é«˜ä»¿åŠå¡˜App</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>#IOS-Swift2.0 é«˜ä»¿åŠç³–App</p>
<hr>
<p>##å†™åœ¨å‰é¢çš„è¯<br>â€“å°‘å¹´æˆ‘æ˜¯å»å¹´æ¯•ä¸šåšIOSå¼€å‘çš„ï¼Œè¿™ä¸ªé¡¹ç›®å¤§æ¦‚æ˜¯2016å¹´1æœˆä»½åˆ°ç°åœ¨åšå®Œçš„ï¼Œé¡¹ç›®åˆšå¼€å§‹æ²¡å­¦è¿‡Swiftè¯­è¨€ï¼Œä½†æƒ³ç€ä¸ä¼šå°±è¯¥å»æŒ‘æˆ˜ï¼Œäºæ˜¯è¾¹å­¦ä¹ è¾¹åšè¿™ä¸ªé¡¹ç›®ï¼Œç°åœ¨å¯¹Swiftä¹Ÿæœ‰äº†ä¸€å®šçš„äº†è§£<br>ï¼Œåœ¨æ­¤æ„Ÿè°¢<a href="http://www.jianshu.com/users/5fe7513c7a57/latest_articles" target="_blank" rel="external">ç»´å°¼çš„å°ç†Š</a>çš„æŒ‡å¯¼</p>
<p>##å…³äºé¡¹ç›®(GitHubåœ°å€åœ¨æ–‡ç« æœ€ä¸‹æ–¹)<br>â€“è¿™ä¸ªå¼€æºé¡¹ç›®ä¸ºåŠç³–ï¼Œ<a href="http://www.ibantang.com" target="_blank" rel="external">å®˜ç½‘â¡</a>,ç±»ä¼¼äºç¾ä¸½è¯´ï¼Œä¸€æ¬¾ç”µå•†Appï¼Œä½¿ç”¨è¯­è¨€:Swift2.0,å¼€å‘å·¥å…·: Xcode 7.1,çº¯ä»£ç å¼€å‘,è€—æ—¶ä¸¤ä¸ªå¤šæœˆï¼Œæ•°æ®ä¸ºæœ¬åœ°æ•°æ®ï¼Œç”¨Charlesè¿›è¡ŒæŠ“åŒ…ã€‚<br>â€“é¡¹ç›®æµ‹è¯•æœºä¸º5Sï¼ŒUIæ²¡æœ‰å¯¹6/6Sè¿›è¡Œé€‚é…<br>â€“å› ä¸ºå¼€å‘æ—¶é—´æœ‰é™ï¼ŒAPPé‡Œé¢çš„å„ç§åˆ†ç±»ç›¸å½“ç¹å¤šï¼Œå› æ­¤é¦–é¡µä¸­æµ‹è¯•çš„è¯ç‚¹ç¬¬ä¸€ä¸ªåˆ†ç±»ï¼Œç¬¬ä¸€ä¸ªcellï¼Œä¸€èˆ¬éƒ½æ˜¯æœ‰æ•°æ®çš„ï¼Œæ²¡æœ‰ä¹Ÿä¼šæç¤ºã€‚<br>â€“æˆ‘æ˜¯ä¸ªæ–°æ‰‹,Bugæ˜¯éš¾å…çš„å˜›ã€‚å¦‚æœå‘ç°æœ‰Bugå’Œç–‘é—®ï¼Œè¯·å‘æˆ‘è”ç³»ï¼ŒQQã€ç®€ä¹¦ã€å¾®åšéƒ½å¯ä»¥<br>â€“Tips:é¦–é¡µæ”¯æŒ3D Touchï¼Œå¯ä»¥è¯•è¯•å“¦~</p>
<p>##é¡¹ç›®æ•ˆæœå›¾</p>
<p>####é¦–é¡µå±•ç¤º<br><img src="http://upload-images.jianshu.io/upload_images/1299512-f59c8f1a63af8958.gif?imageMogr2/auto-orient/strip" alt="é¦–é¡µè½®æ’­å›¾åŠ å±•ç¤º.gif"></p>
<p>#####é¦–é¡µ-æ¸…å•å±•ç¤º</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-bafce461cd2e285b.gif?imageMogr2/auto-orient/strip" alt="é¦–é¡µ-æ¸…å•å±•ç¤º.gif"></p>
<p>#####é¦–é¡µ-æœç´¢åˆ†ç±»å±•ç¤º</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-0d90d236d859233e.gif?imageMogr2/auto-orient/strip" alt="é¦–é¡µ-æœç´¢å±•ç¤º.gif"></p>
<p>####3D Touchå±•ç¤º(ç”¨6SåŠ6Sä»¥ä¸Šæµ‹è¯•)</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-3c0e3ba29e9f00d8.gif?imageMogr2/auto-orient/strip" alt="3DTouchå±•ç¤º.gif"></p>
<p>####å¹¿åœºå±•ç¤º<br><img src="http://upload-images.jianshu.io/upload_images/1299512-033b26149abfad1d.gif?imageMogr2/auto-orient/strip" alt="é¦–é¡µ-å¹¿åœºå±•ç¤º.gif"></p>
<p>####ç§€</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-626bdc9943daf60d.gif?imageMogr2/auto-orient/strip" alt="ç§€æˆ‘å±•ç¤º.gif"></p>
<p>####æ¶ˆæ¯(è¿™ä¸€éƒ¨åˆ†ğŸ˜‚ï¼Œæˆ‘æ²¡å¥½å‹ï¼Œæ²¡ç²‰ä¸ï¼ŒæŠ“åŒ…æœ¨æœ‰æ•°æ®ï¼Œæ‰€ä»¥å°±æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•åšå’¯)</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-6dca6a94de88f6ff.gif?imageMogr2/auto-orient/strip" alt="æ¶ˆæ¯.gif"></p>
<p>####ä¸ªäººä¸­å¿ƒ(æ¢å¤´åƒè¯·ç”¨çœŸæœºæµ‹è¯•~)</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-1295962d038abd25.gif?imageMogr2/auto-orient/strip" alt="ä¸ªäººä¸­å¿ƒ.gif"></p>
<p>##é¡¹ç›®è¯¦ç»†è®²è§£ (æŒ‰APPçš„å¯åŠ¨é¡ºåºæ¥)</p>
<p>####å¯åŠ¨é¡µé¢</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-5510cff43f75da01.gif?imageMogr2/auto-orient/strip" alt="å¯åŠ¨é¡µé¢.gif"><br>ä¸»è¦ä»£ç å¦‚ä¸‹:<br>1.åœ¨appDelegateä¸­<br><code>self.window?.rootViewController = mainViewController()</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//MARK: Appé¦–æ¬¡å¯åŠ¨æ˜¾ç¤º appçš„ç®€ä»‹</div><div class="line">    func mainViewController() -&gt; UIViewController&#123;</div><div class="line">        //firstStartä¸ä¸ºç©º,ä¸æ˜¯æ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨</div><div class="line">        if  NSUserDefaults.standardUserDefaults().objectForKey(&quot;FirstStart&quot;) != nil &#123;</div><div class="line">            return self.tabbarController</div><div class="line">        &#125;else &#123;</div><div class="line">            //æ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨</div><div class="line">            NSUserDefaults.standardUserDefaults().setObject(false, forKey: &quot;FirstStart&quot;)</div><div class="line">            let firstVC = FirstStartViewController()</div><div class="line"></div><div class="line">            return firstVC</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>Tips: ç”¨æˆ·ç¬¬ä¸€æ¬¡å¯åŠ¨Appçš„æ—¶å€™<code>self.window.rootViewController = FirstStartViewController()</code>  ä½¿ç”¨æˆ·è¿›å…¥å¼•å¯¼é¡µï¼ŒåŠ¨ç”»å®Œæˆåï¼Œç‚¹å‡»ã€å¼€å¯Appä¹‹æ—…ã€,å¼•å¯¼é¡µå‘å‡º é€šçŸ¥ï¼ŒappDelegateæ¥å—é€šçŸ¥ï¼Œå†å°†<code>self.window?.rootViewController = self.tabBarController</code></p>
<p>####é¦–é¡µ-å±•ç¤º</p>
<p>#####â‘ æœ€å¥½çš„è®¾è®¡æ€è·¯åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-84bab42ca5fbfa65.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp4c68a801.png"><br>Tipsï¼šä»¥ä¸‹çš„æ€è·¯ åœ¨ä¸ªäººä¸­å¿ƒå¾ˆå®Œæ•´ï¼Œå‰å»çœ‹çœ‹å“ˆ</p>
<p>######1.çº¢è‰²éƒ¨åˆ†è®¾è®¡ä¸º collectionHeaderView<br>æ–¹æ³•ï¼š åˆå§‹åŒ–collecitonViewæ—¶  åœ¨å…¶layoutå‚æ•°ä¸­è®¾ç½®<br><code>layout.headerReferenceSize = CGSizeMake(width, height)</code><br>ç„¶åcollectionView æ³¨å†Œè¿™ä¸ªheaderView<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">public func registerClass(viewClass: AnyClass?, forSupplementaryViewOfKind elementKind: String, withReuseIdentifier identifier: String)`</div><div class="line">ç„¶å åœ¨collectionViewä»£ç†æ–¹æ³•</div><div class="line">`func collectionView(collectionView: UICollectionView, viewForSupplementaryElementOfKind kind: String, atIndexPath indexPath: NSIndexPath) -&gt; UICollectionReusableView &#123;</div><div class="line">        var reuseView = UICollectionReusableView()</div><div class="line">        if kind == UICollectionElementKindSectionHeader &#123;</div><div class="line">            let headView = collectionView.dequeueReusableSupplementaryViewOfKind(UICollectionElementKindSectionHeader, withReuseIdentifier: &quot;collectionViewHeaderView&quot;, forIndexPath: indexPath)</div><div class="line">            </div><div class="line">            headView.addSubview(collectionHeadView)</div><div class="line">            reuseView = headView</div><div class="line">        &#125;</div><div class="line">        return reuseView</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>######2.ç»¿è‰²éƒ¨åˆ†ä¸ºcollectionView åªä½œä¸ºå®¹å™¨ä½¿ç”¨</p>
<p>######3.è“è‰²éƒ¨åˆ†ä¸ºæ˜¾ç¤ºçš„tableviewï¼Œæ·»åŠ åˆ°collectionViewçš„cell.contentViewè¿›è¡Œæ˜¾ç¤º<br>Tips:ç°åœ¨å¾ˆå¤šAppçš„å¯åŠ¨é¡µé¢ä¹Ÿæ˜¯è¿™ä¸ªæ€è·¯ï¼Œæ•´ä½“ä¸ºä¸€ä¸ªUICollectionViewï¼Œæ¯ä¸€ä¸ªcelléƒ½æ·»åŠ UITableViewè¿›è¡Œæ˜¾ç¤º</p>
<p>#####â‘¡å…³äºcell åŠ¨æ€é«˜åº¦çš„é—®é¢˜,ä¸Šå›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-4f95d6d29d3a0ec3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp3734bf84.png"><br>è“è‰²çš„è¿™ä¸€éƒ¨åˆ†æ˜¯æ¸…å•è¯¦æƒ…ä¸­çš„æè¿°å†…å®¹ï¼ŒJSONä¸­çš„æè¿°æ–‡å­—éƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å¯¼è‡´æ•´ä¸ªcellçš„é«˜åº¦éƒ½æ˜¯åŠ¨æ€ä¸å®šçš„<br>Tipsï¼š<br>1.åœ¨cellæ‰€æœ‰çš„modelä¸­æ·»åŠ <code>cellHeight</code>å­—æ®µ,åœ¨tableViewä»£ç†æ–¹æ³•<code>heightForRowAtIndexPath</code>ä¸­,åˆ¤æ–­modelä¸­çš„<code>cellHeight</code>å­—æ®µæ˜¯ä¸æ˜¯ä¸ºç©ºï¼Œæœ‰å€¼åˆ™è¿”å›è¯¥å€¼,ç±»ä¼¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">func tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -&gt; CGFloat &#123;</div><div class="line">       //modelä¸ºå¯¹åº”cellçš„model</div><div class="line">      if model.cellHeight != nil &#123;</div><div class="line">             return model.cellHeight</div><div class="line">       &#125;</div><div class="line">    return 30</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.cellä¸­çš„å±æ€§model é‡å†™setæ–¹æ³•ï¼Œç±»ä¼¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var model: YourModel&#123;</div><div class="line">  didSet&#123;</div><div class="line">        //--------</div><div class="line">            åšä½ çš„æ“ä½œ</div><div class="line">        //-------</div><div class="line">        if model.cellHeight == nil &#123;</div><div class="line">        model.cellHeight = ä½ è®¡ç®—åçš„é«˜åº¦</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>#####â‘¢ 3D Touch<br>Tips:å…¶å®Appä¸­åº”ç”¨æœ€å¤šçš„ä¹Ÿå°±æ˜¯ä¸ç”¨ç‚¹è¿›å»çœ‹ã€‚å¯ä»¥é¢„è§ˆä¸‹ä¸€çº§æ˜¾ç¤ºçš„å†…å®¹ï¼Œæ¯”å¦‚ å¾®ä¿¡</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-a13038df731a2086.gif?imageMogr2/auto-orient/strip" alt="3D Touché€šç”¨.gif"><br>ä¸Šä»£ç ï¼š<br><code>viewDidLoad()</code>ä¸­ <code>self.add3DTouch()</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//MARK: æ·»åŠ  3D touchåŠŸèƒ½</div><div class="line">    func add3DTouch() &#123;</div><div class="line">        //1.æ£€æµ‹ 3D touch æ˜¯å¦å¯ç”¨</div><div class="line">        if traitCollection.forceTouchCapability == .Available &#123;</div><div class="line">            //3DTouchå¯ç”¨ï¼Œ</div><div class="line">            registerForPreviewingWithDelegate(self, sourceView: view)</div><div class="line">        &#125;else &#123;</div><div class="line">            //ä¸å¯ç”¨</div><div class="line">            TipView.showMessage(&quot;ä¸æ”¯æŒ3Dtouch,æ¢ä¸ª6Så§,ä¸è°¢ğŸ˜‚&quot;)    </div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>Tipsï¼š<br>1 <code>registerForPreviewingWithDelegate(delegate: UIViewControllerPreviewingDelegate, sourceView: UIView)</code>æ–¹æ³•ä¸­delegateå³ä¸ºå½“å‰æ§åˆ¶å™¨selfï¼Œ<code>sourceView</code>å³ä¸ºæ„Ÿåº”3DTouchåŠŸèƒ½çš„Viewï¼Œå½“å‰æ§åˆ¶å™¨ä¸­ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯<code>self.view</code><br>2.æ§åˆ¶å™¨ä¸Šæ·»åŠ ä»£ç†<code>UIViewControllerPreviewingDelegate</code>,å®ç°æ–¹<code>func previewingContext(previewingContext: UIViewControllerPreviewing, viewControllerForLocation location: CGPoint) -&gt; UIViewController?</code>å’Œ<code>func previewingContext(previewingContext: UIViewControllerPreviewing, commitViewController viewControllerToCommit: UIViewController)</code>,<br>çœ‹ä»£ç :</p>
<p>â‘ è¿™ä¸€éƒ¨åˆ†å…¶å®å°±ä¸¤ä¸ªæ­¥éª¤</p>
<ul>
<li>1.ç»™3D Touch ä½ è¦é¢„è§ˆçš„ViewController</li>
<li>2.è®¾å®š3D Touché¢„è§ˆæ§åˆ¶å™¨çš„å°ºå¯¸å¤§å°</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">func previewingContext(previewingContext: UIViewControllerPreviewing, viewControllerForLocation location: CGPoint) -&gt; UIViewController? &#123;</div><div class="line">        </div><div class="line">        </div><div class="line">        //-----è¿™ä¸€è¿‡ç¨‹è¿™ä¹ˆç¹ç  è¯´ç™½äº†å°±æ˜¯æ‰¾åˆ°å½“å‰æ‰‹æŒ‡ç‚¹åˆ°çš„ tableviewCellï¼Œåé¢ 3Dtouch é¢„è§ˆçš„æ—¶å€™ä¼šç”¨åˆ° åŸå°ºå¯¸ cell.frame</div><div class="line">        let index = Int( showCollectionView.contentOffset.x / SCREEN_WIDTH )</div><div class="line">        let collectionViewCell = showCollectionView.cellForItemAtIndexPath(NSIndexPath(forRow: 0, inSection: index))</div><div class="line">        var tableView = UITableView()</div><div class="line">        for aview in collectionViewCell!.contentView.subviews &#123;</div><div class="line">            if aview.isKindOfClass(UITableView.self) &#123;</div><div class="line">                tableView = aview as! UITableView</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        //*******</div><div class="line">        </div><div class="line">        let indexPath = tableView.indexPathForRowAtPoint(location)</div><div class="line">        let cell = tableView.cellForRowAtIndexPath(indexPath!) as! HomeCell</div><div class="line">        </div><div class="line">        let detailListContrller = ListDetailViewController(listId: &quot;1872&quot;,transImage: cell.imgView.image!)</div><div class="line">        </div><div class="line">    </div><div class="line">        //é¢„æ˜¾ç¤ºçš„å°ºå¯¸</div><div class="line">        detailListContrller.preferredContentSize = CGSizeMake(SCREEN_WIDTH, 600)</div><div class="line">        //æºå°ºå¯¸</div><div class="line">        previewingContext.sourceRect = cell.frame</div><div class="line">        </div><div class="line">        return detailListContrller</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>â‘¡å¯¹å³å°†é¢„è§ˆçš„ViewControllerï¼Œåšä¸€äº›æ“ä½œï¼Œæ¯”å¦‚<strong>éšè—tabbarï¼Œéšè—å¯¼èˆªæ </strong>ç­‰ç­‰ï¼Œç„¶åæ˜¾ç¤ºå‡ºæ¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">func previewingContext(previewingContext: UIViewControllerPreviewing, commitViewController viewControllerToCommit: UIViewController) &#123;</div><div class="line">        showViewController(viewControllerToCommit, sender: self)</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>####å¹¿åœº-å±•ç¤º<br>è®¾è®¡æ€è·¯å¦‚å›¾:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-32d54cd4642191bb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp4c3452b2.png"></p>
<p>######ä¸é¦–é¡µç›¸ä¼¼ï¼Œçº¢è‰²éƒ¨åˆ†Viewæ˜¯è“è‰² mainCollectionViewçš„headerViewï¼Œçº¢è‰²Viewä¸­åˆåŒ…å«ç€ä¸€ä¸ªcollectionView</p>
<p>######ä¸‹æ‹‰åˆ·æ–°æ§ä»¶ï¼š </p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-99ce105df96fba14.gif?imageMogr2/auto-orient/strip" alt="ä¸‹æ‹‰åˆ·æ–°æ§ä»¶.gif"><br>Tips:ä¸‹æ‹‰åˆ·æ–°æ§ä»¶ ä½¿ç”¨SVPullToRefresh æ¡†æ¶ï¼Œç„¶ååœ¨å®ƒçš„æ–‡ä»¶ä¸­ä¿®æ”¹äº†ä¸€ä¸ªæ–¹æ³•ï¼ŒæŠŠè‡ªå·±æƒ³è¦å‡ºç°çš„åŠ¨å›¾åŠ äº†è¿›å»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">- (SVPullToRefreshArrow *)arrow &#123;</div><div class="line">    if(!_arrow) &#123;</div><div class="line">		_arrow = [[SVPullToRefreshArrow alloc]initWithFrame:CGRectMake(0, self.bounds.size.height-54, 22, 48)];</div><div class="line">        _arrow.backgroundColor = [UIColor clearColor];</div><div class="line">              //å°†æ¡†æ¶è‡ªå¸¦çš„åˆ·æ–°ç®­å¤´å±è”½æ‰</div><div class="line">//		[self addSubview:_arrow];</div><div class="line">        </div><div class="line">        //è¿™ä¸€éƒ¨åˆ†æ˜¯æˆ‘è‡ªå®šä¹‰æ˜¾ç¤ºçš„View</div><div class="line">        UIImageView *gifImgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, self.bounds.size.height-54, 125, 125)];</div><div class="line">        self.clipsToBounds = YES;</div><div class="line">        gifImgView.backgroundColor = [UIColor whiteColor];</div><div class="line">        gifImgView.image = [UIImage sd_animatedGIFNamed:@&quot;refreshGif&quot;];</div><div class="line">        //è®¾ç½®åˆ·æ–°åŠ¨å›¾åªåœ¨LoadingçŠ¶æ€ä¸‹æ˜¾ç¤º</div><div class="line">        [self setCustomView:gifImgView forState:SVPullToRefreshStateLoading];</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    return _arrow;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>####ç§€å‡ºè‡ªæˆ‘<br>è¿™ä¸€éƒ¨åˆ†çš„å®ç°æ€è·¯æ¯”è¾ƒç®€å•<br>1.åœ¨appdelegateä¸­ï¼Œå®ç°tabbarControllerDelegateæ–¹æ³•,<code>shouldSelectViewController</code>ä¸­ï¼Œåˆ¤æ–­æ¯æ¬¡ç‚¹å‡»çš„æ˜¯ä¸æ˜¯ShowMeController,å¦‚æœæ˜¯,åˆ™è¿”å›falseï¼Œç„¶ååœ¨å½“å‰çš„æ§åˆ¶å™¨<code>viewController.presentViewController(ShowMeViewController, animated: true, completion: nil)</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">func tabBarController(tabBarController: UITabBarController, shouldSelectViewController viewController: UIViewController) -&gt; Bool &#123;</div><div class="line">        </div><div class="line">        </div><div class="line">        let childArray = tabbarController.childViewControllers</div><div class="line">        let index = childArray.indexOf(viewController)</div><div class="line">        if index == 2 &#123;</div><div class="line">            print(&quot;Show me!&quot;)</div><div class="line">            presentShowMeViewController(viewController)</div><div class="line">            return false</div><div class="line">        &#125;else if index == 3 &#123;</div><div class="line">            //ç‚¹å‡» &apos;æ¶ˆæ¯ä¸­å¿ƒ&apos; å»¶è¿Ÿ5s åå‘å‡ºé€šçŸ¥</div><div class="line">            //æ¨¡æ‹Ÿç½‘ç»œåˆ·æ–°</div><div class="line">            viewController.tabBarItem.title = nil</div><div class="line">            postNotificationCenter(tabbarController.viewControllers!)</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        return true</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>2.å¯¹äºè°ƒç”¨ç…§ç›¸æœºçš„æ–¹æ³•ï¼Œé¦–å…ˆåˆ¤æ–­æœ‰æ²¡æœ‰æ‘„åƒå¤´<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">if UIImagePickerController.isSourceTypeAvailable(UIImagePickerControllerSourceType.Camera) &#123;</div><div class="line">            imagePicker.sourceType = UIImagePickerControllerSourceType.Camera</div><div class="line">            presentViewController(imagePicker, animated: true, completion: nil)</div><div class="line">        &#125;else &#123;</div><div class="line">            TipView.showMessage(&quot;éªšå¹´ï¼Œæ‰¾ä¸ªæœ‰æ‘„åƒå¤´çš„æ‰‹æœºå§ã€‚ã€‚&quot;)</div><div class="line">        &#125;</div></pre></td></tr></table></figure></p>
<p>ç„¶åviewControllerä¸­æ·»åŠ ä»£ç† <code>UIImagePickerControllerDelegate,UINavigationControllerDelegate</code><br>åœ¨ä»£ç†æ–¹æ³•ä¸­å¯ä»¥è·å–åˆ°åˆšæ‹å¥½çš„å›¾ç‰‡è¿›è¡Œå¤„ç†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">func imagePickerController(picker: UIImagePickerController, didFinishPickingImage image: UIImage, editingInfo: [String : AnyObject]?) &#123;</div><div class="line">        dispatch_async(dispatch_get_main_queue()) &#123; () -&gt; Void in</div><div class="line">            picker.dismissViewControllerAnimated(true, completion: nil)</div><div class="line">            self.topView.headerImage = image</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>####æ¶ˆæ¯è¿™ä¸€éƒ¨åˆ†å°±å¾ˆå°‘ä¸œè¥¿äº†ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰ç²‰ä¸ï¼Œæ²¡æœ‰æ¶ˆæ¯ğŸ˜‚ï¼Œ<br>ä¸ºäº†æ¨¡æ‹Ÿåå°å‘é€æ¶ˆæ¯ï¼Œåœ¨tabBarControllerçš„â€shouldSelectViewControllerâ€ä¸­ï¼Œå½“ç‚¹å‡»è¯¥æ§åˆ¶å™¨æ—¶ï¼Œappdelegateå‘å‡ºé€šçŸ¥ï¼ŒMessageViewControllerä¸­æ¥æ”¶é€šçŸ¥ï¼Œæç¤ºç”¨æˆ·æ”¶åˆ°æ¶ˆæ¯<br><code>//æ¥å— æ¨¡æ‹Ÿåå°çš„æ¨é€ã€ã€ã€ã€
        NSNotificationCenter.defaultCenter().addObserver(self, selector: &quot;hasNewMessage&quot;, name: UserHasNewMessage, object: nil)</code></p>
<p>æ”¶åˆ°é€šçŸ¥ä»¥åæ‰§è¡Œçš„æ–¹æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">func hasNewMessage()&#123;</div><div class="line">        print(&quot;æ”¶åˆ°é€šçŸ¥äº†ã€‚&quot;)</div><div class="line">        TipView.showMessage(&quot;æ‚¨æœ‰æ–°çš„æ¶ˆæ¯ã€‚ä½†æ˜¯ä½ çœ‹ä¸è§ğŸ˜œ&quot;)</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>####ä¸ªäººä¸­å¿ƒ<br>è¿™ä¸€éƒ¨åˆ†è®¾è®¡æ€è·¯ä¸å¹¿åœºç±»ä¼¼ï¼Œä¹Ÿéƒ½æ˜¯ä¸Šé¢æ˜¯HeaderViewï¼Œä¸‹é¢æ˜¯UICollectionView,ä¸åŒçš„æ˜¯ä¸ªäººä¸­å¿ƒæœ€ä¸Šé¢æœ‰ä¸€ä¸ªèƒŒæ™¯å›¾ç‰‡ï¼Œä¼šéšç€collectionViewçš„contentOffSetå˜åŒ–è€Œæ”¾å¤§<br>è®¾è®¡æ€è·¯ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1299512-c373856c19d81113.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp2ae3bf03.png"></p>
<p>1.é»„è‰²Viewä¸º UIImageViewï¼Œå¤„äºæ•´ä¸ªViewçš„ä¸‹å±‚ï¼ŒcollectionViewå’Œå®ƒçš„headerViewçš„<code>backgroundColor = UIColor.clearColor()</code><br>æœ€ååœ¨<code>func scrollViewDidScroll(scrollView: UIScrollView)</code>ä¸­è°ƒæ•´ backImageViewçš„<code>transform</code>å±æ€§å³å¯<br>2.å…³äºåœé é—®é¢˜ï¼Œ<br><img src="http://upload-images.jianshu.io/upload_images/1299512-5d605f459c2474c4.gif?imageMogr2/auto-orient/strip" alt="åœé é—®é¢˜.gif"><br>ä¸Šå›¾<br><img src="http://upload-images.jianshu.io/upload_images/1299512-baff52f142491aee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp19a4b2b9.png"><br>,å§‘ä¸”å«å®ƒ<code>titleView</code>, titleViewæ»šåˆ°è®¾å®šä½ç½®æ—¶ä¼šåœé åˆ°å¯¼èˆªæ åº•ä¸‹ï¼Œæ€è·¯å¦‚ä¸‹ï¼š</p>
<ol>
<li>titleViewæ˜¯æ·»åŠ åˆ°headerViewä¸­çš„ï¼Œåœ¨<code>scrollViewDidScroll</code>æ–¹æ³•ä¸­ï¼Œç›‘å¬collectionViewçš„<code>contentOffset.y</code>çš„å˜åŒ–ï¼Œå½“titleViewåˆ°è¾¾è®¾å®šçš„ä½ç½®æ—¶ï¼Œ<code>titleView.removeFromSuperview()</code>,ç„¶åè®¡ç®—frameï¼Œå°†å…¶æ·»åŠ åˆ°Viewä¸Šï¼Œè¿™æ ·å°±åšé™¤äº†åœé çš„æ•ˆæœï¼Œè¿™æ ·åšæ¯”è¾ƒç®€å•<br>ğŸ˜¥:  åˆšå¼€å§‹æˆ‘å•ç‹¬å°†titleViewæ·»åŠ åˆ°viewä¸Šï¼ŒcollectionViewæ»‘åŠ¨æ—¶è¿˜å¾—ä¸€ç›´æ›´æ”¹<code>titleView.frame</code></li>
</ol>
<p>##èŠèŠæ„Ÿæƒ³å“ˆ<br>å…¶å®ä»OCè½¬å‘Swiftéå¸¸ç®€å•ï¼Œè¿™ä¸ªé¡¹ç›®ä¸éš¾ï¼Œå¾ˆé€‚åˆä»OCè½¬å‘swiftï¼Œæˆ–swiftåˆå­¦è€…ã€‚<br>å°‘å¹´ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡å‘å¸ƒè‡ªå·±çš„é¡¹ç›®ï¼Œå¿˜è€é¸Ÿè½»æ‹ï¼Œæ–°æ‰‹å…±å‹‰,æœ‰ä»€ä¹ˆé—®é¢˜æˆ–bugè”ç³»æˆ‘å“ˆï¼Œæ¬¢è¿æ¥<a href="https://github.com/jiachenmu/Swift-BanTang" target="_blank" rel="external">æˆ‘çš„GitHub</a>ä¸Šèµä¸ªStarğŸŒŸ</p>
<p>##GitHub ä»£ç ä¸‹è½½åœ°å€<br><a href="https://github.com/jiachenmu/Swift-BanTang.git" target="_blank" rel="external">ä»£ç ä¸‹è½½åœ°å€,ç»™ä¸ªstarå†èµ°ğŸ™</a><br><strong>ç›´æ¥æ‰“å¼€è¿è¡Œå·¥ç¨‹</strong><br>ï¿¼<img src="http://upload-images.jianshu.io/upload_images/1299512-d0b3d3c1fcd7ed7a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp1cbb03b9.png"></p>
<p>##æ”¶åˆ°æœ‰ç«¥é‹ååº”è¯´ï¼Œä¼šé‡åˆ°è¿™æ ·çš„Bugå¯¼è‡´æ— æ³•è¿è¡Œ<br><img src="http://upload-images.jianshu.io/upload_images/1299512-767663cc96358060.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp788532b0.png"></p>
<p>Tipsï¼šç”±äºGitHubä¸Šä¼ çš„é—®é¢˜ï¼Œè§£å†³åŠæ³•å¦‚ä¸‹ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-ff192623db0d0fd8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp44a0f1ff.png"></p>
<p>###é¡¹ç›®ç¼–å†™ä¸­ç”¨çš„åˆ‡å›¾ã€æ ‡æ³¨ã€åŠæœ¬åœ°æ•°æ®åœ¨æˆ‘çš„ç™¾åº¦äº‘</p>
<p><a href="http://pan.baidu.com/s/1dDZYetV" target="_blank" rel="external">åˆ‡å›¾ã€æ•°æ®ä¸‹è½½åœ°å€-ManoBppçš„ç™¾åº¦äº‘</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift2-0-é«˜ä»¿App-åŠå¡˜/">Swift2.0 é«˜ä»¿App åŠå¡˜</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-iOSï¼Œå¦‚ä½•æ¨¡ä»¿ä¸€ä¸ªApp" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/04/iOSï¼Œå¦‚ä½•æ¨¡ä»¿ä¸€ä¸ªApp/" class="article-date">
      <time datetime="2016-03-04T02:42:00.000Z" itemprop="datePublished">2016-03-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/04/iOSï¼Œå¦‚ä½•æ¨¡ä»¿ä¸€ä¸ªApp/">iOSï¼Œå¦‚ä½•æ¨¡ä»¿ä¸€ä¸ªApp</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>##å‰è¨€<br>ä½œä¸ºä¸€ä¸ªIOSç¨‹åºå‘˜ï¼Œé—²çš„æ—¶å€™ä¹Ÿæƒ³è‡ªå·±åšä¸€ä¸ªappç»ƒç»ƒæ‰‹ï¼Œåˆè‹¦äºæ²¡æœ‰UIè®¾è®¡ï¼Œä¹Ÿæ²¡æœ‰å¥½çš„ideaï¼Œæ‰€ä»¥åªèƒ½å…ˆæ¨¡ä»¿åˆ«äººçš„Appäº†ï¼Œä½†æ˜¯ä¹Ÿä¼šé‡åˆ°ä»¥ä¸‹é—®é¢˜<br><strong><br>â‘ ä¸çŸ¥é“æ€ä¹ˆå…¥æ‰‹ï¼Ÿæ€ä¹ˆè®¾è®¡
</strong><br><strong><br>â‘¡appä¸­çš„ç´ æã€å›¾æ ‡è¦è‡ªå·±æ‰¾å—ã€æ²¡æœ‰UIå¦¹å­ç»™ä½ åˆ‡å›¾æ€ä¹ˆåŠï¼Œ
</strong><br><strong><br>â‘¢æ²¡æœ‰æ•°æ®æ€ä¹ˆåŠï¼Ÿå‡æ•°æ®ä¹Ÿä¸ä¼šåšæ€ä¹ˆåŠ
</strong><br><strong><br>â‘£ç¼–å†™ç¨‹åºä¸­è¯¥æ³¨æ„äº›ä»€ä¹ˆ
</strong></p>
<p>###<strong> ä»¥ä¸‹å°±ä»ä¸Šé¢çš„ä¸‰ç‚¹å¼€å§‹ä»‹ç»</strong><br>Tips:ä¸€ä¸‹å‡ä¸ºæˆ‘ä¸ªäººçš„è§è§£ï¼Œæœ‰ç–‘é—®æˆ–è€…å»ºè®®è¯·å‘Šè¯‰æˆ‘<br>ä»¥æˆ‘çš„é«˜ä»¿é¡¹ç›®<a href="http://www.jianshu.com/p/7b57eb0c4abe" target="_blank" rel="external">åŠç³–App</a>ä¸ºä¾‹</p>
<p><strong>
</strong></p>
<p>###ä¸€ã€ä¸çŸ¥é“æ€ä¹ˆå…¥æ‰‹ï¼Ÿæ€ä¹ˆè®¾è®¡<br>é¦–å…ˆï¼Œæ•´ä½“æµè§ˆä¸€ä¸‹å®˜æ–¹çš„<a href="http://www.ibantang.com" target="_blank" rel="external">åŠç³–App</a>,</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-d02348459fbb12d0.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="
![
![
![IMG_0095.PNG](http://upload-images.jianshu.io/upload_images/1299512-202a765f086ca351.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)](http://upload-images.jianshu.io/upload_images/1299512-fc3a2b9ccf1b9894.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)](http://upload-images.jianshu.io/upload_images/1299512-ca997e779c4318c4.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)"></p>
<p>ä¸Šé¢å‡ å¼ å›¾ç‰‡åˆ†åˆ«å¯¹åº”çš„æ˜¯ é¦–é¡µã€å¹¿åœºã€æ¶ˆæ¯ä¸­å¿ƒã€ä¸ªäººä¸­å¿ƒï¼Œï¼ŒrootViewControlleræ˜¯ UITabBarController,ä»¥é¦–é¡µä¸ºä¾‹</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-69ab39b354c62f1c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp696dc36e.png"><br>Tips:</p>
<ul>
<li>1 æ•´ä½“ä¸Šåˆ†ä¸º ä¸¤å¤§éƒ¨åˆ† headerView å’ŒUICollectionView</li>
<li>2 æ¯æ¬¡ç‚¹å‡»æ ‡ç­¾ â€œæœ€æ–°â€ â€œçƒ­é—¨â€ç­‰ï¼ŒcollectionView éƒ½ä¼šæ»šåŠ¨åˆ°å¯¹åº”æ ‡ç­¾çš„tableViewä¸­ï¼Œ<br><strong>collectionViewç»“æ„ä¸Šæ¥çœ‹å°±æ˜¯è¿™æ ·ï¼š</strong></li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-1ec9970356f439fe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp59d229d4.png"></p>
<p>ä¹Ÿå°±æ˜¯  tableview æ·»åŠ åˆ°collectionViewCell.contentViewä¸­æ˜¾ç¤ºå‡ºæ¥</p>
<p><em>*headerViewçš„ç»“æ„å¦‚ä¸‹</em><br><img src="http://upload-images.jianshu.io/upload_images/1299512-19dd06f7a0b5f760.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp5b876e7d.png">*<br>è¿™ä¸€éƒ¨åˆ†ç»„åˆçš„è‡ªç”±åº¦è¾ƒå¤§ï¼Œç„¶åæ¯ä¸ªæŒ‰é’®éƒ½è®¾ç½®ä¸åŒtagï¼Œç„¶åæ‰€æœ‰æŒ‰é’®æ·»åŠ ç›¸åŒçš„æ–¹æ³•ï¼Œæ¯”å¦‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (void)clickCenterWithTag:(UIButton *)sender&#123;</div><div class="line">  if(sender.tag == æŒ‰é’®tagå€¼)&#123;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥è®¾ç½®ä¸€ä¸ªblockå›è°ƒï¼Œå‚æ•°ä¸ºæŒ‰é’®tagå€¼ï¼Œåœ¨ViewControllerä¸­ ç»™blockèµ‹å€¼çš„æ—¶å€™ï¼Œæ¯”å¦‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">headerView.clickCenterBlock = ^(Int tag)&#123;</div><div class="line">  //åœ¨è¿™é‡Œè¿›è¡Œåˆ¤æ–­ï¼Œtagç­‰äºå¤šå°‘ï¼Œè¿›è¡Œä»€ä¹ˆæ“ä½œ</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¿˜æœ‰é€šçŸ¥ã€delegateç­‰æ–¹æ³•éƒ½å¯ä»¥ï¼Œå°±ä¸ä¸€ä¸€ç»†è¯´äº†ã€‚ã€‚</p>
<p>#####ä¹‹åçš„é¡µé¢æ²¡æœ‰å¤ªè¿‡äºå¤æ‚çš„ç»“æ„ï¼Œå¯¹ç…§é¦–é¡µï¼Œä¹Ÿå¯ä»¥ä¸€ä¸€å°†Viewå‰¥ç¦»å‡ºæ¥<br><strong>
</strong></p>
<p>###äºŒã€appä¸­çš„ç´ æã€å›¾æ ‡è¦è‡ªå·±æ‰¾å—ã€æ²¡æœ‰UIå¦¹å­ç»™ä½ åˆ‡å›¾æ€ä¹ˆåŠ</p>
<p>######â‘   appä¸­å¥½å¤šæŒ‰é’®çš„å›¾æ ‡ã€èƒŒæ™¯å›¾ç‰‡å“ªé‡Œæ‰¾<br><strong>å¤§æ‹›</strong>ï¼šç”µè„‘ä¸Šåœ¨iTunesä¸­ä¸‹è½½ä½ è¦æ¨¡ä»¿çš„appï¼Œæ‰¾åˆ°å®ƒçš„å­˜å‚¨ç›®å½•(å…·ä½“æ–¹æ³•ç™¾åº¦ã€‚)<br><img src="http://upload-images.jianshu.io/upload_images/1299512-7593ba963100b291.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp09a816eb.png"><br>æ¥ç€ï¼ŒæŠŠ åç¼€.ipa æ”¹ä¸º.zip ,ç„¶åæŠŠ zipæ–‡ä»¶æ‰“å¼€</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-88813da3b9ed3f1a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp062cdaed.png"><br>æ˜¾ç¤ºåŒ…å†…å®¹åï¼Œå¯ä»¥çœ‹åˆ°å¤§éƒ¨åˆ†ä½ æ‰€éœ€è¦çš„ç´ æå›¾ç‰‡äº†</p>
<p>######â‘¡  åˆ‡å›¾æ ‡æ³¨é—®é¢˜(åˆ‡å›¾æˆ‘å°±ä¸è¯´äº†ï¼Œæˆ‘åªä¼šæˆªå›¾ï¼Œpsä»€ä¹ˆçš„éƒ½ä¸ä¼š)<br>æ‰‹æœºå®‰è£…ä½ è¦æ¨¡ä»¿çš„appï¼Œç„¶åæˆªå±ï¼ŒæŠŠå›¾ç‰‡å‘åˆ°ç”µè„‘ä¸Šï¼Œç„¶åå®‰è£…<strong>Mark Man</strong>å·¥å…·ï¼Œ</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-e6278fa083cfbac7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp1e090874.png"><br>ï¼Œç„¶åå°†å›¾ç‰‡æ‹–åˆ°Mark Manä¸­ï¼Œ</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-ff66476405710e99.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp1be40fe1.png"></p>
<p>ç„¶åå°±å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°æ ‡æ³¨ï¼Œå–è‰²ç­‰ç­‰<br><strong>
</strong></p>
<p>###ä¸‰ã€æ²¡æœ‰æ•°æ®æ€ä¹ˆåŠï¼Ÿè¯¥æ€ä¹ˆå»æŠ“åŒ…<br>æ²¡æœ‰æ•°æ®æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š<br>â‘  åšå‡æ•°æ®ï¼Œæ•°æ®å†™æ­»ï¼Œè¿™ä¸ªä¸æ˜¯å¾ˆç°å®ï¼Œå› ä¸ºä½ è¦æ¨¡ä»¿çš„appè‚¯å®šæœ‰å›¾ç‰‡ï¼Œè¿™ä¹ˆåšå‡æ•°æ®å¾—åˆ°çŒ´å¹´é©¬æœˆã€‚ã€‚ã€‚<br>â‘¡ æŠ“åŒ…ï¼Œå…¶å®è¿‡ç¨‹ä¸æ˜¯å¾ˆç¹ç<br>ä¸‹é¢è®²ä¸€ä¸‹æŠ“åŒ…çš„è¿‡ç¨‹ï¼š</p>
<h4 id="1-å·¥å…·"><a href="#1-å·¥å…·" class="headerlink" title="* 1 å·¥å…·"></a>* 1 å·¥å…·</h4><p><img src="http://upload-images.jianshu.io/upload_images/1299512-a5ea0ed9c0ba754c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp4f89f5bc.png"></p>
<p>Charles ç™¾åº¦ä¸Šå¾ˆå¤šå¯ä»¥ä¸‹è½½ï¼Œè¯•ç”¨ç‰ˆå³å¯ï¼Œä¸éœ€è¦ç ´è§£</p>
<p><strong>ä½¿ç”¨è¿‡ç¨‹:</strong></p>
<p>######â‘ å°†æ‰‹æœºå’Œç”µè„‘è¿ä¸ŠåŒä¸€ä¸ªwifiï¼Œæ‰“å¼€æŠ“åŒ…å·¥å…·</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-e5025717b7666b80.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp1be62615.png"></p>
<p>######â‘¡æ‰“å¼€åŠç³–app<br><img src="http://upload-images.jianshu.io/upload_images/1299512-45f1dd3ca0742236.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp11e3e193.png"></p>
<p>æŠ“åˆ°åŠç³–appçš„æ•°æ®ï¼Œç‚¹è¿›å»å¦‚ä¸‹ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-1092bf90c5678583.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp6226dd3d.png"><br>è¿™å°±æ˜¯åŠç³–appçš„æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰ä½ æƒ³è¦çš„ï¼Œåˆ«æ€¥ï¼Œä½ å…ˆæµè§ˆä½ è¦æŠ“æ•°æ®çš„é¡µé¢ï¼Œè¿™æ—¶å€™ä¼šå‘ç°è¿™ä¸ªç›®å½•æœ‰æ–°çš„æ•°æ®è¿”å›ï¼Œç‚¹è¿›å»å¯ä»¥çœ‹åˆ°<br><img src="http://upload-images.jianshu.io/upload_images/1299512-24e906d1350288ac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp7a92a51b.png"></p>
<p>ç‚¹å‡»  JavaScriptæŒ‰é’®å¯ä»¥çœ‹åˆ°åŸå§‹çš„jsonæ•°æ®</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-7f6120f56d33748f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp7e5e4b14.png">ï¼Œ<br>å°†jsonæ•°æ® æ‹·è´åˆ°æ–‡ä»¶ä¸­å­˜å‚¨èµ·æ¥ï¼Œè¿™å°±æ˜¯æœ¬åœ°æ•°æ®</p>
<p>â‘¡ä¸‹é¢è¯´ä¸€ä¸‹ <strong>å¦‚ä½•è§£ææ•°æ®</strong>ï¼Œä»¥swiftä¸ºä¾‹ï¼ŒOCç±»ä¼¼å‚è€ƒä¸€ä¸‹ã€‚<br>æ¯”å¦‚æˆ‘ä»¬å°†åˆšåˆšçš„jsonå­˜ä¸º test.rtf(åˆ«é—®æˆ‘ä¸ºä»€ä¹ˆæ˜¯rtfï¼Œå› ä¸ºmacä¸Šè®°äº‹æœ¬åªæœ‰è¿™ä¹ˆä¸€ä¸ª,å½“ç„¶ä½ ä¹Ÿå¯ä»¥å­˜ä¸ºtxtæ ¼å¼ç­‰)ï¼Œç„¶åæŠŠtest.rtfæ‹–åˆ°é¡¹ç›®ä¸­æ¥</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-c85e52b34db68ea9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp4554b12a.png"><br>ä¸Šä»£ç ï¼š<br>Tips: åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ˜ç™½ä¸€ç‚¹ï¼Œå­—å…¸å³ä¸ºå¯¹è±¡çš„ä¸€ç§è¡¨ç°å½¢å¼ã€‚<br>å…ˆæŠŠæ¨¡å‹å†™å¥½ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">class TopicModel: NSObject &#123;</div><div class="line">  //å…ˆå†™ä¸¤ä¸ªå±æ€§</div><div class="line">  var id: String?</div><div class="line">  var title: String?</div><div class="line"></div><div class="line">  //ä»jsonä¸­è¯»å–æ•°æ® å¹¶ç»™modelèµ‹å€¼(ä»¥ä¸‹ä¸ºSwiftä»£ç ï¼ŒOCè¯·å‚è€ƒ)ï¼Œå°è£…æˆç±»æ–¹æ³•æ›´æ–¹ä¾¿</div><div class="line">  class fun readDataFromJSON() -&gt; TopicModel&#123;</div><div class="line">    //åˆ›å»ºè¿”å›çš„model </div><div class="line">    let topicModel = TopicModel()</div><div class="line">    //è¯»å–JSONæ–‡ä»¶</div><div class="line">    let path = NSBundle.mainBundle().pathForResource(&quot;test&quot;, ofType: &quot;rtf&quot;)</div><div class="line">    let nsData = NSData(contentsOfFile: path!)</div><div class="line">     /// jsonæ•´ä½“è½¬æ¢ä¸ºå­—å…¸</div><div class="line">     let Dict = ( try! NSJSONSerialization.JSONObjectWithData(nsData!, options:.AllowFragments) ) as! NSDictionary</div><div class="line"></div><div class="line">  //çœ‹ä¸Šé¢çš„å›¾ç‰‡ä¸­ï¼Œä½ è¦æŠ“å¾—æ•°æ®å¤„äº å››å±‚ç›®å½•ä¸‹ï¼Œä¸€æ­¥ä¸€æ­¥æ¥</div><div class="line"></div><div class="line">  //å…ˆæŠŠ &quot;data&quot;ä»jsonæ–‡ä»¶ä¸­ å‰¥ç¦»å‡ºæ¥</div><div class="line">    let Data = Dict.objectForKey(&quot;data&quot;) as! NSDictionary</div><div class="line">  </div><div class="line">  //ä»Data ä¸­æŠŠ &quot;topic&quot;æ•°ç»„å‰¥ç¦»å‡ºæ¥,ç”±å›¾ç‰‡å¯ä»¥çœ‹åˆ° topicæ˜¯ä¸€ä¸ªæ•°ç»„ ï¼Œå­˜äº†å¥½å¤šä¸ªç›¸åŒç±»å‹çš„æ•°æ®</div><div class="line">    let topicData = Data.objectForKey(&quot;topic&quot;) as! NSArray</div><div class="line"></div><div class="line">  //topicæ•°æ®å·²ç»è·å–ï¼Œæˆ‘ä»¬å…ˆå°†ç¬¬ä¸€ä¸ªå…ƒç´ å‰¥ç¦»å‡ºæ¥ï¼Œ</div><div class="line">  // å®šä¹‰ä¸€ä¸ªobjectå¯¹è±¡,å¹¶è½¬æ¢ä¸ºå­—å…¸ç±»å‹</div><div class="line">  let obj = topicData[0] as! NSDictionary</div><div class="line">    </div><div class="line">// ç°åœ¨å°†objå­—å…¸çš„å€¼ èµ‹ç»™ æˆ‘ä»¬å®šä¹‰çš„topicModel</div><div class="line">  topicModel.id = obj.objectForKey(&quot;id&quot;) as? String</div><div class="line">  topicModel.title = obj.objectForKey(&quot;title&quot;) as? String</div><div class="line"></div><div class="line">    //end: åˆ°ç°åœ¨ ç»™modelèµ‹å€¼å°±å¯ä»¥äº†ï¼Œè¿”å›modelå³å¯</div><div class="line"></div><div class="line">  return topicModel</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>åœ¨éœ€è¦ç”¨åˆ°modelçš„åœ°æ–¹ï¼Œç›´æ¥è°ƒç”¨ Topic.readFromJSON å°±ä¼šè¿”å›ä½ è¦çš„model</p>
<p><strong>ç°åœ¨çœ‹æ¥ï¼ŒæŠ“åŒ…å¹¶æ²¡æœ‰æˆ‘ä»¬æƒ³è±¡ä¸­çš„ç¹ç </strong></p>
<p>###å››ã€ç¼–å†™ç¨‹åºåº”è¯¥æ³¨æ„ä»€ä¹ˆ<br>Tips: è¿™ä¸€éƒ¨åˆ†åªæ˜¯å‚ç…§æˆ‘çš„ç»éªŒæ¥çœ‹ï¼Œå¦‚æœ‰å»ºè®®æˆ–è€…æ„è§è¯·ä¸æˆ‘äº¤æµï¼Œæœ›ä¸åèµæ•™</p>
<p>#####<strong>â‘  ä»£ç å°½é‡è¦å¤ç”¨ï¼Œå°è£…æ§ä»¶å‰çœ‹çœ‹æ˜¯å¦å‡ ä¸ªæ§ä»¶ç›¸ä¼¼ï¼Œå¯ä»¥æ”¾åˆ°ä¸€èµ·ï¼Œæ¯”å¦‚ï¼š</strong></p>
<p>è¿™ä¸ªæ˜¯ å¹¿åœºä¸­çš„æ ‡ç­¾æ <br><img src="http://upload-images.jianshu.io/upload_images/1299512-6f0e6bcb53bfa569.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp154d38d0.png"></p>
<p>è¿™ä¸ªæ˜¯ä¸ªäººä¸­å¿ƒçš„æ ‡ç­¾æ </p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-bfbd47b136aaa47b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp05e7ce45.png"></p>
<p>è¿™ä¸ªæ˜¯æ¸…å•è¯¦æƒ…çš„æ ‡ç­¾æ </p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-7af7cce080989029.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp69f75d0d.png"></p>
<p>ä¸‰ä¸ªæ§ä»¶æœ‰ä¸ç›¸åŒçš„åœ°æ–¹ï¼Œæ¯”å¦‚æ ‡ç­¾ä¸­çš„åˆ†å‰²çº¿ï¼Œä¸Šé¢çš„è¾¹æ¡†ï¼Œå­—ä½“å¤§å°ï¼Œ<strong>ä½†æ˜¯</strong>ï¼Œæ§ä»¶ä¸­çš„æ‰€æœ‰é€»è¾‘éƒ½ä¸€æ ·ï¼Œè¿™å°±å¤Ÿäº†ï¼Œå¯ä»¥å†™ä¸€ä¸ªæ§ä»¶ï¼ŒåŠ ä¸€äº›å‚æ•°ï¼Œæ¯”å¦‚è¯´ æ˜¯å¦æ˜¾ç¤ºè¾¹æ¡†ï¼Œframeå¤§å°ï¼Œä¸­é—´æ˜¯å¦æœ‰åˆ†å‰²çº¿ï¼Œè¿™æ ·åšçš„è¯ï¼Œå°è£…ä¸€ä¸ªæ§ä»¶å°±å¯ä»¥æ»¡è¶³ æ•´ä¸ªappä¸­ç±»ä¼¼çš„æ§ä»¶</p>
<p>#####<strong>â‘¡ æ–¹æ³•ï¼Œæˆ–è€…ç§°ä¹‹ä¸ºå‡½æ•°ï¼Œå°è£…ä¹Ÿå°½é‡æ”¾åˆ°ä¸€èµ·ï¼Œæ¯”å¦‚</strong><br>appä¸­æœ‰å¾ˆå¤šå¯¹å›¾ç‰‡è¿›è¡Œçš„æ“ä½œï¼Œè¯¸å¦‚ æ”¾å¤§ï¼Œè£å‰ªï¼ŒåŠ è¾¹æ¡†ï¼Œå¯ä»¥è¿™æ ·ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//å°† è¿™äº›æ–¹æ³•éƒ½å°è£…ä¸º ç±»æ–¹æ³• ï¼ŒOCä¸­ä¹Ÿå°±æ˜¯ &quot;+&quot;æ–¹æ³•</div><div class="line">class ImageOperationCenter: NSObejct &#123;</div><div class="line"></div><div class="line">    class func ScaleToFize(image: UIImage) -&gt; UIImage &#123;</div><div class="line">      //å¯¹å›¾ç‰‡è¿›è¡Œè£å‰ªå¤„ç†ï¼Œå¹¶è¿”å›</div><div class="line">    &#125;</div><div class="line">    class func MakeScale(image: UIImage,scale: CGFloat) -&gt; UIImage &#123;</div><div class="line">      //å¯¹å›¾ç‰‡è¿›è¡Œæ”¾å¤§å¤„ç†ï¼Œå¹¶è¿”å›</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Tipsï¼šå¦‚ä¸Šï¼Œå°†å¯¹å›¾ç‰‡çš„å¤„ç†æ–¹æ³•ï¼Œéƒ½æ”¾åœ¨ <code>ImageOperationCenter</code> è¿™ä¸ªç±»ä¸­ï¼Œè°ƒç”¨çš„æ—¶å€™åªéœ€è¦åƒè¿™æ · <code>let image = ImageOperationCenter.MakeScale(æºç…§ç‰‡ï¼Œæ”¾å¤§å€æ•°)</code>å³å¯ï¼Œç”¨ç€ä¹Ÿæ–¹ä¾¿</p>
<p>#####<strong>â‘¢ ä¸ç¬¬ä¸€ç‚¹ç±»ä¼¼ï¼Œå¾ˆå¤šç›¸ä¼¼çš„æ§ä»¶ï¼ŒCellå°½é‡å¤ç”¨</strong><br>è¯¸å¦‚ <img src="http://upload-images.jianshu.io/upload_images/1299512-7af7cce080989029.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp69f75d0d.png"><br>åŠç³–ç²¾é€‰çš„cell  ä¸ ç”¨æˆ·æ¨èçš„cell ç±»ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸åŒçš„åœ°æ–¹ï¼Œè€Œä¸”ç”¨åˆ°çš„modelä¹Ÿä¸åŒï¼Œè¿™æ ·æˆ‘ä»¬å°±è¦é‡å†™ä¸¤ç§cellå—ï¼Œ<strong>ä¸éœ€è¦</strong>ï¼Œåªè¦ â€œç”¨æˆ·æ¨èâ€çš„cell ç»§æ‰¿ â€œåŠç³–ç²¾é€‰â€ çš„cellï¼Œé‡å†™é‡Œé¢çš„æ–¹æ³•å³å¯ï¼Œçœäº†å¥½å¤šåŠŸå¤«ï¼Œæ‰€ä»¥å†™ç¨‹åºä¸€å®š<strong>è¦åœ¨ä¸æŸå¤±è´¨é‡çš„å‰æä¸‹</strong>æ€ä¹ˆçœäº‹æ€ä¹ˆæ¥</p>
<p>######å†æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚<br><img src="http://upload-images.jianshu.io/upload_images/1299512-6ddaca9337de3424.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp63efa8a5.png"></p>
<p>è¿™ä¸ªé€šå¸¸ä¼šå°†å®ƒä½œä¸º<code>collectionView</code>å¤„ç†ï¼Œå…¶å®ï¼Œåªæœ‰8ä¸ªbuttonçš„æƒ…å†µä¸‹ï¼Œå°†buttonå°è£…ä¸ºä¸€ä¸ªViewå³å¯ï¼Œè¿™æ ·ï¼Œ<code>ViewController</code>ä¸­ä¼š<strong>å°‘äº†ä¸€å †ä»£ç†æ–¹æ³•å’Œä¸€å †åˆå§‹åŒ–collectionViewæ–¹æ³•</strong><br>è¿™ä¸ªä¹Ÿå°±å› äººè€Œå¼‚å§ï¼Œè¦çµæ´»è¿ç”¨å“¦~</p>
<p>#####<strong>â‘¤ å…¶å®çœ‹åˆ°ä¸€ä¸ªé¡µé¢è¦å…ˆæŠŠæ•´ä¸ªé¡µé¢çš„ç»“æ„ç¡®å®šå¥½ï¼Œä¸è¦å†™äº†ä¸€åŠæ‰å‘ç°è¿™æ ·å†™å¥½åƒå¤ªéº»çƒ¦ï¼Œæˆ–è€…è¿™æ ·å†™å†™ä¸å‡ºæ¥</strong><br>æˆ‘åœ¨æˆ‘çš„é«˜ä»¿åŠç³–appä¸­ é¦–é¡µå°±é‡åˆ°äº†è¿™æ ·çš„é—®é¢˜ï¼Œå¼€å§‹æƒ³ç€ ç”¨<code>UIScrollView</code>å½“åšå®¹å™¨ï¼Œé‡Œé¢æ·»åŠ <code>UITableView</code>æ˜¾ç¤ºå†…å®¹ï¼Œè¿™æ ·åšæœªå°ä¸å¯ï¼Œä½†æ˜¯è€ƒè™‘åˆ°å¤ç”¨çš„é—®é¢˜ï¼Œå¯ä»¥ç”¨ä¸‰ä¸ªtableViewå®Œæˆå¤ç”¨ï¼Œä½†æ˜¯è¿™æ ·åšè¿‡äºéº»çƒ¦ï¼Œæ‰€ä»¥åæ¥å°±ç”¨collectionViewå½“åšå®¹å™¨ï¼Œå°†tableView æ·»åŠ åˆ°collectionViewCellä¸­æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·å¤ç”¨çš„é—®é¢˜å°±è§£å†³äº†</p>
<p>###å†™åœ¨åé¢çš„è¯<br>æˆ‘çš„å¼€å‘ç»éªŒä¹Ÿä¸å¤šï¼Œä¸Šé¢å®Œå…¨æ˜¯æˆ‘åœ¨åšé¡¹ç›®ä¸­è‡ªå·±çš„æ„Ÿæ‚Ÿå’Œä½“ä¼šï¼Œæœ‰äº›å¯èƒ½ä¼šæœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒå³å¯</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS-æ¨¡ä»¿-App/">iOS æ¨¡ä»¿ App</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 ManoBoo
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >è®¿é—®é‡: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">æœ¬é¡µé˜…è¯»é‡: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>