<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹- åˆ«è¸©ç™½å— | ManoBooçš„æŠ€æœ¯å°çª</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="#iOS-OCé¡¹ç›® åˆ«è¸©ç™½å—(Donâ€™t Tap The White Tile)

##å†™åœ¨å‰é¢çš„è¯
####â‘ åˆ«è¸©ç™½å—æ¸¸æˆç®€ä»‹ï¼š

ã€Šåˆ«è¸©ç™½å—å„¿ Donâ€™t Tap The White Tileã€‹ï¼Œè¿™å°±æ˜¯è¿™ä¸ªæ¸¸æˆå”¯ä¸€çš„ä¸€ä¸ªè§„åˆ™ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸æ–­è¸©ç€é»‘è‰²æ–¹å—å‰è¿›å³å¯ï¼Œå¾ˆç®€å•å§ï¼Ÿè°éƒ½å¯ä»¥ä¼šç©ï¼Œä½†å¹¶ä¸æ˜¯è°éƒ½èƒ½ç©å¾—å¾ˆå¥½å™¢ï¼Œä½ å‘¢ï¼Ÿå¿«æ¥æŒ‘æˆ˜çœ‹çœ‹å§ï¼ç»å…¸æ¨¡å¼ï¼Œä»¥æœ€å¿«çš„é€Ÿåº¦åˆ°è¾¾ç»ˆç‚¹ã€‚è¡—æœºæ¨¡å¼ï¼Œä½ æœ‰èƒ½åŠ›å¾—å¤šå°‘åˆ†å°±å¾—">
<meta property="og:type" content="article">
<meta property="og:title" content="iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹- åˆ«è¸©ç™½å—">
<meta property="og:url" content="http://yoursite.com/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—/index.html">
<meta property="og:site_name" content="ManoBooçš„æŠ€æœ¯å°çª">
<meta property="og:description" content="#iOS-OCé¡¹ç›® åˆ«è¸©ç™½å—(Donâ€™t Tap The White Tile)

##å†™åœ¨å‰é¢çš„è¯
####â‘ åˆ«è¸©ç™½å—æ¸¸æˆç®€ä»‹ï¼š

ã€Šåˆ«è¸©ç™½å—å„¿ Donâ€™t Tap The White Tileã€‹ï¼Œè¿™å°±æ˜¯è¿™ä¸ªæ¸¸æˆå”¯ä¸€çš„ä¸€ä¸ªè§„åˆ™ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸æ–­è¸©ç€é»‘è‰²æ–¹å—å‰è¿›å³å¯ï¼Œå¾ˆç®€å•å§ï¼Ÿè°éƒ½å¯ä»¥ä¼šç©ï¼Œä½†å¹¶ä¸æ˜¯è°éƒ½èƒ½ç©å¾—å¾ˆå¥½å™¢ï¼Œä½ å‘¢ï¼Ÿå¿«æ¥æŒ‘æˆ˜çœ‹çœ‹å§ï¼ç»å…¸æ¨¡å¼ï¼Œä»¥æœ€å¿«çš„é€Ÿåº¦åˆ°è¾¾ç»ˆç‚¹ã€‚è¡—æœºæ¨¡å¼ï¼Œä½ æœ‰èƒ½åŠ›å¾—å¤šå°‘åˆ†å°±å¾—">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1299512-1c86ccf35a745617.gif?imageMogr2/auto-orient/strip">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1299512-81e0e7253713d485.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1299512-76ac222f93784caa.gif?imageMogr2/auto-orient/strip">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1299512-23020b7609d725bd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1299512-4e87160e38bfa764.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1299512-d22eeea07435f018.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2016-06-30T01:30:24.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹- åˆ«è¸©ç™½å—">
<meta name="twitter:description" content="#iOS-OCé¡¹ç›® åˆ«è¸©ç™½å—(Donâ€™t Tap The White Tile)

##å†™åœ¨å‰é¢çš„è¯
####â‘ åˆ«è¸©ç™½å—æ¸¸æˆç®€ä»‹ï¼š

ã€Šåˆ«è¸©ç™½å—å„¿ Donâ€™t Tap The White Tileã€‹ï¼Œè¿™å°±æ˜¯è¿™ä¸ªæ¸¸æˆå”¯ä¸€çš„ä¸€ä¸ªè§„åˆ™ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸æ–­è¸©ç€é»‘è‰²æ–¹å—å‰è¿›å³å¯ï¼Œå¾ˆç®€å•å§ï¼Ÿè°éƒ½å¯ä»¥ä¼šç©ï¼Œä½†å¹¶ä¸æ˜¯è°éƒ½èƒ½ç©å¾—å¾ˆå¥½å™¢ï¼Œä½ å‘¢ï¼Ÿå¿«æ¥æŒ‘æˆ˜çœ‹çœ‹å§ï¼ç»å…¸æ¨¡å¼ï¼Œä»¥æœ€å¿«çš„é€Ÿåº¦åˆ°è¾¾ç»ˆç‚¹ã€‚è¡—æœºæ¨¡å¼ï¼Œä½ æœ‰èƒ½åŠ›å¾—å¤šå°‘åˆ†å°±å¾—">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/1299512-1c86ccf35a745617.gif?imageMogr2/auto-orient/strip">
  
    <link rel="alternative" href="/atom.xml" title="ManoBooçš„æŠ€æœ¯å°çª" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/avatar.png">
  
  
  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- åŠ è½½ç‰¹æ•ˆ -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/avatar.png" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/">ManoBoo</a></h1>
        </hgroup>

        
        <p class="header-subtitle">æ¬¢è¿æ¥ManoBooçš„å°çªåšå®¢</p>
        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>èœå•</li>
                        <li>æ ‡ç­¾</li>
                        
                        
                        <li>å…³äºæˆ‘</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">åšå®¢é¦–é¡µ</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl github" target="_blank" href="https://github.com/jiachenmu" title="github">github</a>
                            
                                <a class="fl Weibo" target="_blank" href="http://weibo.com/u/3484140182?is_all=1" title="Weibo">Weibo</a>
                            
                                <a class="fl NeteaseMusic" target="_blank" href="http://music.163.com/#/user/home?id=79418549" title="NeteaseMusic">NeteaseMusic</a>
                            
                                <a class="fl Jianshu" target="_blank" href="http://www.jianshu.com/users/232094594d02/latest_articles" title="Jianshu">Jianshu</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/CMModel-JSONè½¬Modelå·¥å…·/" style="font-size: 10px;">CMModel JSONè½¬Modelå·¥å…·</a> <a href="/tags/ReactiveCocoa/" style="font-size: 10px;">ReactiveCocoa</a> <a href="/tags/Swift2-0-é«˜ä»¿App-åŠå¡˜/" style="font-size: 10px;">Swift2.0 é«˜ä»¿App åŠå¡˜</a> <a href="/tags/iOS-æ¨¡ä»¿-App/" style="font-size: 10px;">iOS æ¨¡ä»¿ App</a> <a href="/tags/iOSå°é¡¹ç›®-App/" style="font-size: 20px;">iOSå°é¡¹ç›® App</a>
                    </div>
                </section>
                
                
                

                
                
                <section class="switch-part switch-part3">
                
                    <div id="js-aboutme">iOSå¼€å‘è€…ï¼Œå†™ä»£ç æ˜¯ä¸€ä»¶éå¸¸happyçš„äº‹æƒ…ğŸ˜„</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="å›åˆ°ä¸»é¡µ">ManoBoo</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/avatar.png" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="å›åˆ°ä¸»é¡µ">ManoBoo</a></h1>
            </hgroup>
            
            <p class="header-subtitle">æ¬¢è¿æ¥ManoBooçš„å°çªåšå®¢</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">åšå®¢é¦–é¡µ</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="github" target="_blank" href="https://github.com/jiachenmu" title="github">github</a>
                    
                        <a class="Weibo" target="_blank" href="http://weibo.com/u/3484140182?is_all=1" title="Weibo">Weibo</a>
                    
                        <a class="NeteaseMusic" target="_blank" href="http://music.163.com/#/user/home?id=79418549" title="NeteaseMusic">NeteaseMusic</a>
                    
                        <a class="Jianshu" target="_blank" href="http://www.jianshu.com/users/232094594d02/latest_articles" title="Jianshu">Jianshu</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—/" class="article-date">
      <time datetime="2016-06-30T01:29:40.000Z" itemprop="datePublished">2016-06-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹- åˆ«è¸©ç™½å—
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOSå°é¡¹ç›®-App/">iOSå°é¡¹ç›® App</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>#iOS-OCé¡¹ç›® åˆ«è¸©ç™½å—(Donâ€™t Tap The White Tile)</p>
<hr>
<p>##å†™åœ¨å‰é¢çš„è¯</p>
<p>####â‘ åˆ«è¸©ç™½å—æ¸¸æˆç®€ä»‹ï¼š</p>
<blockquote>
<p>ã€Šåˆ«è¸©ç™½å—å„¿ Donâ€™t Tap The White Tileã€‹ï¼Œè¿™å°±æ˜¯è¿™ä¸ªæ¸¸æˆå”¯ä¸€çš„ä¸€ä¸ªè§„åˆ™ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸æ–­è¸©ç€é»‘è‰²æ–¹å—å‰è¿›å³å¯ï¼Œå¾ˆç®€å•å§ï¼Ÿè°éƒ½å¯ä»¥ä¼šç©ï¼Œä½†å¹¶ä¸æ˜¯è°éƒ½èƒ½ç©å¾—å¾ˆå¥½å™¢ï¼Œä½ å‘¢ï¼Ÿå¿«æ¥æŒ‘æˆ˜çœ‹çœ‹å§ï¼ç»å…¸æ¨¡å¼ï¼Œä»¥æœ€å¿«çš„é€Ÿåº¦åˆ°è¾¾ç»ˆç‚¹ã€‚è¡—æœºæ¨¡å¼ï¼Œä½ æœ‰èƒ½åŠ›å¾—å¤šå°‘åˆ†å°±å¾—å¤šå°‘åˆ†ï¼Œæ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œè¿™ä¹Ÿæ˜¯æœ€å…·æŒ‘æˆ˜æ€§çš„ä¸€ä¸ªæ¨¡å¼ã€‚é™æ—¶æ¨¡å¼ï¼Œåœ¨30ç§’å†…çœ‹ä½ èƒ½èµ°å‡ æ­¥ã€‚æé€Ÿæ¨¡å¼ï¼Œæ²¡æœ‰æœ€é«˜é€Ÿé™åˆ¶çš„è¡—æœºæ¨¡å¼, æŒ‘æˆ˜ä½ çš„æé™æ¥åŠ›æ¨¡å¼ï¼Œè§„å®šæ—¶é—´å†…å®Œæˆ50å—å„¿ï¼Œç„¶åä¼šæœ‰æ›´å¤šæ—¶é—´å»å®Œæˆå¦å¤–çš„50å—å„¿ã€‚ã€å¤åˆ¶äºç™¾åº¦ç™¾ç§‘ã€‘</p>
</blockquote>
<p>å¦‚æœä½ æ²¡ç©è¿‡ï¼Œæ²¡å…³ç³» ï¼Œä¸Šå›¾çœ‹çœ‹<br><img src="http://upload-images.jianshu.io/upload_images/1299512-1c86ccf35a745617.gif?imageMogr2/auto-orient/strip" alt="åˆ«è¸©ç™½å—å„¿.gif"><br>æ„æ€å°±æ˜¯ï¼šæ¯è¡Œæœ‰å››ä¸ªæŒ‰é’®ï¼Œé»‘è‰²çš„æŒ‰é’®æ˜¯æ­£ç¡®çš„éœ€è¦ä½ ç‚¹å‡»çš„æŒ‰é’®ï¼Œç™½è‰²å—ç‚¹å‡»åæ¸¸æˆå¤±è´¥ï¼Œæ‰€ä»¥è¿™ä¸ªæ¸¸æˆå°±å«â€åˆ«è¸©ç™½å—å„¿â€ğŸ˜‚ï¼Œåˆ«é—®æˆ‘æˆ‘ä¸ºä»€ä¹ˆè¿™ä¹ˆæœºæ™ºã€‚</p>
<p>####â‘¡å†™è¿™ä¸ªå°æ¸¸æˆçš„ç›®çš„</p>
<p>#####<strong>æœ€é‡è¦ :  <strong>çº¯å±å¥½ç©</strong></strong><br>æˆ‘è§‰å¾—åšä¸€ä»¶äº‹æƒ…æœ€å¤§çš„æ¨åŠ¨åŠ›å°±æ˜¯ <strong>å…´è¶£</strong> <strong>å…´è¶£</strong> <strong>å…´è¶£</strong>ã€‚<br>çœ‹åˆ°å¥½å¤šæ¸¸æˆéƒ½æ˜¯æ‹¿Unity3Dã€Cocos2Då¼€å‘çš„ï¼Œæˆ‘å°±æƒ³ æˆ‘ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ä¸€äº›ä¸œæµ·ä¹Ÿå¯ä»¥å®ç°ä¸€äº›ç®€å•çš„å¹³é¢2DåŠ¨ç”»å‘€ï¼Œæ‰€ä»¥æˆ‘è¯•äº†è¯•ï¼Œæ‰€ä»¥å°±æœ‰äº†è¿™ç¯‡ç®€ä¹¦ã€‚</p>
<p>#####<strong>ç”µå•†ä¹‹ç±»çš„appä¸ç¾è§‚</strong><br>å‰é¢ä»¿å†™è¿‡<a href="http://www.jianshu.com/p/7b57eb0c4abe" target="_blank" rel="external">åŠç³–app</a>ï¼Œå…¬å¸ä¹Ÿæ˜¯ç”µå•†çš„appï¼Œæ‰€ä»¥å¯¹äºç”µå•†appæ— çˆ±äº†ï¼Œ,,Ô¾â€¸Ô¾,,ï¼Œéƒ½æ˜¯ é¦–é¡µã€åˆ†ç±»ã€è´­ç‰©è½¦ã€ä¸ªäººä¸­å¿ƒçš„å¥—è·¯ï¼Œä½ æ‡‚çš„ã€‚ç›¸åæˆ‘å€’æ˜¯æ›´å–œæ¬¢ä¸€äº›ç”µå•†å…¥å£çš„APPï¼Œå°±æ¯”å¦‚åŠç³–ã€ç¾ä¸½è¯´ã€å°çº¢ä¹¦ä¹‹ç±»çš„appï¼ŒUIå¾ˆç¾è§‚ï¼Œè¿™æ˜¯å¸å¼•æˆ‘çš„åœ°æ–¹ã€‚</p>
<hr>
<p>##é¡¹ç›®æ•´ä½“çš„æ¦‚æ‹¬</p>
<p>####â‘ å¼€å‘å‘¨æœŸï¼š<br>å·¥ä½œé—²æš‡ä¹‹ä½™ç´¯è®¡æœ‰10å¤©å·¦å³ï¼Œæœ€è¿‘ä¸€ä¸ªåŠæœˆåœ¨å¿™å…¬å¸çš„é¡¹ç›®ï¼Œåªå¥½æŠ½æ—¶é—´å†™å•¦</p>
<p>####â‘¡å¼€å‘å·¥å…·å’Œè¯­è¨€ï¼š<br> å¼€å‘å·¥å…·ä¸ºXcode7.3   è¯­è¨€ä¸ºObjective-C<br>å› ä¸ºå‰é¢ä»¿å†™åŠç³–appçš„æ—¶å€™ï¼Œå¥½å¤šæœ‹å‹ç»™æˆ‘è¯´ä¸å¤ªæ‡‚swiftï¼Œé‚£æˆ‘å°±å†™ä¸ªOCçš„å°é¡¹ç›®</p>
<p>####â‘¢å¼€å‘è¦ç‚¹ï¼š<br><strong>æ¸¸æˆæˆåŠŸã€å¤±è´¥çš„é€»è¾‘ä»£ç åŸºäº <code>ReactiveCocoa</code> ,ä»£ç æœ‰è¯¦ç»†çš„è§£é‡Šã€‚</strong><br>éŸ³é¢‘ç®¡ç†ã€æ•´ä½“çš„UIæ­å»ºä¸éš¾ï¼Œéš¾çš„æ˜¯æ•´ä½“æ¸¸æˆé€»è¾‘çš„è®¾è®¡ã€‚</p>
<hr>
<p>##é¡¹ç›®è¯¦ç»†å®ç°è¿‡ç¨‹</p>
<p>####â‘ é¦–é¡µï¼Œé¡µé¢è¾ƒä¸ºç®€å•ï¼Œä¸»è¦ä»‹ç»ä¸€ä¸‹ UIButtonä¸ <code>ReactiveCocoa</code>çš„ç»“åˆä½¿ç”¨</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-81e0e7253713d485.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp58f5a0f6.png"></p>
<p>â€“ä¸»è¦ä»£ç å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//å¼€å§‹æ¸¸æˆæŒ‰é’®</div><div class="line">    _startButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, SCREEN_WIDTH/2, SCREEN_HEIGHT)];</div><div class="line">    _startButton.backgroundColor = [UIColor blackColor];</div><div class="line">    [_startButton setTitle:@&quot;å¼€å§‹æ¸¸æˆ&quot; forState:UIControlStateNormal];</div><div class="line">    [_startButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];</div><div class="line">    WeakSelf;</div><div class="line">    [[_startButton rac_signalForControlEvents:UIControlEventTouchUpInside] subscribeNext:^(id x) &#123;</div><div class="line">        [weakSelf buttonHideAnimation];</div><div class="line">        [weakSelf  presentViewController:[[GameSceneViewController alloc] init] animated:false completion:^&#123;</div><div class="line">            //å¼¹å‡ºæ¸¸æˆçª—ä½“å æš‚åœBGM</div><div class="line">            [SoundPlayer pauseBGM];</div><div class="line">        &#125;];</div><div class="line">        NSLog(@&quot; start game :)&quot;);</div><div class="line">    &#125;];</div><div class="line">    [self.view addSubview:_startButton];</div></pre></td></tr></table></figure></p>
<p>è§£é‡Šï¼š<code>[_startButton rac_signalForControlEvents:UIControlEventTouchUpInside]</code>è¿”å›ä¸€ä¸ª <code>RACSignal</code>,å¯ä»¥ç†è§£ä¸º ä¸€ä¸ªä¿¡å·ï¼Œåé¢ <code>subscribeNext:^(id x) {}</code> æ„æ€å°±æ˜¯ æ¥å—åˆ°è¿™ä¸ªä¿¡å·æ‰€åšçš„æ“ä½œã€‚ä»å­—é¢æ„æ€ä¸Šå¯ä»¥ç†è§£ä¸ºï¼Œå‰è€…å½“ä½ ç‚¹å‡»æŒ‰é’®ï¼Œè§¦å‘<code>UIControlEventTouchUpInside</code>äº‹ä»¶çš„æ—¶å€™ ï¼Œå‘å‡ºä¸€ä¸ªä¿¡å·ï¼Œåè€…æ˜¯æ¥å—åˆ°è¿™ä¸ªä¿¡å·ï¼Œä½ è¦å¹²ä»€ä¹ˆï¼Œç”±ä½ å†³å®šã€‚</p>
<p>####â‘¡æ¸¸æˆé¡µé¢viewï¼Œ</p>
<p> #####å€’è®¡æ—¶åŠ¨ç”»ä»‹ç»<br>ä¸Šå›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-76ac222f93784caa.gif?imageMogr2/auto-orient/strip" alt="å€’è®¡æ—¶åŠ¨ç”».gif"><br>â€”-æ„æˆï¼šviewèƒŒæ™¯ä¸ºé»‘è‰²ï¼Œä¸­é—´æ·»åŠ äº†ä¸€ä¸ªlabelï¼Œæ˜¾ç¤ºå½“å‰çš„æ•°å­—</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">*  å€’è®¡æ—¶ anim ......3 2 1 åŠ¨ç”»</div><div class="line">*</div><div class="line">*  @param anim          anim å˜åŒ–çš„æ•°å­—åˆå§‹å€¼</div><div class="line">*  @param completeBlock åŠ¨ç”»ç»“æŸåçš„æ“ä½œ</div><div class="line">*/</div><div class="line">- (void)showWithAnimNum:(NSInteger)anim CompleteBlock:(CompleteBlock)completeBlock;</div></pre></td></tr></table></figure>
<p>â€”-å®ç°æ€è·¯ï¼š è¦åšçš„ä»ç»™å®šçš„å‚æ•° <code>anim</code>  é€’å‡åˆ° 0  ä¹‹åç»“æŸåŠ¨ç”»ï¼Œç„¶åæ‰§è¡Œ<code>completeBlock</code><br>ï¼Œæˆ‘æ˜¯è¿™æ ·å†™ä¸€ä¸ªç±»ä¼¼äºé€’å½’çš„åŠ¨ç”»ï¼š<br>â‘ æ•´ä½“åŠ¨ç”»å¯ä»¥åˆ†ä¸ºå¾ˆå¤šä¸ªï¼Œå•ä¸ªæ•°å­—ï¼Œåšç¼©æ”¾å’Œé€æ˜åº¦æ”¹å˜çš„åŠ¨ç”»ç»„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">//è¿”å›ä¸€ä¸ª åŠ¨ç”»group</div><div class="line">- (CAAnimationGroup *)animationGroup &#123;</div><div class="line">    //ç¼©æ”¾</div><div class="line">    CABasicAnimation *animation1 = [CABasicAnimation animation];</div><div class="line">    [animation1 setKeyPath:@&quot;transform.scale&quot;];</div><div class="line">    [animation1 setFromValue:@1.0];</div><div class="line">    [animation1 setToValue:@4.0];</div><div class="line">    [animation1 setDuration:1.0];</div><div class="line">    //æ”¹å˜é€æ˜åº¦</div><div class="line">    CABasicAnimation *animation2 = [CABasicAnimation animation];</div><div class="line">    [animation2 setKeyPath:@&quot;alpha&quot;];</div><div class="line">    [animation2 setFromValue:@1.0];</div><div class="line">    [animation2 setToValue:@0.3];</div><div class="line">    [animation2 setDuration:1.0];</div><div class="line">    </div><div class="line">    </div><div class="line">    CAAnimationGroup *animGroup = [[CAAnimationGroup alloc] init];</div><div class="line">    animGroup.animations = [NSArray arrayWithObjects:animation1,animation2, nil];</div><div class="line">    [animGroup setDuration:1.0];</div><div class="line">    [animGroup setDelegate:self];</div><div class="line">    return animGroup;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>@ç”¨ä¸€ä¸ªå‚æ•°æ§åˆ¶æ•´ä½“çš„åŠ¨ç”»çš„ç»§ç»­å’Œåœæ­¢ï¼Œå°±æ˜¯<code>_animIndex</code><br>æ¯ä¸€ä¸ªåŠ¨ç”»groupæ‰§è¡Œå®Œæ¯•åï¼Œåœ¨ <code>- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag</code> ä¸­è¿›è¡Œ<code>_animIndex--</code>ï¼Œå¹¶ä¸”æ·»åŠ ä¸‹ä¸€ç»„åŠ¨ç”»ï¼Œçœ‹ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">// - MARK: Animation Delegate</div><div class="line">- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag &#123;</div><div class="line">    if (flag &amp;&amp; _animIndex &gt; 0) &#123;</div><div class="line">        _animIndex--;</div><div class="line">        _animLabel.text = [NSString stringWithFormat:@&quot;%ld&quot;,(long)_animIndex];</div><div class="line">        [_animLabel.layer addAnimation:[self animationGroup] forKey:nil];</div><div class="line">    &#125;</div><div class="line">    //åŠ¨ç”»æ‰§è¡Œå®Œæ¯•å æ‰§è¡Œçš„æ“ä½œ</div><div class="line">    if (_animIndex == 0) &#123;</div><div class="line">        if (_completeBlock != nil) &#123;</div><div class="line">            //å»¶è¿Ÿ0.4sä¹‹å å†å¼€å§‹æ¸¸æˆ é˜²æ­¢æ¸¸æˆå¼€å§‹å¤ªå¿« useræ¥å—ä¸äº†</div><div class="line">            self.hidden = true;</div><div class="line">            WeakSelf;</div><div class="line">            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.4 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">                _completeBlock();</div><div class="line">                [weakSelf.animLabel.layer removeAllAnimations];</div><div class="line">                weakSelf.hidden = false;</div><div class="line">                [weakSelf removeFromSuperview];</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p> #####æ¸¸æˆç•Œé¢å¦‚ä½•æ­å»º<br>â‘ é¦–é¡µæ•´ä½“ç•Œé¢æ­å»º<br><img src="http://upload-images.jianshu.io/upload_images/1299512-23020b7609d725bd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="B7A2A5EB-B936-4ABD-BF2A-F6135389EC0C.png"><br>ç•Œé¢ä¸­æ¯ä¸€ä¸ªè¢«æˆ‘æ¡†èµ·æ¥çš„éƒ½æ˜¯æˆ‘å°è£…çš„ <code>GameSceneView</code>,å½“ç„¶æˆ‘ä»¬ä¸èƒ½åœ¨æ¯ä¸€ä¸ª<code>GameSceneView</code>é‚£å¦‚ä½•å®ç°â€™â€™é‡ç”¨â€™å‘¢â€™<br><strong>å®ç°æ€è·¯ï¼š</strong><br>â‘ è®¡ç®—ä½ çš„å±å¹•ä¸­éœ€è¦å¤šå°‘ä¸ª<code>gameScene</code>ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// - 1: å…ˆè®¡ç®—å‡º å±å¹•ä¸­éœ€è¦å¤šå°‘ä¸ª scene</div><div class="line">    _sceneCount = ceil(SCREEN_HEIGHT / WhiteBlockHeight) + 1;</div></pre></td></tr></table></figure></p>
<p>â‘¡åˆ›å»ºä¸ä¹‹ç­‰åŒæ•°é‡çš„scene<br><code>_frameArray</code>å­˜å‚¨çš„æ˜¯ sceneåˆ›å»ºæ—¶çš„åˆå§‹frame,ä¾¿äºç‚¹å‡»é”™è¯¯æ—¶ï¼Œç›´æ¥æ¢å¤åˆ°åˆå§‹çš„frame<br><code>_operateArray</code>å°†åˆ›å»ºå¥½çš„sceneé›†ä¸­åˆ°ä¸€èµ·ï¼Œä¾¿äºç®¡ç†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[_frameArray addObject:[NSValue valueWithCGRect:scene.frame]];</div><div class="line">[_operateArray addObject:scene];</div></pre></td></tr></table></figure></p>
<p>å±å¹•ä¸Šæ‰€æœ‰çš„ <code>scene</code>éƒ½æ˜¯å‘ä¸‹æ»šåŠ¨çš„ï¼Œæ¯æ¬¡æ»šåŠ¨åˆ¤æ–­æ˜¯å¦è¶…å‡ºå±å¹•ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æ­£ç¡®ã€sceneæ¼‚ç§»åˆ°å±å¹•å¤–çš„æ—¶å€™ï¼Œå†æ›´æ–°<code>scene</code>çš„<code>frame</code>ï¼Œè¿™ä¸ªsceneå°†è¢«å®‰æ’åˆ°æœ€åä¸€ä¸ª<code>scene</code>çš„åé¢ï¼Œä¸Šä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (void)viewWillAppear:(BOOL)animated &#123;</div><div class="line">    [super viewWillAppear:animated];</div><div class="line">    </div><div class="line">    //ç”¨ CADisplayLink è¿›è¡Œåˆ·æ–° é¢‘ç‡æ›´å¿«ï¼ŒåŠ¨ç”»æ•ˆæœä¸ä¼šå¡é¡¿</div><div class="line">    disPlayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(startScroll)];</div><div class="line">    </div><div class="line">    //å…ˆæ‰§è¡Œ 3 2 1 è¿™æ ·çš„åŠ¨ç”»</div><div class="line">    [[StartAnimView shareInstance] showWithAnimNum:3 CompleteBlock:^&#123;</div><div class="line">        [disPlayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>disPlayLinkä¸€ç›´åœ¨è°ƒç”¨ <code>- (void)startScroll</code>è¿™ä¸ªæ–¹æ³•ï¼Œåˆ·æ–°ç•Œé¢<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">//å¼€å§‹æ»šåŠ¨</div><div class="line">- (void)startScroll &#123;</div><div class="line">    WeakSelf;</div><div class="line">    </div><div class="line">    [_operateArray enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;</div><div class="line">        //</div><div class="line">        dispatch_async(dispatch_get_main_queue(), ^&#123;</div><div class="line">            GameSceneView *scene = (GameSceneView *)obj;</div><div class="line">            CGRect frame = scene.frame;</div><div class="line">            frame.origin.y += _gameSpeed * 2.0;</div><div class="line">            if (!*stop) &#123;</div><div class="line">                scene.frame = frame;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            //  ç”¨æˆ·ç‚¹å‡»è¶…æ—¶æ²¡æœ‰ç‚¹å‡»</div><div class="line">            if ( scene.frame.origin.y &gt;= SCREEN_HEIGHT &amp;&amp; scene.completeType == CompleteTypeNotClick)</div><div class="line">            &#123;</div><div class="line">                //åœæ­¢åˆ·æ–°</div><div class="line">                [disPlayLink invalidate];</div><div class="line">                *stop = false;</div><div class="line">                </div><div class="line">                //å¼¹å‡ºå¤±è´¥é¡µé¢</div><div class="line">                [weakSelf resetGame];</div><div class="line">        </div><div class="line">            &#125;else if( scene.frame.origin.y &gt; SCREEN_HEIGHT &amp;&amp; scene.completeType == CompleteTypeVictory)&#123;</div><div class="line">                // ç”¨æˆ·ç‚¹å‡»æˆåŠŸ  è®¡ç®—æ–°çš„frame</div><div class="line">                scene.frame = [weakSelf calculateNewFrameWithTag:scene.tag];</div><div class="line">                [scene reSet];</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç‚¹å‡»æ­£ç¡®ä¹‹å è®¡ç®—è¯¥ <code>scene</code>æ–°çš„frame<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//ç‚¹å‡»æ­£ç¡®ä¹‹å å°†è¶…å‡ºå±å¹•çš„scene æ”¹å˜frame ï¼Œè®©ç©å®¶æ„Ÿè§‰ä¸€ç›´æœ‰æ–°sceneçš„å‡ºæ¥</div><div class="line">- (CGRect)calculateNewFrameWithTag: (NSInteger )tag &#123;</div><div class="line">    tag = tag == 0 ? _sceneCount - 1 : tag - 1;</div><div class="line">    </div><div class="line">    GameSceneView *scene = (GameSceneView *)[_operateArray objectAtIndex:tag];</div><div class="line">    CGRect frame = scene.frame;</div><div class="line">    frame.origin.y -= WhiteBlockHeight;</div><div class="line">    return frame;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸€éƒ¨åˆ†ç”¨å›¾å¾ˆå¥½è§£é‡Šï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-4e87160e38bfa764.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="tmp13f239f2.png"><br>çº¢è‰²æ¡†ä¸ºå±å¹•èŒƒå›´ï¼Œ ç¬¬0ä¸ª<code>scene</code>è¶…å‡ºå±å¹•åï¼Œæ–°çš„ä½ç½®å³åœ¨ ç¬¬4ä¸ª<code>scene</code>çš„åé¢</p>
<h5 id="GameSceneView-çš„æ„å»º"><a href="#GameSceneView-çš„æ„å»º" class="headerlink" title="GameSceneView çš„æ„å»º"></a>GameSceneView çš„æ„å»º</h5><p>è¿™ä¸€éƒ¨åˆ†æœ‰ä¸€ä¸ªå°é—æ†¾ï¼Œåº”è¯¥å°†æ¯è¡Œçš„buttonæ•°é‡å†™æˆ å‚æ•°ï¼Œä¸åº”è¯¥å†™æˆ4ğŸ˜€<br>æ¯ä¸ªbuttoné€šè¿‡  button.layerçš„borderColor å’Œ borderWidthå±æ€§è®¾ç½®è¾¹æ¡†ï¼Œæ‰€ä»¥æ˜¾çš„æœ‰ç‚¹ç²—ç³™ã€‚<br>ä¸»è¦ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">// - MARK: private method</div><div class="line">//å¿«é€Ÿæ„å»ºbutton</div><div class="line">- (UIButton *)quickCreateButtonWithFrame:(CGRect)frame&#123;</div><div class="line">    UIButton *btn = [[UIButton alloc] initWithFrame:frame];</div><div class="line">    </div><div class="line">    btn.selected = false;</div><div class="line">    btn.layer.borderColor = [UIColor blackColor].CGColor;</div><div class="line">    btn.layer.borderWidth = 0.5;</div><div class="line">    btn.backgroundColor = [UIColor whiteColor];</div><div class="line"></div><div class="line">    WeakSelf;</div><div class="line">    [[[btn rac_signalForControlEvents:UIControlEventTouchUpInside]</div><div class="line">      map:^id(id value) &#123;</div><div class="line">          if(!weakSelf.isHasOtherSelected &amp;&amp; weakSelf.goalIndex == btn.tag)&#123;</div><div class="line">              // æ²¡äººç‚¹å‡» and ç‚¹å‡»æŒ‰é’®ä¸ºç›®æ ‡æŒ‰é’® -&gt; clickæ­£ç¡®</div><div class="line">              btn.selected = false;</div><div class="line">              weakSelf.isHasOtherSelected = true;</div><div class="line">              weakSelf.completeType = CompleteTypeVictory;</div><div class="line">//              [SoundPlayer playWithMusicName:_effect];</div><div class="line">              weakSelf.clickBlock(CompleteTypeVictory);</div><div class="line">              return [UIColor whiteColor];</div><div class="line">          &#125;else if(!weakSelf.isHasOtherSelected &amp;&amp; weakSelf.goalIndex != btn.tag) &#123;</div><div class="line">              //ç‚¹å‡»btn ä¸æ˜¯ ç›®æ ‡ -&gt; clické”™è¯¯</div><div class="line">              weakSelf.completeType = CompleteTypeFailure;</div><div class="line">              weakSelf.isHasOtherSelected = true;</div><div class="line">//              [SoundPlayer playWithMusicName:ErrorEffect];</div><div class="line">              //ç‚¹å‡»é”™è¯¯ä¹‹å å°†æ­£ç¡®çš„btn æ‰§è¡ŒåŠ¨ç”»</div><div class="line">              [weakSelf clickButtonFailureWithButton:btn];</div><div class="line">              return [UIColor orangeColor];</div><div class="line">          &#125;</div><div class="line">          return [UIColor whiteColor];</div><div class="line">          </div><div class="line">    &#125; ]subscribeNext:^(UIColor *color) &#123;</div><div class="line">        btn.backgroundColor = color;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    return btn;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è§£é‡Šä¸€ä¸‹ï¼š<br><strong>å¯¹äºå…¶ä¸­<code>ReactiveCocoa</code>çš„è§£é‡Š</strong><br><code>[btn rac_signalForControlEvents:UIControlEventTouchUpInside]</code>å°±æ˜¯å½“ä½ ç‚¹å‡»buttonçš„æ—¶å€™ ä¼šå‘å‡ºä¸€ä¸ªä¿¡å·ï¼Œ<code>map:^id(id value) { ........}</code>æ˜¯æ¥å—åˆ°è¯¥ä¿¡å·ä¹‹åï¼Œä½ åšçš„ä¸€äº›æ“ä½œï¼Œè¿”å›ä¸€ä¸ªvalueå¯¹è±¡ ï¼Œ<code>subscribeNext:^(id value) {.......}</code> å°±æ˜¯ å¯¹äºæ¥å—åˆ°çš„<code>value</code>åšçš„ä¸€äº›æ“ä½œ</p>
<p>ç”¨ä¸€ä¸ªæ¯”å–»æ¥è¯´ï¼Œ<code>[btn rac_signalForControlEvents:UIControlEventTouchUpInside]</code> å°±æ˜¯æ°´æºï¼Œ<code>map:^id(id value) { ........}</code>å°±æ˜¯å†œå¤«å±±æ³‰åŠ å·¥å‚ï¼Œ<code>subscribeNext:^(id value) {.......}</code>å°±æ˜¯æ°´é€åˆ°ä½ æ‰‹é‡Œäº†ï¼Œä½ è¦å¹²ä»€ä¹ˆï¼Œæ´—è„¸æ´—è„šå–æ‰éšä¾¿ä½ ã€‚ã€‚</p>
<p><strong>å¯¹äºæ¸¸æˆé€»è¾‘çš„è§£é‡Šï¼š</strong><br>â‘ <code>isHasOtherSelected</code>è¿™ä¸ªboolç±»å‹çš„å˜é‡ ï¼š<br>trueä»£è¡¨å·²ç»æœ‰ä¸€ä¸ªbuttonè¢«ç‚¹å‡»  falseä»£è¡¨æ²¡æœ‰buttonè¢«ç‚¹å‡»<br>â‘¡æ ¹æ®ç‚¹å‡»æˆåŠŸä¸å¦,è¿”å›å®ŒæˆçŠ¶æ€completeType<br>ç‚¹å‡»æˆåŠŸï¼š<code>weakSelf.clickBlock(CompleteTypeVictory);</code><br>ç‚¹å‡»å¤±è´¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//ç‚¹å‡»é”™è¯¯ä¹‹å  å°†å¤±è´¥çš„btn é—ªçƒä¸‹</div><div class="line">              [weakSelf clickButtonFailureWithButton:btn];</div></pre></td></tr></table></figure></p>
<p>buttoné—ªçƒåŠ¨ç”»å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">//ç‚¹å‡»é”™è¯¯ è®©ç‚¹é”™çš„button é—ªçƒ</div><div class="line">- (void)clickButtonFailureWithButton:(UIButton *)sender&#123;</div><div class="line">    </div><div class="line">    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@&quot;opacity&quot;];//å¿…é¡»å†™opacityæ‰è¡Œã€‚</div><div class="line">    animation.fromValue = [NSNumber numberWithFloat:1.0f];</div><div class="line">    animation.toValue = [NSNumber numberWithFloat:0.0f];//è¿™æ˜¯é€æ˜åº¦ã€‚</div><div class="line">    animation.autoreverses = YES;</div><div class="line">    animation.duration = 0.2;</div><div class="line">    animation.repeatCount = 4;</div><div class="line">    animation.removedOnCompletion = NO;</div><div class="line">    animation.fillMode = kCAFillModeForwards;</div><div class="line">    animation.timingFunction=[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];///æ¸è¿›åŠ¨ç”»</div><div class="line">    [animation setDelegate:self];</div><div class="line">    [sender.layer addAnimation:animation forKey:nil];</div><div class="line">&#125;</div><div class="line"></div><div class="line">//é—ªçƒå®Œæ¯•å è¿”å›å¤±è´¥çŠ¶æ€</div><div class="line">- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag &#123;</div><div class="line">    if (flag) &#123;</div><div class="line">        self.clickBlock(CompleteTypeFailure);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="éŸ³é¢‘å¤„ç†ã€"><a href="#éŸ³é¢‘å¤„ç†ã€" class="headerlink" title="éŸ³é¢‘å¤„ç†ã€"></a>éŸ³é¢‘å¤„ç†ã€</h5><p><code>SoundPlayer</code>è¿™ä¸ªç±»è´Ÿè´£æ’­æ”¾éŸ³é¢‘,è°ƒç”¨<code>AVAudioPlayer</code>æ¥æ’­æ”¾éŸ³é¢‘<br>æœ‰ä¸‰ä¸ªæ–¹æ³•:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//æŒ‰é’®ç‚¹å‡»æ—¶æ’­æ”¾çš„å£°éŸ³</div><div class="line">+ (void)playWithMusicName: (NSString *)fileName;</div><div class="line"></div><div class="line">//æ’­æ”¾èƒŒæ™¯éŸ³ä¹</div><div class="line">+ (void)playBackgroundMusicWithName: (NSString *)fileName;</div><div class="line"></div><div class="line">//æš‚åœèƒŒæ™¯éŸ³ä¹</div><div class="line">+ (void)pauseBGM;</div></pre></td></tr></table></figure></p>
<p><strong>å…³äºç‚¹å‡»éŸ³æ•ˆçš„å¤„ç†</strong><br>æˆ‘æœ‰ä¸¤ä¸ªæ–¹æ¡ˆï¼Œéƒ½åœ¨ä»£ç é‡Œé¢<br>â‘ ç‚¹å‡»æŒ‰é’®æ—¶ï¼ŒæŒ‰ç‚¹å‡»æ¬¡æ•°æ¥æ’­æ”¾å¯¹åº”çš„å£°éŸ³ï¼š<br>å…·ä½“å®ç°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">if (type == CompleteTypeVictory) &#123;</div><div class="line">        //ç‚¹å‡»æˆåŠŸ  æ’­æ”¾ç›¸åº”çš„ music</div><div class="line">        if (_clickIndex &gt; 213) &#123;</div><div class="line">            _clickIndex = (NSInteger)_clickIndex % 213;</div><div class="line">        &#125;</div><div class="line">        NSString *fileName = [NSString stringWithFormat:@&quot;C-%ld&quot;,_clickIndex];</div><div class="line">        if (_clickIndex &lt;= 9) &#123;</div><div class="line">            fileName = [NSString stringWithFormat:@&quot;C-0%ld&quot;,_clickIndex];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        [SoundPlayer playWithMusicName:fileName];</div><div class="line">        // æ›´æ–°å½“å‰åˆ†æ•°</div><div class="line">        _currentScore += 1.0;</div><div class="line">        // æ ¹æ®å½“å‰åˆ†æ•° è®¡ç®—ç™½å—ç§»åŠ¨é€Ÿåº¦</div><div class="line">        [self updateGameSpeed];</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p><strong>å…³äºéŸ³é¢‘çš„æ¥æº</strong>ï¼šæˆ‘å°† <em>é©¬å…‹è¥¿å§†</em> çš„<strong>å…‹ç½—åœ°äºšç‹‚æƒ³æ›²</strong>åˆ†æˆäº†æ¯ä¸ªéƒ¨åˆ†ä¸º1sçš„ç‰‡æ®µ,å¤§æ¦‚200å¤šä¸ªç‰‡æ®µ<br>è¿™ä¸€éƒ¨åˆ†æœ‰ä¸ª<strong>ç–‘é—®</strong>:å£°éŸ³æ–‡ä»¶ä¸€èˆ¬ä¸æ˜¯åˆ†ä¸ºå·¦å³å£°é“å—ï¼Œæˆ‘å°†å…¶ä¸­ä¸€ä¸ªå£°é“æŠ½ç¦»å‡ºæ¥å½“åšèƒŒæ™¯éŸ³ä¹ï¼Œå¦ä¸€ä¸ªå£°é“æ–‡ä»¶åˆ†æˆè‹¥å¹²åˆ†ï¼Œå½“æŒ‰é’®ç‚¹å‡»æ—¶æ’­æ”¾æ˜¯ä¸æ˜¯æ›´å¥½ï¼Ÿæ‡‚ç”µå­éŸ³é¢‘å¤„ç†çš„æœ‹å‹å‡ºæ¥å›ç­”ä¸‹å‘—ã€‚</p>
<p>##é¡¹ç›®æ„Ÿæƒ³<br>â‘ å…¶å®å¤æ‚åŠ¨ç”»ä¹Ÿæ˜¯ â€œç¼©æ”¾â€ â€œæ—‹è½¬â€ â€œæ”¹å˜é€æ˜åº¦â€ â€œç§»åŠ¨â€ç­‰ä¸€äº›åŸºç¡€åŠ¨ç”»çš„ç»„åˆï¼Œä¸‹æ¬¡é‡åˆ°åŠ¨ç”»çš„æ—¶å€™å¯ä»¥è¯•ç€å°†åŠ¨ç”»è¿›è¡Œåˆ†è§£ï¼Œè¿™æ ·å°±ä¼šå‡å°å®ç°çš„éš¾åº¦ï¼Œ<br>â‘¡å°½é‡å°†ä»£ç å†™çš„æ¸…æ™°æ˜“æ‡‚ï¼Œä¸å¿™çš„æ—¶å€™å¤šå›å»reviewä»£ç ï¼Œå°±å¯ä»¥å‘ç°å½“åˆä»£ç çš„ä¸€äº›ä¸åˆç†çš„é€»è¾‘ï¼Œè¿™æ ·æ‰ä¼šè¿›æ­¥ï¼Œè¿™äº›å¤©å›å»å°†æˆ‘çš„<a href="http://www.jianshu.com/p/7b57eb0c4abe" target="_blank" rel="external">é«˜ä»¿åŠç³–app</a> reviewä¸‹ï¼Œå¤äººè€è¯ï¼Œ<strong>æ¸©æ•…è€ŒçŸ¥æ–° å¯ä»¥ä¸ºå¸ˆçŸ£</strong><br>â‘¢å­¦ä¹ ä¹‹è·¯ï¼Œ<strong>ä»»é‡è€Œé“è¿œï¼Œè·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢</strong></p>
<p>##Githubé¡¹ç›®ä¸‹è½½åœ°å€<br><strong>æ¸©é¦¨æç¤ºï¼š</strong>appå¯åŠ¨å ä¼šæœ‰èƒŒæ™¯éŸ³ä¹å“èµ·ï¼Œsoï¼Œä½ æ‡‚çš„ï¼Œç‚¹å‡»æŒ‰é’®ä¹Ÿä¼šæ’­æ”¾ <strong>å…‹ç½—åœ°äºšç‹‚æƒ³æ›²</strong>çš„ç‰‡æ®µï¼Œè¿è¡Œæ—¶è¯·è¯·è°ƒä½éŸ³é‡</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1299512-d22eeea07435f018.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="è¯·è¿è¡Œ.xcworkspace"><br><a href="https://github.com/jiachenmu/Don-tTapTheWhiteTile" target="_blank" rel="external">ç‚¹å‡»å»æˆ‘çš„Githubä¸‹è½½</a></p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>æœ¬æ–‡æ ‡é¢˜:</span><a href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—/">iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹- åˆ«è¸©ç™½å—</a></p>
        <p><span>æ–‡ç« ä½œè€…:</span><a href="/" title="è®¿é—® ManoBoo çš„ä¸ªäººåšå®¢">ManoBoo</a></p>
        <p><span>å‘å¸ƒæ—¶é—´:</span>2016å¹´06æœˆ30æ—¥ - 09æ—¶29åˆ†</p>
        <p><span>æœ€åæ›´æ–°:</span>2016å¹´06æœˆ30æ—¥ - 09æ—¶30åˆ†</p>
        <p>
            <span>åŸå§‹é“¾æ¥:</span><a class="post-url" href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—/" title="iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹- åˆ«è¸©ç™½å—">http://yoursite.com/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—/</a>
            <span class="copy-path" data-clipboard-text="åŸæ–‡: http://yoursite.com/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—/ã€€ã€€ä½œè€…: ManoBoo" title="ç‚¹å‡»å¤åˆ¶æ–‡ç« é“¾æ¥"><i class="fa fa-clipboard"></i></span>
            <script src="/js/clipboard.min.js"></script>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>è®¸å¯åè®®:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="ä¸­å›½å¤§é™† (CC BY-NC-SA 3.0 CN)" target = "_blank">"ç½²å-éå•†ç”¨-ç›¸åŒæ–¹å¼å…±äº« 3.0"</a> è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ã€‚
        </p>
    </div>



<nav id="article-nav">
  
    <a href="/2016/07/04/iOS-Reactive-Cocoaä½¿ç”¨æµ…æ/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          iOS Reactive Cocoaä½¿ç”¨æµ…æ
        
      </div>
    </a>
  
  
    <a href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬ä¸€å¼¹-å£çº¸å¤©æ°”/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">iOSå°é¡¹ç›®ä¹‹ç¬¬ä¸€å¼¹- å£çº¸å¤©æ°”</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    <ol class="toc"><li class="toc-item toc-level-5"><a class="toc-link" href="#GameSceneView-çš„æ„å»º"><span class="toc-number">1.</span> <span class="toc-text">GameSceneView çš„æ„å»º</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#éŸ³é¢‘å¤„ç†ã€"><span class="toc-number">2.</span> <span class="toc-text">éŸ³é¢‘å¤„ç†ã€</span></a></li></ol>
</div>
<input type="button" id="tocButton" value="éšè—ç›®å½•"  title="ç‚¹å‡»æŒ‰é’®éšè—æˆ–è€…æ˜¾ç¤ºæ–‡ç« ç›®å½•">

<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script>
    var valueHide = "éšè—ç›®å½•";
    var valueShow = "æ˜¾ç¤ºç›®å½•";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }
    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
        }
    })
    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
    }
</script>





<div class="bdsharebuttonbox">
	<a href="#" class="fx fa-weibo bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš"></a>
	<a href="#" class="fx fa-weixin bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡"></a>
	<a href="#" class="fx fa-qq bds_sqq" data-cmd="sqq" title="åˆ†äº«åˆ°QQå¥½å‹"></a>
	<a href="#" class="fx fa-facebook-official bds_fbook" data-cmd="fbook" title="åˆ†äº«åˆ°Facebook"></a>
	<a href="#" class="fx fa-twitter bds_twi" data-cmd="twi" title="åˆ†äº«åˆ°Twitter"></a>
	<a href="#" class="fx fa-linkedin bds_linkedin" data-cmd="linkedin" title="åˆ†äº«åˆ°linkedin"></a>
	<a href="#" class="fx fa-files-o bds_copy" data-cmd="copy" title="åˆ†äº«åˆ°å¤åˆ¶ç½‘å€"></a>
</div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>




    
      <div class="duoshuo" id="comments">
    <!-- å¤šè¯´è¯„è®ºæ¡† start -->
    <div class="ds-thread" data-thread-key="2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—/" data-title="iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹- åˆ«è¸©ç™½å—" data-url="http://yoursite.com/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—/"></div>
    <!-- å¤šè¯´è¯„è®ºæ¡† end -->
    <!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"manoboo"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = '/js/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
    <!-- å¤šè¯´å…¬å…±JSä»£ç  end -->
</div>

    



    <div class="scroll" id="post-nav-button">
        
            <a href="/2016/07/04/iOS-Reactive-Cocoaä½¿ç”¨æµ…æ/" title="ä¸Šä¸€ç¯‡: iOS Reactive Cocoaä½¿ç”¨æµ…æ">
                <i class="fa fa-angle-left"></i>
            </a>
        
        <a title="æ–‡ç« åˆ—è¡¨"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>
        
            <a href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬ä¸€å¼¹-å£çº¸å¤©æ°”/" title="ä¸‹ä¸€ç¯‡: iOSå°é¡¹ç›®ä¹‹ç¬¬ä¸€å¼¹- å£çº¸å¤©æ°”">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>
    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/07/19/iOSåˆ©ç”¨Runtimeå†™ä¸€ä¸ªJsonè½¬Modelçš„å·¥å…·/">iOSåˆ©ç”¨Runtimeå†™ä¸€ä¸ªJsonè½¬Modelçš„å·¥å…·</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/04/iOS-Reactive-Cocoaä½¿ç”¨æµ…æ/">iOS Reactive Cocoaä½¿ç”¨æµ…æ</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—/">iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹- åˆ«è¸©ç™½å—</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬ä¸€å¼¹-å£çº¸å¤©æ°”/">iOSå°é¡¹ç›®ä¹‹ç¬¬ä¸€å¼¹- å£çº¸å¤©æ°”</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/30/Swift2-0-é«˜ä»¿åŠå¡˜App/">Swift2.0 é«˜ä»¿åŠå¡˜App</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/04/iOSï¼Œå¦‚ä½•æ¨¡ä»¿ä¸€ä¸ªApp/">iOSï¼Œå¦‚ä½•æ¨¡ä»¿ä¸€ä¸ªApp</a></li></ul>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
            }
        })
    </script>



    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 ManoBoo
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >è®¿é—®é‡: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">æœ¬é¡µé˜…è¯»é‡: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>