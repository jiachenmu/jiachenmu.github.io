<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>iOS Reactive Cocoaä½¿ç”¨æµ…æ | ManoBooçš„æŠ€æœ¯å°çª</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="iOS Reactive Cocoaä½¿ç”¨æµ…ææ ‡ç­¾ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ï¼š ReactiveCocoaç®€å•ä½¿ç”¨

##ç›®å½•ï¼š
[TOC]
##Reactive Cocoaæµ…æ

ReactiveCocoaæ˜¯å“åº”å¼ç¼–ç¨‹(FRP)åœ¨IOSä¸­çš„ä¸€ä¸ªå®ç°æ¡†æ¶,Githubåœ°å€

###1.ä»€ä¹ˆæ˜¯å“åº”å¼ç¼–ç¨‹æ¨èä¸€ä¸ªç½‘å€å“åº”å¼ç¼–ç¨‹ï¼ˆReactive Programmingï¼‰ä»‹ç»,å¦‚æœä¸å¤ªæ¸…æ¥šï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆæ¥äº†è§£ä¸€ä¸‹å…¶ä»–çš„">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS Reactive Cocoaä½¿ç”¨æµ…æ">
<meta property="og:url" content="http://yoursite.com/2016/07/04/iOS-Reactive-Cocoaä½¿ç”¨æµ…æ/index.html">
<meta property="og:site_name" content="ManoBooçš„æŠ€æœ¯å°çª">
<meta property="og:description" content="iOS Reactive Cocoaä½¿ç”¨æµ…ææ ‡ç­¾ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ï¼š ReactiveCocoaç®€å•ä½¿ç”¨

##ç›®å½•ï¼š
[TOC]
##Reactive Cocoaæµ…æ

ReactiveCocoaæ˜¯å“åº”å¼ç¼–ç¨‹(FRP)åœ¨IOSä¸­çš„ä¸€ä¸ªå®ç°æ¡†æ¶,Githubåœ°å€

###1.ä»€ä¹ˆæ˜¯å“åº”å¼ç¼–ç¨‹æ¨èä¸€ä¸ªç½‘å€å“åº”å¼ç¼–ç¨‹ï¼ˆReactive Programmingï¼‰ä»‹ç»,å¦‚æœä¸å¤ªæ¸…æ¥šï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆæ¥äº†è§£ä¸€ä¸‹å…¶ä»–çš„">
<meta property="og:updated_time" content="2016-07-04T01:37:25.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS Reactive Cocoaä½¿ç”¨æµ…æ">
<meta name="twitter:description" content="iOS Reactive Cocoaä½¿ç”¨æµ…ææ ‡ç­¾ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ï¼š ReactiveCocoaç®€å•ä½¿ç”¨

##ç›®å½•ï¼š
[TOC]
##Reactive Cocoaæµ…æ

ReactiveCocoaæ˜¯å“åº”å¼ç¼–ç¨‹(FRP)åœ¨IOSä¸­çš„ä¸€ä¸ªå®ç°æ¡†æ¶,Githubåœ°å€

###1.ä»€ä¹ˆæ˜¯å“åº”å¼ç¼–ç¨‹æ¨èä¸€ä¸ªç½‘å€å“åº”å¼ç¼–ç¨‹ï¼ˆReactive Programmingï¼‰ä»‹ç»,å¦‚æœä¸å¤ªæ¸…æ¥šï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆæ¥äº†è§£ä¸€ä¸‹å…¶ä»–çš„">
  
    <link rel="alternative" href="/atom.xml" title="ManoBooçš„æŠ€æœ¯å°çª" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/avatar.png">
  
  
  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- åŠ è½½ç‰¹æ•ˆ -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/avatar.png" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/">ManoBoo</a></h1>
        </hgroup>

        
        <p class="header-subtitle">æ¬¢è¿æ¥ManoBooçš„å°çªåšå®¢</p>
        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>èœå•</li>
                        <li>æ ‡ç­¾</li>
                        
                        
                        <li>å…³äºæˆ‘</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">åšå®¢é¦–é¡µ</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl github" target="_blank" href="https://github.com/jiachenmu" title="github">github</a>
                            
                                <a class="fl Weibo" target="_blank" href="http://weibo.com/u/3484140182?is_all=1" title="Weibo">Weibo</a>
                            
                                <a class="fl NeteaseMusic" target="_blank" href="http://music.163.com/#/user/home?id=79418549" title="NeteaseMusic">NeteaseMusic</a>
                            
                                <a class="fl Jianshu" target="_blank" href="http://www.jianshu.com/users/232094594d02/latest_articles" title="Jianshu">Jianshu</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/CMModel-JSONè½¬Modelå·¥å…·/" style="font-size: 10px;">CMModel JSONè½¬Modelå·¥å…·</a> <a href="/tags/ReactiveCocoa/" style="font-size: 10px;">ReactiveCocoa</a> <a href="/tags/Swift2-0-é«˜ä»¿App-åŠå¡˜/" style="font-size: 10px;">Swift2.0 é«˜ä»¿App åŠå¡˜</a> <a href="/tags/iOS-æ¨¡ä»¿-App/" style="font-size: 10px;">iOS æ¨¡ä»¿ App</a> <a href="/tags/iOSå°é¡¹ç›®-App/" style="font-size: 20px;">iOSå°é¡¹ç›® App</a>
                    </div>
                </section>
                
                
                

                
                
                <section class="switch-part switch-part3">
                
                    <div id="js-aboutme">iOSå¼€å‘è€…ï¼Œå†™ä»£ç æ˜¯ä¸€ä»¶éå¸¸happyçš„äº‹æƒ…ğŸ˜„</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="å›åˆ°ä¸»é¡µ">ManoBoo</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/avatar.png" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="å›åˆ°ä¸»é¡µ">ManoBoo</a></h1>
            </hgroup>
            
            <p class="header-subtitle">æ¬¢è¿æ¥ManoBooçš„å°çªåšå®¢</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">åšå®¢é¦–é¡µ</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="github" target="_blank" href="https://github.com/jiachenmu" title="github">github</a>
                    
                        <a class="Weibo" target="_blank" href="http://weibo.com/u/3484140182?is_all=1" title="Weibo">Weibo</a>
                    
                        <a class="NeteaseMusic" target="_blank" href="http://music.163.com/#/user/home?id=79418549" title="NeteaseMusic">NeteaseMusic</a>
                    
                        <a class="Jianshu" target="_blank" href="http://www.jianshu.com/users/232094594d02/latest_articles" title="Jianshu">Jianshu</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-iOS-Reactive-Cocoaä½¿ç”¨æµ…æ" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/04/iOS-Reactive-Cocoaä½¿ç”¨æµ…æ/" class="article-date">
      <time datetime="2016-07-04T01:34:44.000Z" itemprop="datePublished">2016-07-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      iOS Reactive Cocoaä½¿ç”¨æµ…æ
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ReactiveCocoa/">ReactiveCocoa</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="iOS-Reactive-Cocoaä½¿ç”¨æµ…æ"><a href="#iOS-Reactive-Cocoaä½¿ç”¨æµ…æ" class="headerlink" title="iOS Reactive Cocoaä½¿ç”¨æµ…æ"></a>iOS Reactive Cocoaä½¿ç”¨æµ…æ</h1><p>æ ‡ç­¾ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ï¼š ReactiveCocoaç®€å•ä½¿ç”¨</p>
<hr>
<p>##<strong>ç›®å½•ï¼š</strong></p>
<p>[TOC]</p>
<p>##Reactive Cocoaæµ…æ</p>
<blockquote>
<p>ReactiveCocoaæ˜¯å“åº”å¼ç¼–ç¨‹(FRP)åœ¨IOSä¸­çš„ä¸€ä¸ªå®ç°æ¡†æ¶,<a href="https://github.com/ReactiveCocoa/ReactiveCocoa" target="_blank" rel="external">Githubåœ°å€</a></p>
</blockquote>
<p>###1.ä»€ä¹ˆæ˜¯å“åº”å¼ç¼–ç¨‹<br>æ¨èä¸€ä¸ªç½‘å€<a href="http://www.tuicool.com/articles/BBNRRf" target="_blank" rel="external">å“åº”å¼ç¼–ç¨‹ï¼ˆReactive Programmingï¼‰ä»‹ç»</a>,å¦‚æœä¸å¤ªæ¸…æ¥šï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆæ¥äº†è§£ä¸€ä¸‹å…¶ä»–çš„ç¼–ç¨‹æ€æƒ³</p>
<p>####1.é¢å‘è¿‡ç¨‹ï¼š</p>
<blockquote>
<p>â€œé¢å‘è¿‡ç¨‹â€(Procedure Oriented)æ˜¯ä¸€ç§ä»¥è¿‡ç¨‹ä¸ºä¸­å¿ƒçš„ç¼–ç¨‹æ€æƒ³ã€‚â€œé¢å‘è¿‡ç¨‹â€ä¹Ÿå¯ç§°ä¹‹ä¸ºâ€œé¢å‘è®°å½•â€ç¼–ç¨‹æ€æƒ³ï¼Œä»–ä»¬ä¸æ”¯æŒä¸°å¯Œçš„â€œé¢å‘å¯¹è±¡â€ç‰¹æ€§ï¼ˆæ¯”å¦‚ç»§æ‰¿ã€å¤šæ€ï¼‰ï¼Œå¹¶ä¸”å®ƒä»¬ä¸å…è®¸æ··åˆæŒä¹…åŒ–çŠ¶æ€å’ŒåŸŸé€»è¾‘ã€‚</p>
</blockquote>
<p>Cè¯­è¨€å°±æ˜¯ä¸€é—¨é¢å‘è¿‡ç¨‹çš„è¯­è¨€ã€‚</p>
<p>####2.é¢å‘å¯¹è±¡</p>
<blockquote>
<p>é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆObject-Oriented Languageï¼‰æ˜¯ä¸€ç±»ä»¥å¯¹è±¡ä½œä¸ºåŸºæœ¬ç¨‹åºç»“æ„å•ä½çš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼ŒæŒ‡ç”¨äºæè¿°çš„è®¾è®¡æ˜¯ä»¥å¯¹è±¡ä¸ºæ ¸å¿ƒï¼Œè€Œå¯¹è±¡æ˜¯ç¨‹åºè¿è¡Œæ—¶åˆ»çš„åŸºæœ¬æˆåˆ†ã€‚è¯­è¨€ä¸­æä¾›äº†ç±»ã€ç»§æ‰¿ç­‰æˆåˆ†ã€‚</p>
<p>ä¸‡ç‰©çš†å¯¹è±¡</p>
</blockquote>
<p>å…¸å‹çš„é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€æœ‰C++,C#,Javaç­‰ </p>
<p>####3.é“¾å¼ç¼–ç¨‹</p>
<blockquote>
<p>æ˜¯å°†å¤šä¸ªæ“ä½œï¼ˆå¤šè¡Œä»£ç ï¼‰é€šè¿‡ç‚¹å·(.)é“¾æ¥åœ¨ä¸€èµ·æˆä¸ºä¸€å¥ä»£ç ,ä½¿ä»£ç å¯è¯»æ€§å¥½<br>åœ¨<code>Objective-C</code>ä¸­çš„å½¢å¼ç±»ä¼¼äºä¸‹é¢è¿™ç§å½¢å¼</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Person *per = [[Person allo] init];</div><div class="line">per.eat().drink().sleep();</div></pre></td></tr></table></figure>
<p><strong>ç”¨ä¸€ä¸ª<a href="https://github.com/jiachenmu/ReactiveCocoaDemo" target="_blank" rel="external">è®¡ç®—å™¨Demo</a>æ¥ç®€å•è¯´æ˜ä»€ä¹ˆæ˜¯é“¾å¼ç¼–ç¨‹</strong><br>è¿™æ˜¯æˆ‘å†™çš„ä¸€ä¸ªéå¸¸ç®€å•çš„è®¡ç®—å™¨<br><strong>Calculator.h</strong>æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">#import &lt;Foundation/Foundation.h&gt;</div><div class="line"></div><div class="line">@class Calculator;</div><div class="line">typedef Calculator *(^CalculatorBlock)(double num);</div><div class="line"></div><div class="line">@interface Calculator : NSObject</div><div class="line"></div><div class="line">+ (instancetype)opeartionNum:(double)num;</div><div class="line"></div><div class="line">@property (assign, nonatomic) double opeartionNum;</div><div class="line"></div><div class="line">//åŠ --å‡--ä¹˜--é™¤</div><div class="line"></div><div class="line">@property (copy, nonatomic) CalculatorBlock add;</div><div class="line">@property (copy, nonatomic) CalculatorBlock reduce;</div><div class="line">@property (copy, nonatomic) CalculatorBlock multiply;</div><div class="line">@property (copy, nonatomic) CalculatorBlock divide;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure></p>
<p><strong>Calculator.m</strong>æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">#import &quot;Calculator.h&quot;</div><div class="line"></div><div class="line">@implementation Calculator</div><div class="line"></div><div class="line">- (instancetype)init</div><div class="line">&#123;</div><div class="line">    self = [super init];</div><div class="line">    if (self) &#123;</div><div class="line">        [self buildBlock];</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (instancetype)opeartionNum:(double)num &#123;</div><div class="line">    Calculator *calu = [[Calculator alloc] init];</div><div class="line">    calu.opeartionNum = num;</div><div class="line">    </div><div class="line">    return calu;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)buildBlock &#123;</div><div class="line">    __weak typeof(self) weakSelf = self;</div><div class="line">    _add = ^Calculator *(double num)&#123;</div><div class="line">        weakSelf.opeartionNum += num;</div><div class="line">        return weakSelf;</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line">    _reduce = ^Calculator *(double num)&#123;</div><div class="line">        weakSelf.opeartionNum -= num;</div><div class="line">        return weakSelf;</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line">    _multiply = ^Calculator *(double num)&#123;</div><div class="line">        weakSelf.opeartionNum *= num;</div><div class="line">        return weakSelf;</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line">    _divide = ^Calculator *(double num)&#123;</div><div class="line">        //é™¤æ•°ä¸º0 ä¸ä½œå¤„ç†</div><div class="line">        weakSelf.opeartionNum = _opeartionNum / (num == 0 ? 1 : num);</div><div class="line">        return weakSelf;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªDemoéå¸¸ç®€å•ï¼Œè¯´çš„åªæ˜¯é“¾å¼ç¼–ç¨‹çš„ä¸€ä¸ªæ€æƒ³,ä»ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>åŠ </code> <code>å‡</code> <code>ä¹˜</code> <code>é™¤</code>å››ä¸ªBlockï¼Œè¿”å›çš„å‡æ˜¯å½“å‰å¯¹è±¡ï¼Œ<br>æˆ‘ä»¬æ€ä¹ˆä½¿ç”¨å‘¢<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//å¼€å§‹è®¡ç®—</div><div class="line">    Calculator *calu = [Calculator opeartionNum:10.00];</div><div class="line">    calu.add(2).reduce(2).multiply(2).divide(0);</div><div class="line">    //è¾“å‡ºç»“æœ</div><div class="line">    NSLog(@&quot;result : %f&quot;,calu.opeartionNum);</div></pre></td></tr></table></figure></p>
<p>####3.å“åº”å¼ç¼–ç¨‹<br>æˆ‘ä»¬å…ˆçœ‹çœ‹<strong>KVO</strong>(Key-Value Observing),ç›´è¯‘è¿‡æ¥ä¹Ÿå°±æ˜¯é”®å€¼è§‚å¯Ÿè€…æ¨¡å¼ï¼Œç›‘å¬æŸä¸ªå±æ€§çš„å˜åŒ–ï¼Œæ¯æ¬¡æŒ‡å®šçš„è¢«è§‚å¯Ÿçš„å¯¹è±¡çš„å±æ€§è¢«ä¿®æ”¹åï¼ŒKVOå°±ä¼šè‡ªåŠ¨é€šçŸ¥ç›¸åº”çš„è§‚å¯Ÿè€…äº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//æ³¨å†Œè§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿçš„å±æ€§è·¯å¾„</div><div class="line">[xiaoming addObserver:self forKeyPath:@&quot;age&quot; options: NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld context:nil];</div><div class="line"></div><div class="line">//æ¥å—å±æ€§å˜åŒ–çš„æ¶ˆæ¯</div><div class="line">- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context</div><div class="line"> &#123;</div><div class="line">     if ([keyPath isEqualToString:@&quot;age&quot;] &amp;&amp; object == xiaoming) &#123;</div><div class="line">        NSLog(@&quot;å°æ˜çš„å¹´é¾„å‘ç”Ÿå˜åŒ–&quot;);</div><div class="line">     &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>æ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸‹iOSä¸­ä¸€ä¸ªå“åº”å¼ç¼–ç¨‹æ¡†æ¶<strong>ReactiveCocoa</strong><br>å…³äºå“åº”å¼ç¼–ç¨‹çš„æ¦‚å¿µï¼Œæˆ‘æ¨èçœ‹çœ‹ä¸Šé¢æ¨èçš„é‚£ç¯‡å¸–å­<a href="http://www.tuicool.com/articles/BBNRRf" target="_blank" rel="external">å“åº”å¼ç¼–ç¨‹ï¼ˆReactive Programmingï¼‰ä»‹ç»</a>ï¼Œä¸¾çš„ä¾‹å­æ˜¯<code>RxJS</code>ï¼Œä¸è¿‡æ•´ä½“çš„æ¦‚å¿µä¸<code>ReactiveCocoa</code>æ— å¼‚ï¼Œå¸æ”¶æ€æƒ³å³å¯ã€‚</p>
<hr>
<h2 id="2-ReactiveCocoaå“åº”å¼ç¼–ç¨‹æ¡†æ¶"><a href="#2-ReactiveCocoaå“åº”å¼ç¼–ç¨‹æ¡†æ¶" class="headerlink" title="###2.ReactiveCocoaå“åº”å¼ç¼–ç¨‹æ¡†æ¶"></a>###2.ReactiveCocoaå“åº”å¼ç¼–ç¨‹æ¡†æ¶</h2><p><code>ReactiveCocoa</code>ä¸­å¸¸ç”¨åˆ°çš„æ˜¯<code>RACSignal</code>,<code>RACSignal</code>ç»§æ‰¿è‡ª<code>RACStream</code>,<code>Stream</code>è¿™ä¸ªæ¦‚å¿µï¼Œç›´è¯‘è¿‡æ¥ä¹Ÿå°±æ˜¯<code>äº‹ä»¶æµ</code>çš„æ„æ€ï¼Œé‚£ä½•ä¸º<code>æ•°æ®æµ</code>ï¼Œäº‹ä»¶æµå°±æ˜¯ä¸€ä¸ªæŒ‰æ—¶é—´æ’åºçš„Eventsåºåˆ—ï¼Œåœ¨è¿™é‡Œå¼•ç”¨<a href="http://www.tuicool.com/articles/BBNRRf" target="_blank" rel="external">å“åº”å¼ç¼–ç¨‹ï¼ˆReactive Programmingï¼‰ä»‹ç»</a>å…¶ä¸­çš„ä»‹ç»ï¼Œ<br><strong>å“åº”å¼ç¼–ç¨‹ä½¿ç”¨å¼‚æ­¥æ•°æ®æµè¿›è¡Œç¼–ç¨‹</strong><br>ä¸¾ä¸ªé€šä¿—çš„ä¾‹å­è¯´æ˜äº‹ä»¶æµï¼š<strong>å¦‚ä½•æŠŠå¤§è±¡å¡è¿›å†°ç®±ï¼Ÿ</strong></p>
<blockquote>
<ol>
<li>æ‰“å¼€å†°ç®±é—¨</li>
<li>æŠŠå¤§è±¡å¡è¿›å†°ç®±</li>
<li>å…³ä¸Šå†°ç®±é—¨</li>
</ol>
</blockquote>
<p>ä¸Šè¿°ä¸‰ä¸ªæ­¥éª¤ç»„åˆèµ·æ¥å°±æˆä¸ºä¸€ä¸ªæŒ‰æ—¶é—´æ’åºçš„æ—¶é—´åºåˆ—ï¼Œå³<code>äº‹ä»¶æµ</code></p>
<hr>
<p>####1.<code>ReactiveCocoa</code>çš„æ ¸å¿ƒæ–¹æ³•</p>
<hr>
<p>æ‰“å¼€<code>RACStream</code>å¯ä»¥çœ‹åˆ°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// Lazily binds a block to the values in the receiver.</div><div class="line">///</div><div class="line">/// This should only be used if you need to terminate the bind early, or close</div><div class="line">/// over some state. -flattenMap: is more appropriate for all other cases.</div><div class="line">///</div><div class="line">/// block - A block returning a RACStreamBindBlock. This block will be invoked</div><div class="line">///         each time the bound stream is re-evaluated. This block must not be</div><div class="line">///         nil or return nil.</div><div class="line">///</div><div class="line">/// Returns a new stream which represents the combined result of all lazy</div><div class="line">/// applications of `block`.</div><div class="line"></div><div class="line">- (instancetype)bind:(RACStreamBindBlock (^)(void))block;</div></pre></td></tr></table></figure></p>
<p>å…³äºå…¶ä¸­å„ä¸ªå±æ€§çš„æ„æ€ï¼Œå¯ä»¥çœ‹<a href="http://mobile.51cto.com/news-494321.htm" target="_blank" rel="external">RACStreamBindBlockä»‹ç»å’Œä½¿ç”¨</a>ï¼Œå…¶ä¸­å¯¹äºå„ä¸ªå±æ€§æœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œ<code>bind</code>è¿™ä¸ªæ€æƒ³ç†è§£å³å¯ï¼Œ<code>RAC</code>å·²ç»å°è£…äº†å¾ˆå¤šæ›´æ–¹ä¾¿çš„æ–¹æ³•ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚</p>
<hr>
<p>####2.<code>ReactiveCocoa</code>çš„æ•´ä½“ç»“æ„ä»‹ç»</p>
<hr>
<p><strong><code>ReactiveCocoa</code>æ•´ä½“å¯ä»¥åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†</strong></p>
<ol>
<li>ä¿¡å·æº(äº‹ä»¶æµ)    <code>RACStream</code>      </li>
<li>è®¢é˜…è€…    <code>RACSubscriber</code></li>
<li>è°ƒåº¦å™¨    <code>RACScheduler</code></li>
<li>æ¸…æ´å·¥    <code>RACDisposable</code></li>
</ol>
<hr>
<p>#####1.ä¿¡å·æº(äº‹ä»¶æµ)    <code>RACStream</code><br>ä¸¾ä¸ªä¾‹å­ï¼šåœ¨ä¸€ä¸ªå…·æœ‰å¤šé‡UIçŠ¶æ€çš„ç•Œé¢ä¸­ï¼Œæˆ‘ä»¬è¦å®ç°ä¸€ä¸‹å‡ ä¸ªåŠŸèƒ½</p>
<ul>
<li>1 ç”¨æˆ·åå’Œå¯†ç è¾“å…¥æ¡†å­—æ•°è¶…è¿‡é™åˆ¶æ—¶æ”¹å˜è¾“å…¥æ¡†èƒŒæ™¯é¢œè‰²</li>
<li>2 ç”¨æˆ·åå’Œå¯†ç æ— æ•ˆå’Œæœ‰æ•ˆæ—¶ç™»å½•æŒ‰é’®çš„èƒŒæ™¯é¢œè‰²è®¾ç½®</li>
</ul>
<hr>
<p><strong>æ‹¿ç¬¬ä¸€ä¸ªé—®é¢˜å½“åšä¾‹å­</strong><br>æˆ‘ä»¬å¹³æ—¶æ€ä¹ˆå®ç°çš„å‘¢ï¼Œæ— éå°±æ˜¯ç»§æ‰¿<code>UITextFieldDelegate</code>ï¼Œåœ¨ä»£ç†ä¸­åˆ¤æ–­è¾“å…¥æ¡†ä¸­çš„æ–‡å­—ä¸ªæ•°æ˜¯å¦è¶…è¿‡é™åˆ¶ï¼Œç„¶åæ”¹å˜èƒŒæ™¯é¢œè‰²ï¼Œäº¦æˆ–ç”¨KVOå®ç°ï¼Œè¿™æ ·åšæ— å¯åšéï¼Œä½†æ˜¯æ¨¡æ¿åŒ–è¿‡äºä¸¥é‡ï¼Œæˆ‘ä»¬æƒ³åšè¿™ä¸ªåŠŸèƒ½ï¼Œéœ€è¦å£°æ˜ä»£ç†ï¼Œå®ç°ä»£ç†æ–¹æ³•ï¼ŒåŒæ—¶ä»£ç†æ–¹æ³•ä¸­è¿˜éœ€è¦åˆ¤æ–­<code>delegate</code>ä¸­çš„<code>textfield</code>æ˜¯ç”¨æˆ·åè¾“å…¥æ¡†è¿˜æ˜¯å¯†ç è¾“å…¥æ¡†ï¼Œè¿™æ ·åšä¸ä»…ä»£ç ä¸ä»…å†—é•¿ï¼Œè€Œä¸”ä¼šé€ æˆä»£ç ä¸æ˜“æŸ¥çœ‹ã€‚<br><strong>é‚£ä¹ˆåœ¨RACä¸­æˆ‘ä»¬æ€ä¹ˆåšå‘¢ï¼Œçœ‹ä»£ç </strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> //å°†ViewModelä¸­çš„å±æ€§å’Œæ§ä»¶ä¸­çš„å±æ€§ç»‘å®šåˆ°ä¸€èµ·</div><div class="line">RAC(_userViewModel,userName) = [_userNameFeild rac_textSignal];</div><div class="line">RAC(_userNameFeild,backgroundColor) = [_userNameFeild.rac_textSignal  </div><div class="line">map:^id(NSString *password) &#123;</div><div class="line">        return weakSelf.userViewModel.isUserNameValid ? [UIColor whiteColor] : [UIColor redColor];</div><div class="line">    &#125;];</div></pre></td></tr></table></figure></p>
<hr>
<p>Tips_1: è¿™ä¸€éƒ¨åˆ†æˆ‘ä»¬å¯ä»¥é…åˆ<code>MVVM</code>è®¾è®¡æ¨¡å¼ä½¿ç”¨ï¼Œå°†ViewModelä¸æ§ä»¶ç»‘å®šåˆ°ä¸€èµ·ï¼Œå‡è½»<code>ViewController</code>çš„è´Ÿæ‹…ã€‚<br>å…·ä½“è¿™ä¸€éƒ¨åˆ†çš„Demoå¯ä»¥æŸ¥çœ‹æ–‡æœ«çš„Githubé“¾æ¥ï¼Œåªæ˜¯ä¸€ä¸ªç®€å•ä½¿ç”¨<br>Tips_2: ç”±ä¸Šå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŸä¸ªåŠŸèƒ½çš„ä»£ç å†™çš„æ›´åŠ é›†ä¸­ï¼Œæ›´åŠ æ–¹ä¾¿é˜…è¯»å’Œç»´æŠ¤</p>
<hr>
<p>#####2.è®¢é˜…è€… <code>RACSubscriber</code><br>åœ¨æ•´ä¸ª<code>RAC</code>ä¸­ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šéƒ½æ˜¯é‡‡ç”¨<code>ä¿¡å·æº-è®¢é˜…è€…</code>çš„è¿™ç§æ¨¡å¼æ¥ä½¿ç”¨<code>RAC</code>,ä¸ºäº†è·å–åˆ°ä¿¡å·æºä¸­çš„valueï¼Œæˆ‘ä»¬éœ€è¦è®¢é˜…è¿™ä¸ªä¿¡å·æºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[_userNameFeild.rac_textSignal subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;%@&quot;,x);</div><div class="line">    &#125;];</div></pre></td></tr></table></figure></p>
<p>Tips: æˆ‘ä»¬æŸ¥çœ‹æºä»£ç å¯ä»¥å‘ç°<code>_userNameFeild.rac_textSignal</code>å®ç°è¿‡ç¨‹å°±æ˜¯ç›‘å¬æ‰€æœ‰çš„<code>UIControlEventAllEditingEvents</code>äº‹ä»¶ï¼Œç„¶åå‘å‡ºä¿¡å·ï¼Œç„¶åæˆ‘ä»¬è®¢é˜…è¿™ä¸ªä¿¡å·æºï¼Œå¯ä»¥è·å–åˆ°å…¶ä¸­çš„å€¼<code>x</code>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">- (RACSignal *)rac_textSignal &#123;</div><div class="line">	@weakify(self);</div><div class="line">	return [[[[[RACSignal</div><div class="line">		defer:^&#123;</div><div class="line">			@strongify(self);</div><div class="line">			return [RACSignal return:self];</div><div class="line">		&#125;]</div><div class="line">		concat:[self rac_signalForControlEvents:UIControlEventAllEditingEvents]]</div><div class="line">		map:^(UITextField *x) &#123;</div><div class="line">			return x.text;</div><div class="line">		&#125;]</div><div class="line">		takeUntil:self.rac_willDeallocSignal]</div><div class="line">		setNameWithFormat:@&quot;%@ -rac_textSignal&quot;, RACDescription(self)];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å¥½äº†ï¼Œä¸Šé¢è®²äº†é‚£ä¹ˆå¤šç†è®ºçŸ¥è¯†ï¼Œå…·ä½“å¦‚ä½•ä½¿ç”¨è¯·çœ‹ä¸‹é¢</p>
<hr>
<p>#####3.è°ƒåº¦å™¨<code>RACSubscriber</code> å’Œ æ¸…æ´å·¥<code>RACDisposable</code></p>
<ul>
<li>1 è°ƒåº¦å™¨RACSubscriberï¼Œè¿™ä¸€éƒ¨åˆ†æ˜¯ä½¿ç”¨GCDçš„ä¸²è¡Œé˜Ÿåˆ—æ¥å®ç°çš„ï¼Œæ–‡æœ«Githubé“¾æ¥ä¸­æœ‰å¯¹å…¶çš„ç®€å•ä½¿ç”¨</li>
<li><p>2 æ¸…æ´å·¥RACDisposable</p>
<blockquote>
<p><code>RACDisposable</code> åœ¨ <code>ReactiveCocoa</code> ä¸­å°±å……å½“ç€æ¸…æ´å·¥çš„è§’è‰²ï¼Œå®ƒå°è£…äº†å–æ¶ˆå’Œæ¸…ç†ä¸€æ¬¡è®¢é˜…æ‰€å¿…éœ€çš„å·¥ä½œã€‚å®ƒæœ‰ä¸€ä¸ªæ ¸å¿ƒçš„æ–¹æ³• <code>-dispose</code> ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•å°±ä¼šæ‰§è¡Œç›¸åº”çš„æ¸…ç†å·¥ä½œï¼Œè¿™æœ‰ç‚¹ç±»ä¼¼äº <code>NSObject</code> çš„ <code>-dealloc</code> æ–¹æ³•ã€‚</p>
</blockquote>
<p>:æˆ‘ä»¬ä¸Šé¢ä½¿ç”¨<code>subscribeNext:^(id x) {}</code>è¿™ä¸ªæ–¹æ³•è®¢é˜…ä¿¡å·æºè¿›è¡Œå¤„ç†ä¹‹åä¼šç”Ÿæˆä¸€ä¸ªæ¸…æ´å·¥<code>RACDisposable</code>,æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨çš„è°ƒç”¨<code>dispose</code>æ–¹æ³•æ¥è¿›è¡Œæ¸…ç†å·¥ä½œã€‚</p>
</li>
</ul>
<hr>
<h2 id="Reactive-Cocoaä½¿ç”¨"><a href="#Reactive-Cocoaä½¿ç”¨" class="headerlink" title="##Reactive Cocoaä½¿ç”¨"></a>##Reactive Cocoaä½¿ç”¨</h2><p>###* 1 RACå‘é€æ¶ˆæ¯,å¹¶ä¸”ç»‘å®šåˆ°æ§ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (void)racSenderMessage &#123;</div><div class="line">    //å»¶è¿Ÿ2.0S å‘é€&quot;å‘µå‘µå“’~&quot;æ¶ˆæ¯</div><div class="line">    RACSignal *signal = [[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;å‘µå‘µå“’~&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        return nil;</div><div class="line">    &#125;] delay:2.0];</div><div class="line">    //å°†_userNameFeildçš„`text`å±æ€§ä¸æ˜ å°„åçš„ä¿¡å·é‡çš„å€¼ç»‘å®šåˆ°ä¸€èµ·</div><div class="line">    RAC(_userNameFeild,text) = [signal map:^id(NSString *value) &#123;</div><div class="line">        if ([value isEqualToString:@&quot;å‘µå‘µå“’~&quot;]) &#123;</div><div class="line">            return @&quot;ä¹ˆä¹ˆå“’~&quot;;</div><div class="line">        &#125;</div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 2 RACä»£ç†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (void)racProtocol &#123;</div><div class="line">    RACSignal *programmerSignal = [self rac_signalForSelector:@selector(whoAmI) fromProtocol:@protocol(Programmer)];</div><div class="line">    </div><div class="line">    [programmerSignal subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;RACé€šçŸ¥------I&apos;m a great programmer...&quot;);</div><div class="line">    &#125;];</div><div class="line">    @weakify(self);</div><div class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">        [self_weak_ whoAmI];</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)whoAmI &#123;</div><div class="line">    NSLog(@&quot;whoAmI------my name is %@&quot;,_user.userName);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 3 RACé€šçŸ¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (void)racNotification &#123;</div><div class="line">    //æ¥å—é€šçŸ¥å¹¶ä¸”å¤„ç†</div><div class="line">    [[[NSNotificationCenter defaultCenter] rac_addObserverForName:@&quot;RAC_Notifaciotn&quot; object:nil] subscribeNext:^(NSNotification *notify) &#123;</div><div class="line">        NSLog(@&quot;notify.content = %@&quot;,notify.userInfo[@&quot;content&quot;]);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //å‘å‡ºé€šçŸ¥</div><div class="line">    [[NSNotificationCenter defaultCenter] postNotificationName:@&quot;RAC_Notifaciotn&quot; object:nil userInfo:@&#123;@&quot;content&quot; : @&quot;i&apos;m a notification&quot;&#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 4 RACä¿¡å·æ‹¼æ¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">- (void)racSignalLink &#123;</div><div class="line">    RACSignal *signal1 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@(1)];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    RACSignal *signal2 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@(2)];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        </div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    [[signal1 concat:signal2] subscribeNext:^(NSNumber *value) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·æ‹¼æ¥------value = %@&quot;,value);</div><div class="line">    &#125;];;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">2016-07-02 14:34:16.148 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·æ‹¼æ¥------value = 1</div><div class="line">2016-07-02 14:34:16.148 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·æ‹¼æ¥------value = 2</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 5 RACä¿¡å·åˆå¹¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">- (void)racSignalMerge &#123;</div><div class="line">    RACSignal *signal1 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;æ¸…çº¯å¦¹å­&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    RACSignal *signal2 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;æ€§æ„Ÿå¦¹å­&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        </div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    [[signal1 merge:signal2] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·åˆå¹¶------æˆ‘å–œæ¬¢ï¼š %@&quot;,x);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">2016-07-02 14:34:16.149 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·åˆå¹¶------æˆ‘å–œæ¬¢ï¼š æ¸…çº¯å¦¹å­</div><div class="line">2016-07-02 14:34:16.149 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·åˆå¹¶------æˆ‘å–œæ¬¢ï¼š æ€§æ„Ÿå¦¹å­</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 6 RACä¿¡å·ç»„åˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">- (void)racSignalCombine &#123;</div><div class="line">    RACSignal *signal1 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;å¹´è½»&quot;];</div><div class="line">        [subscriber sendNext:@&quot;æ¸…çº¯&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    RACSignal *signal2 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;æ¸©æŸ”&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        </div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //combineLatest å°†æ•°ç»„ä¸­çš„ä¿¡å·é‡å‘å‡ºçš„æœ€åä¸€ä¸ªobject ç»„åˆåˆ°ä¸€èµ·</div><div class="line">    [[RACSignal combineLatest:@[signal1, signal2]] subscribeNext:^(RACTuple *x) &#123;</div><div class="line">        //å…ˆè¿›è¡Œè§£åŒ…</div><div class="line">        RACTupleUnpack(NSString *signal1_Str, NSString *signal2_Str) = x;</div><div class="line">        NSLog(@&quot;RACä¿¡å·ç»„åˆ------æˆ‘å–œæ¬¢ %@çš„ %@çš„ å¦¹å­&quot;,signal1_Str,signal2_Str);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //ä¼šæ³¨æ„æ”¶åˆ° ç»„åˆæ–¹æ³•åè¿˜å¯ä»¥è·Ÿä¸€ä¸ªBlock  /** + (RACSignal *)combineLatest:(id&lt;NSFastEnumeration&gt;)signals reduce:(id (^)())reduceBlock */</div><div class="line">    /*</div><div class="line">     reduceè¿™ä¸ªBlockå¯ä»¥å¯¹ç»„åˆåçš„ä¿¡å·é‡åšå¤„ç†</div><div class="line">     */</div><div class="line">    //æˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·ä½¿ç”¨</div><div class="line">    [[RACSignal combineLatest:@[signal1, signal2] reduce:^(NSString *signal1_Str, NSString *signal2_Str)&#123;</div><div class="line">        return [signal1_Str stringByAppendingString:signal2_Str];</div><div class="line">    &#125;] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·ç»„åˆ(Reduceå¤„ç†)------æˆ‘å–œæ¬¢ %@ çš„å¦¹å­&quot;,x);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">2016-07-02 14:34:16.149 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·åˆå¹¶------æˆ‘å–œæ¬¢ï¼š æ€§æ„Ÿå¦¹å­</div><div class="line">2016-07-02 14:34:16.150 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·ç»„åˆ------æˆ‘å–œæ¬¢ æ¸…çº¯çš„ æ¸©æŸ”çš„ å¦¹å­</div><div class="line">2016-07-02 14:34:16.150 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·ç»„åˆ(Reduceå¤„ç†)------æˆ‘å–œæ¬¢ æ¸…çº¯æ¸©æŸ” çš„å¦¹å­</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 7 RACä¿¡å·ç»„åˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">- (void)racSignalZIP &#123;</div><div class="line">    RACSignal *signal1 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;å¹´è½»&quot;];</div><div class="line">        [subscriber sendNext:@&quot;æ¸…çº¯&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    RACSignal *signal2 = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;æ¸©æŸ”&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        </div><div class="line">        return nil;</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //zip é»˜è®¤ä¼šå–ä¿¡å·é‡çš„æœ€å¼€å§‹å‘é€çš„å¯¹è±¡ æ‰€ä»¥ç»“æœä¼šæ˜¯ å¹´è½» ã€æ¸©æŸ”</div><div class="line">    [[RACSignal zip:@[signal1,signal2]] subscribeNext:^(RACTuple *x) &#123;</div><div class="line">        RACTupleUnpack(NSString *signal1_Str1,NSString *signal2_Str) = x;</div><div class="line">        NSLog(@&quot;RACä¿¡å·å‹ç¼©------æˆ‘å–œæ¬¢ %@çš„ %@çš„ å¦¹å­&quot;,signal1_Str1, signal2_Str);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">2016-07-02 14:34:16.151 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·å‹ç¼©------æˆ‘å–œæ¬¢ å¹´è½»çš„ æ¸©æŸ”çš„ å¦¹å­</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 8 RACä¿¡å·è¿‡æ»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">- (void)racSignalFilter &#123;</div><div class="line">    //ä¿¡å·è¿‡æ»¤å¯ä»¥å‚è€ƒä¸Šé¢UIButtonå¼•ç”¨RACçš„å®ä¾‹</div><div class="line">    [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@(19)];</div><div class="line">        [subscriber sendNext:@(12)];</div><div class="line">        [subscriber sendNext:@(20)];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        </div><div class="line">        return nil;</div><div class="line">    &#125;] filter:^BOOL(NSNumber *value) &#123;</div><div class="line">        if (value.integerValue &lt; 18) &#123;</div><div class="line">            //18ç¦</div><div class="line">            NSLog(@&quot;RACä¿¡å·è¿‡æ»¤------FBI Warning~&quot;);</div><div class="line">        &#125;</div><div class="line">        return value.integerValue &gt; 18;</div><div class="line">    &#125;]</div><div class="line">      subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·è¿‡æ»¤------å¹´é¾„ï¼š%@&quot;,x);</div><div class="line">   &#125;];</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">2016-07-02 14:34:16.151 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·è¿‡æ»¤------å¹´é¾„ï¼š19</div><div class="line">2016-07-02 14:34:16.151 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·è¿‡æ»¤------FBI Warning~</div><div class="line">2016-07-02 14:34:16.152 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·è¿‡æ»¤------å¹´é¾„ï¼š20</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 9 RACä¿¡å·ä¼ é€’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">- (void)racSignalPass &#123;</div><div class="line">    [[[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;è€æ¿å‘æˆ‘æ‰”è¿‡æ¥ä¸€ä¸ªStar&quot;];</div><div class="line">        return nil;</div><div class="line">    &#125;] flattenMap:^RACStream *(NSString *value) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·ä¼ é€’------%@&quot;,value);</div><div class="line">        return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">            [subscriber sendNext:@&quot;æˆ‘å‘è€æ¿æ‰”å›ä¸€å—æ¿ç –&quot;];</div><div class="line">            return nil;</div><div class="line">        &#125;];</div><div class="line">    &#125;] flattenMap:^RACStream *(NSString *value) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·ä¼ é€’------%@&quot;,value);</div><div class="line">        return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">            [subscriber sendNext:@&quot;æˆ‘è·Ÿè€æ¿æ­£é¢åˆš~,ç»“æœå¯æƒ³è€ŒçŸ¥&quot;];</div><div class="line">            return nil;</div><div class="line">        &#125;];</div><div class="line">    &#125;] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·ä¼ é€’------%@&quot;,x);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">2016-07-02 14:34:16.152 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·ä¼ é€’------è€æ¿å‘æˆ‘æ‰”è¿‡æ¥ä¸€ä¸ªStar</div><div class="line">2016-07-02 14:34:16.152 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·ä¼ é€’------æˆ‘å‘è€æ¿æ‰”å›ä¸€å—æ¿ç –</div><div class="line">2016-07-02 14:34:16.152 ReactiveCocoaMVVMDemo[1362:1245988] RACä¿¡å·ä¼ é€’------æˆ‘è·Ÿè€æ¿æ­£é¢åˆš~,ç»“æœå¯æƒ³è€ŒçŸ¥</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 10 RACä¿¡å·ä¸²<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//ç”¨é‚£ä¸ªè‘—åçš„è„‘ç­‹æ€¥è½¬å¼¯è¯´æ˜å§ï¼Œâ€œå¦‚ä½•æŠŠå¤§è±¡æ”¾è¿›å†°ç®±é‡Œâ€  ç¬¬ä¸€æ­¥ï¼Œæ‰“å¼€å†°ç®±ï¼›ç¬¬äºŒæ­¥ï¼ŒæŠŠå¤§è±¡æ”¾è¿›å†°ç®±ï¼›ç¬¬ä¸‰æ­¥ï¼Œå…³ä¸Šå†°ç®±é—¨ã€‚</div><div class="line">- (void)racSignalQueue &#123;</div><div class="line">    //ä¸ä¿¡å·ä¼ é€’ç±»ä¼¼ï¼Œä¸è¿‡ä½¿ç”¨ `then` è¡¨æ˜çš„æ˜¯ç§©åºï¼Œæ²¡æœ‰ä¼ é€’value</div><div class="line">    [[[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·ä¸²------æ‰“å¼€å†°ç®±&quot;);</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        return nil;</div><div class="line">    &#125;] then:^RACSignal *&#123;</div><div class="line">        return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">            NSLog(@&quot;RACä¿¡å·ä¸²------æŠŠå¤§è±¡æ”¾è¿›å†°ç®±&quot;);</div><div class="line">            [subscriber sendCompleted];</div><div class="line">            return nil;</div><div class="line">        &#125;];</div><div class="line">    &#125;] then:^RACSignal *&#123;</div><div class="line">        return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">            NSLog(@&quot;RACä¿¡å·ä¸²------å…³ä¸Šå†°ç®±é—¨&quot;);</div><div class="line">            [subscriber sendCompleted];</div><div class="line">            return nil;</div><div class="line">        &#125;];</div><div class="line">    &#125;] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·ä¸²------Over&quot;);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">2016-07-02 17:19:53.812 ReactiveCocoaMVVMDemo[1567:2887515] RACä¿¡å·ä¸²------æ‰“å¼€å†°ç®±</div><div class="line">2016-07-02 17:19:53.812 ReactiveCocoaMVVMDemo[1567:2887515] RACä¿¡å·ä¸²------æŠŠå¤§è±¡æ”¾è¿›å†°ç®±</div><div class="line">2016-07-02 17:19:53.812 ReactiveCocoaMVVMDemo[1567:2887515] RACä¿¡å·ä¸²------å…³ä¸Šå†°ç®±é—¨</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 11 RAC_Commandä»‹ç»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">- (void)racCommandDemo &#123;</div><div class="line">    RACCommand *command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) &#123;</div><div class="line">        return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">            NSLog(@&quot;racCommandDemo------äº²ï¼Œå¸®æˆ‘å¸¦ä»½é¥­~&quot;);</div><div class="line">            [subscriber sendCompleted];</div><div class="line">            return nil;</div><div class="line">        &#125;];</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //å‘½ä»¤æ‰§è¡Œ</div><div class="line">    [command execute:nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">2016-07-02 17:19:53.839 ReactiveCocoaMVVMDemo[1567:2887515] racCommandDemo------äº²ï¼Œå¸®æˆ‘å¸¦ä»½é¥­~</div></pre></td></tr></table></figure></p>
<hr>
<p>###* 12 RACSignal çš„ä¸€äº›ä¿®é¥°ç¬¦<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div></pre></td><td class="code"><pre><div class="line">- (void)racSignalOther &#123;</div><div class="line">    </div><div class="line">    //å»¶è¿Ÿ</div><div class="line">    [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;RACä¿¡å·å»¶è¿Ÿ-----ç­‰ç­‰æˆ‘~ç­‰ç­‰æˆ‘2ç§’&quot;];</div><div class="line">        [subscriber sendCompleted];</div><div class="line">        return nil;</div><div class="line">    &#125;] delay:2.0] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;RACä¿¡å·å»¶è¿Ÿ-----ç»ˆäºç­‰åˆ°ä½ ~&quot;);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //å®šæ—¶ä»»åŠ¡ï¼Œå¯ä»¥ä»£æ›¿NSTimer,å¯ä»¥çœ‹åˆ°`RACScheduler`ä½¿ç”¨GCDå®ç°çš„</div><div class="line">    [[RACSignal interval:60*60 onScheduler:[RACScheduler mainThreadScheduler]] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;æ¯å°æ—¶åƒä¸€æ¬¡è¯ï¼Œä¸è¦æ”¾å¼ƒæ²»ç–—&quot;);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //è®¾ç½®è¶…æ—¶æ—¶é—´</div><div class="line">    [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">            [subscriber sendNext:@&quot;hh&quot;];</div><div class="line">            [subscriber sendCompleted];</div><div class="line">            return nil;</div><div class="line">        &#125;] delay:4] subscribeNext:^(id x) &#123;</div><div class="line">            NSLog(@&quot;RACè®¾ç½®è¶…æ—¶æ—¶é—´------è¯·æ±‚åˆ°æ•°æ®:%@&quot;,x);</div><div class="line">            [subscriber sendNext:[@&quot;RACè®¾ç½®è¶…æ—¶æ—¶é—´------è¯·æ±‚åˆ°æ•°æ®:&quot; stringByAppendingString:x]];</div><div class="line">            [subscriber sendCompleted];</div><div class="line">        &#125;];</div><div class="line">        </div><div class="line">        return nil;</div><div class="line">    &#125;] timeout:3 onScheduler:[RACScheduler mainThreadScheduler]]</div><div class="line">        subscribeNext:^(id x) &#123;</div><div class="line">            //åœ¨timeoutè§„å®šæ—¶é—´ä¹‹å†…æ¥å—åˆ°ä¿¡å·ï¼Œæ‰ä¼šæ‰§è¡Œè®¢é˜…è€…çš„block</div><div class="line">            //è¿™è¿™é‡Œ3ç§’ä¹‹å†…æ²¡æœ‰æ¥å—åˆ°ä¿¡å·ï¼Œæ‰€æœ‰è¯¥æ¬¡è®¢é˜…å·²å¤±æ•ˆ</div><div class="line">            NSLog(@&quot;è¯·æ±‚åˆ°çš„æ•°æ®:%@&quot;,x);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //è®¾ç½®retryæ¬¡æ•°ï¼Œè¿™éƒ¨åˆ†å¯ä»¥å’Œç½‘ç»œè¯·æ±‚ä¸€èµ·ç”¨</div><div class="line">    __block int retry_idx = 0;</div><div class="line">    [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        if (retry_idx &lt; 3) &#123;</div><div class="line">            retry_idx++;</div><div class="line">            [subscriber sendError:nil];</div><div class="line">        &#125;else &#123;</div><div class="line">            [subscriber sendNext:@&quot;success!&quot;];</div><div class="line">            [subscriber sendCompleted];</div><div class="line">        &#125;</div><div class="line">        return nil;</div><div class="line">    &#125;] retry:3] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;è¯·æ±‚:%@&quot;,x);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //èŠ‚æµé˜€,throttleç§’å†…åªèƒ½é€šè¿‡1ä¸ªæ¶ˆæ¯</div><div class="line">    [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [subscriber sendNext:@&quot;6&quot;];</div><div class="line">        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">            [subscriber sendNext:@&quot;66&quot;];</div><div class="line">        &#125;);</div><div class="line">        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(3.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">            [subscriber sendNext:@&quot;666&quot;];</div><div class="line">            [subscriber sendCompleted];</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        return nil;</div><div class="line">    &#125;] throttle:2] subscribeNext:^(id x) &#123;</div><div class="line">        //throttle: N   Nç§’ä¹‹å†…åªèƒ½é€šè¿‡ä¸€ä¸ªæ¶ˆæ¯ï¼Œæ‰€ä»¥@&quot;66&quot;æ˜¯ä¸ä¼šè¢«å‘å‡ºçš„</div><div class="line">        NSLog(@&quot;RAC_throttle------result = %@&quot;,x);</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    //æ¡ä»¶æ§åˆ¶</div><div class="line">    /**</div><div class="line">     è§£é‡Šï¼š`takeUntil:(RACSignal *)signalTrigger` åªæœ‰å½“`signalTrigger`è¿™ä¸ªsignalå‘å‡ºæ¶ˆæ¯æ‰ä¼šåœæ­¢</div><div class="line">     */</div><div class="line">    [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        [[RACSignal interval:1.0 onScheduler:[RACScheduler mainThreadScheduler]] subscribeNext:^(id x) &#123;</div><div class="line">            //æ¯ç§’å‘ä¸€ä¸ªæ¶ˆæ¯</div><div class="line">            [subscriber sendNext:@&quot;RAC_Condition------åƒé¥­ä¸­~&quot;];</div><div class="line">        &#125;];</div><div class="line">        return nil;</div><div class="line">    &#125;] takeUntil:[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">        //å»¶è¿Ÿ3Så‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œæ‰ä¼šè®©å‰é¢çš„ä¿¡å·åœæ­¢</div><div class="line">        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(5.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</div><div class="line">            NSLog(@&quot;RAC_Condition------åƒé¥±äº†~&quot;);</div><div class="line">            [subscriber sendNext:@&quot;åƒé¥±äº†&quot;];</div><div class="line">        &#125;);</div><div class="line">        return nil;</div><div class="line">    &#125;]] subscribeNext:^(id x) &#123;</div><div class="line">        NSLog(@&quot;%@&quot;,x);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//å»¶è¿Ÿ</div><div class="line">2016-07-02 17:36:09.398 ReactiveCocoaMVVMDemo[2040:2898007] RACä¿¡å·å»¶è¿Ÿ-----ç»ˆäºç­‰åˆ°ä½ ~</div><div class="line">//å®šæ—¶ä»»åŠ¡</div><div class="line">2016-07-02 16:36:12.400 ReactiveCocoaMVVMDemo[2040:2898007] æ¯å°æ—¶åƒä¸€æ¬¡è¯ï¼Œä¸è¦æ”¾å¼ƒæ²»ç–—</div><div class="line">2016-07-02 17:36:12.400 ReactiveCocoaMVVMDemo[2040:2898007] æ¯å°æ—¶åƒä¸€æ¬¡è¯ï¼Œä¸è¦æ”¾å¼ƒæ²»ç–—</div><div class="line">//è®¾ç½®retryæ¬¡æ•°ï¼Œè¿™éƒ¨åˆ†å¯ä»¥å’Œç½‘ç»œè¯·æ±‚ä¸€èµ·ç”¨</div><div class="line">2016-07-02 17:36:07.427 ReactiveCocoaMVVMDemo[2040:2898007] è¯·æ±‚:success!</div><div class="line">//èŠ‚æµé˜€,throttleç§’å†…åªèƒ½é€šè¿‡1ä¸ªæ¶ˆæ¯</div><div class="line">2016-07-02 17:36:10.404 ReactiveCocoaMVVMDemo[2040:2898007] RAC_throttle------result = 66</div><div class="line">2016-07-02 17:36:10.404 ReactiveCocoaMVVMDemo[2040:2898007] RAC_throttle------result = 666</div><div class="line">//takeUntilæ¡ä»¶æ§åˆ¶</div><div class="line">2016-07-02 18:10:52.074 ReactiveCocoaMVVMDemo[3090:2920422] RAC_Condition------åƒé¥­ä¸­~</div><div class="line">2016-07-02 18:10:53.078 ReactiveCocoaMVVMDemo[3090:2920422] RAC_Condition------åƒé¥­ä¸­~</div><div class="line">2016-07-02 18:10:54.074 ReactiveCocoaMVVMDemo[3090:2920422] RAC_Condition------åƒé¥­ä¸­~</div><div class="line">2016-07-02 18:10:55.077 ReactiveCocoaMVVMDemo[3090:2920422] RAC_Condition------åƒé¥­ä¸­~</div><div class="line">2016-07-02 18:10:55.078 ReactiveCocoaMVVMDemo[3090:2920422] RAC_Condition------åƒé¥±äº†~</div></pre></td></tr></table></figure></p>
<hr>
<p>##æ–‡æœ«</p>
<p>æœ¬ç¯‡æ–‡ç« å¹¶æœªå¾ˆæ·±çš„æ¢è®¨<code>ReactiveCocoa</code>çš„åº•å±‚å®ç°æ–¹æ³•ï¼Œæƒå½“åšæŠ›ç –å¼•ç‰ï¼Œç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹<code>RAC</code>çš„æµ…æå’Œä½¿ç”¨</p>
<hr>
<p><strong>Githubé“¾æ¥å’Œæ–‡ä¸­æ‰€å¼•ç”¨çš„æ–‡ç« é“¾æ¥</strong></p>
<hr>
<p><strong>å¦‚æœè§‰å¾—æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œè¯·ç‚¹ä¸ªStarå•¦~</strong></p>
<ul>
<li>1 <a href="https://github.com/jiachenmu/ReactiveCocoaDemo" target="_blank" rel="external">æ–‡ç« ä¸­çš„é“¾å¼ç¼–ç¨‹å’ŒRACDemo</a></li>
<li>2 <a href="https://github.com/benjycui/introrx-chinese-edition?utm_source=tuicool&amp;utm_medium=referral#%E4%BB%80%E4%B9%88%E6%98%AFrp" target="_blank" rel="external">ä»€ä¹ˆæ˜¯å“åº”å¼ç¼–ç¨‹?</a></li>
<li>3 <a href="http://ios.jobbole.com/82356/" target="_blank" rel="external">è¿™æ ·å¥½ç”¨çš„ReactiveCocoaï¼Œæ ¹æœ¬åœä¸ä¸‹æ¥</a></li>
<li>4 <a href="http://mobile.51cto.com/news-494321.htm" target="_blank" rel="external">æœ€å¿«è®©ä½ ä¸Šæ‰‹ReactiveCocoaä¹‹è¿›é˜¶ç¯‡</a></li>
<li>5 <a href="http://www.cocoachina.com/ios/20160106/14880.html" target="_blank" rel="external">ReactiveCocoa v2.5 æºç è§£æä¹‹æ¶æ„æ€»è§ˆ</a></li>
</ul>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>æœ¬æ–‡æ ‡é¢˜:</span><a href="/2016/07/04/iOS-Reactive-Cocoaä½¿ç”¨æµ…æ/">iOS Reactive Cocoaä½¿ç”¨æµ…æ</a></p>
        <p><span>æ–‡ç« ä½œè€…:</span><a href="/" title="è®¿é—® ManoBoo çš„ä¸ªäººåšå®¢">ManoBoo</a></p>
        <p><span>å‘å¸ƒæ—¶é—´:</span>2016å¹´07æœˆ04æ—¥ - 09æ—¶34åˆ†</p>
        <p><span>æœ€åæ›´æ–°:</span>2016å¹´07æœˆ04æ—¥ - 09æ—¶37åˆ†</p>
        <p>
            <span>åŸå§‹é“¾æ¥:</span><a class="post-url" href="/2016/07/04/iOS-Reactive-Cocoaä½¿ç”¨æµ…æ/" title="iOS Reactive Cocoaä½¿ç”¨æµ…æ">http://yoursite.com/2016/07/04/iOS-Reactive-Cocoaä½¿ç”¨æµ…æ/</a>
            <span class="copy-path" data-clipboard-text="åŸæ–‡: http://yoursite.com/2016/07/04/iOS-Reactive-Cocoaä½¿ç”¨æµ…æ/ã€€ã€€ä½œè€…: ManoBoo" title="ç‚¹å‡»å¤åˆ¶æ–‡ç« é“¾æ¥"><i class="fa fa-clipboard"></i></span>
            <script src="/js/clipboard.min.js"></script>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>è®¸å¯åè®®:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="ä¸­å›½å¤§é™† (CC BY-NC-SA 3.0 CN)" target = "_blank">"ç½²å-éå•†ç”¨-ç›¸åŒæ–¹å¼å…±äº« 3.0"</a> è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ã€‚
        </p>
    </div>



<nav id="article-nav">
  
    <a href="/2016/07/19/iOSåˆ©ç”¨Runtimeå†™ä¸€ä¸ªJsonè½¬Modelçš„å·¥å…·/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          iOSåˆ©ç”¨Runtimeå†™ä¸€ä¸ªJsonè½¬Modelçš„å·¥å…·
        
      </div>
    </a>
  
  
    <a href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹- åˆ«è¸©ç™½å—</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#iOS-Reactive-Cocoaä½¿ç”¨æµ…æ"><span class="toc-number">1.</span> <span class="toc-text">iOS Reactive Cocoaä½¿ç”¨æµ…æ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-ReactiveCocoaå“åº”å¼ç¼–ç¨‹æ¡†æ¶"><span class="toc-number">1.1.</span> <span class="toc-text">###2.ReactiveCocoaå“åº”å¼ç¼–ç¨‹æ¡†æ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reactive-Cocoaä½¿ç”¨"><span class="toc-number">1.2.</span> <span class="toc-text">##Reactive Cocoaä½¿ç”¨</span></a></li></ol></li></ol>
</div>
<input type="button" id="tocButton" value="éšè—ç›®å½•"  title="ç‚¹å‡»æŒ‰é’®éšè—æˆ–è€…æ˜¾ç¤ºæ–‡ç« ç›®å½•">

<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script>
    var valueHide = "éšè—ç›®å½•";
    var valueShow = "æ˜¾ç¤ºç›®å½•";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }
    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
        }
    })
    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
    }
</script>





<div class="bdsharebuttonbox">
	<a href="#" class="fx fa-weibo bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš"></a>
	<a href="#" class="fx fa-weixin bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡"></a>
	<a href="#" class="fx fa-qq bds_sqq" data-cmd="sqq" title="åˆ†äº«åˆ°QQå¥½å‹"></a>
	<a href="#" class="fx fa-facebook-official bds_fbook" data-cmd="fbook" title="åˆ†äº«åˆ°Facebook"></a>
	<a href="#" class="fx fa-twitter bds_twi" data-cmd="twi" title="åˆ†äº«åˆ°Twitter"></a>
	<a href="#" class="fx fa-linkedin bds_linkedin" data-cmd="linkedin" title="åˆ†äº«åˆ°linkedin"></a>
	<a href="#" class="fx fa-files-o bds_copy" data-cmd="copy" title="åˆ†äº«åˆ°å¤åˆ¶ç½‘å€"></a>
</div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>




    
      <div class="duoshuo" id="comments">
    <!-- å¤šè¯´è¯„è®ºæ¡† start -->
    <div class="ds-thread" data-thread-key="2016/07/04/iOS-Reactive-Cocoaä½¿ç”¨æµ…æ/" data-title="iOS Reactive Cocoaä½¿ç”¨æµ…æ" data-url="http://yoursite.com/2016/07/04/iOS-Reactive-Cocoaä½¿ç”¨æµ…æ/"></div>
    <!-- å¤šè¯´è¯„è®ºæ¡† end -->
    <!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"manoboo"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = '/js/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
    <!-- å¤šè¯´å…¬å…±JSä»£ç  end -->
</div>

    



    <div class="scroll" id="post-nav-button">
        
            <a href="/2016/07/19/iOSåˆ©ç”¨Runtimeå†™ä¸€ä¸ªJsonè½¬Modelçš„å·¥å…·/" title="ä¸Šä¸€ç¯‡: iOSåˆ©ç”¨Runtimeå†™ä¸€ä¸ªJsonè½¬Modelçš„å·¥å…·">
                <i class="fa fa-angle-left"></i>
            </a>
        
        <a title="æ–‡ç« åˆ—è¡¨"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>
        
            <a href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—/" title="ä¸‹ä¸€ç¯‡: iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹- åˆ«è¸©ç™½å—">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>
    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/07/19/iOSåˆ©ç”¨Runtimeå†™ä¸€ä¸ªJsonè½¬Modelçš„å·¥å…·/">iOSåˆ©ç”¨Runtimeå†™ä¸€ä¸ªJsonè½¬Modelçš„å·¥å…·</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/04/iOS-Reactive-Cocoaä½¿ç”¨æµ…æ/">iOS Reactive Cocoaä½¿ç”¨æµ…æ</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹-åˆ«è¸©ç™½å—/">iOSå°é¡¹ç›®ä¹‹ç¬¬äºŒå¼¹- åˆ«è¸©ç™½å—</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/30/iOSå°é¡¹ç›®ä¹‹ç¬¬ä¸€å¼¹-å£çº¸å¤©æ°”/">iOSå°é¡¹ç›®ä¹‹ç¬¬ä¸€å¼¹- å£çº¸å¤©æ°”</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/30/Swift2-0-é«˜ä»¿åŠå¡˜App/">Swift2.0 é«˜ä»¿åŠå¡˜App</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/04/iOSï¼Œå¦‚ä½•æ¨¡ä»¿ä¸€ä¸ªApp/">iOSï¼Œå¦‚ä½•æ¨¡ä»¿ä¸€ä¸ªApp</a></li></ul>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
            }
        })
    </script>



    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 ManoBoo
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >è®¿é—®é‡: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">æœ¬é¡µé˜…è¯»é‡: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>